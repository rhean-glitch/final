;/*FB_PKG_DELIM*/

__d("LSCleanupSession",["LSIssueNewEbTaskAndGetTaskIDV2","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][cleanupSession] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.i64.eq(a[1],c.i64.cast([0,0]))?d[2]=c.i64.cast([0,21]):(c.i64.eq(a[1],c.i64.cast([0,1]))?d[10]=c.i64.cast([0,20]):d[10]=c.i64.cast([0,20]),d[2]=d[10]),c.filter(c.db.table(258).fetch(),function(b){return(b.initiatorId===a[0]||b.responderId===a[0])&&c.i64.eq(b.clientType,a[2])}).next().then(function(e,f){var g=e.done;e=e.value;return g?c.filter(c.db.table(258).fetch(),function(b){return c.i64.eq(b.clientType,a[2])}).next().then(function(f,h){var e=f.done;f=f.value;return e?c.db.table(258).add({sessionId:c.i64.cast([-1,4294967295]),responderId:a[0],initiatorId:a[0],messageType:d[2],clientType:a[2]}):(h=f.item,c.sequence([function(a){return d[19]=h.sessionId,d[20]=h.responderId,d[21]=h.initiatorId,d[17]=h.responderUserId,d[18]=h.initiatorUserId,c.forEach(c.db.table(258).fetch([[[d[19]]]]),function(a){var b=a.update;a.item;return b({messageType:d[2]})})},function(e){return a[0]===d[21]?(c.i64.eq(a[2],c.i64.cast([0,1]))?d[22]=d[17]:d[22]=void 0,d[11]=d[22]):(a[0]===d[20]?(c.i64.eq(a[2],c.i64.cast([0,1]))?d[23]=d[18]:d[23]=void 0,d[22]=d[23]):d[22]=void 0,d[11]=d[22]),c.i64.eq(a[2],c.i64.cast([0,1]))?d[12]=d[17]:d[12]=void 0,c.i64.eq(a[2],c.i64.cast([0,1]))?d[13]=d[18]:d[13]=void 0,d[14]=new c.Map(),d[14].set("session_id",d[19]),d[14].set("responder_id",d[20]),d[14].set("initiator_id",d[21]),d[14].set("message_payload",h.messagePayload),d[14].set("pake_secret",h.pakeSecret),d[14].set("sender_id",a[0]),d[14].set("message_type",d[2]),d[14].set("client_type",a[2]),d[14].set("message_recipient_id",d[11]),d[14].set("initiator_user_id",d[13]),d[14].set("responder_user_id",d[12]),d[15]=c.toJSON(d[14]),c.storedProcedure(b("LSIssueNewEbTaskAndGetTaskIDV2"),"PakeMessages",c.i64.cast([0,717]),d[15],c.i64.cast([0,0]),c.i64.cast([0,93]),c.i64.cast([0,0]),void 0,c.i64.cast([0,0])).then(function(a){return a=a,d[16]=a[0],a})}]))}):(f=e.item,d[13]=f.sessionId,d[14]=f.responderId,d[15]=f.initiatorId,d[10]=f.messageType,d[11]=f.responderUserId,d[12]=f.initiatorUserId,c.i64.eq(d[10],c.i64.cast([0,15]))||c.i64.eq(d[10],c.i64.cast([0,21]))||c.i64.eq(d[10],c.i64.cast([0,20]))?c.resolve(0):c.sequence([function(a){return c.forEach(c.db.table(258).fetch([[[d[13]]]]),function(a){var b=a.update;a.item;return b({messageType:d[2]})})},function(e){return a[0]===d[15]?(c.i64.eq(a[2],c.i64.cast([0,1]))?d[22]=d[11]:d[22]=void 0,d[16]=d[22]):(a[0]===d[14]?(c.i64.eq(a[2],c.i64.cast([0,1]))?d[23]=d[12]:d[23]=void 0,d[22]=d[23]):d[22]=void 0,d[16]=d[22]),c.i64.eq(a[2],c.i64.cast([0,1]))?d[17]=d[11]:d[17]=void 0,c.i64.eq(a[2],c.i64.cast([0,1]))?d[18]=d[12]:d[18]=void 0,d[19]=new c.Map(),d[19].set("session_id",d[13]),d[19].set("responder_id",d[14]),d[19].set("initiator_id",d[15]),d[19].set("message_payload",f.messagePayload),d[19].set("pake_secret",f.pakeSecret),d[19].set("sender_id",a[0]),d[19].set("message_type",d[2]),d[19].set("client_type",a[2]),d[19].set("message_recipient_id",d[16]),d[19].set("initiator_user_id",d[18]),d[19].set("responder_user_id",d[17]),d[20]=c.toJSON(d[19]),c.storedProcedure(b("LSIssueNewEbTaskAndGetTaskIDV2"),"PakeMessages",c.i64.cast([0,717]),d[20],c.i64.cast([0,0]),c.i64.cast([0,93]),c.i64.cast([0,0]),void 0,c.i64.cast([0,0])).then(function(a){return a=a,d[21]=a[0],a})}]))})},function(a){return d[4]=c.i64.of_float(Date.now()),d[5]=c.i64.random(),d[7]="Finishing execution. Execution time: ",d[8]=c.i64.to_string(c.i64.sub(d[4],d[0])),d[9]=" ms",d[6]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][cleanupSession] ",d[6],d[7],d[6],d[8],d[6],d[9]].join("")),c.i64.eq(c.i64.mod_(d[5],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[10]=",",d[11]=c.createArray(),void 0!==void 0?d[12]=(d[11].push(void 0),d[11]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"cleanupSession",[d[7],d[10],d[8],d[10],d[9]].join(""),d[11],c.i64.cast([0,4]))):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSPakeMessagesCleanupSessionStoredProcedure";a.__tables__=["pake_messages"];e.exports=a}),null);
__d("LSCleanupSessionStoredProcedure",["LSCleanupSession","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSCleanupSession"),e.deviceId,e.cleanupReason,e.clientType);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("CleanupPakeSession",["LSCleanupSessionStoredProcedure","LSFactory","LSIntEnum","MAWOneTimeCodeGating","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var e=a.cleanupReason,g=a.clientType,j=a.deviceId;a=a.storage;return!d("MAWOneTimeCodeGating").isOneTimeCodeEnabled()?(i||(i=b("Promise"))).resolve():a.runInTransaction(function(a){return c("LSCleanupSessionStoredProcedure")(c("LSFactory")(a),{cleanupReason:(h||(h=d("LSIntEnum"))).ofNumber(e),clientType:h.ofNumber(g),deviceId:j})},"readwrite",void 0,void 0,f.id+":41")}g["default"]=a}),98);
__d("FBIconCautionCircleOutline20.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 20 20",width:"1em",height:"1em",fill:"currentColor",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").G,{fillRule:"evenodd",transform:"translate(-446 -398)",children:i.jsxs(d("XPlatReactSVG").G,{children:[i.jsx(d("XPlatReactSVG").Path,{d:"m101.5 200.17.5 4.83.5-4.83s0-.42-.5-.42-.5.42-.5.42",transform:"translate(354 204.5)"}),i.jsx(d("XPlatReactSVG").Path,{fillRule:"nonzero",d:"m100.754 200.247.5 4.83c.093.897 1.4.897 1.492 0l.5-4.83.004-.077c0-.176-.04-.38-.168-.594-.214-.36-.6-.576-1.082-.576-.481 0-.868.216-1.082.576a1.144 1.144 0 0 0-.168.594l.004.077zm.996-.077h.5c0 .07-.01.117-.043.174-.058.097-.163.156-.207.156-.044 0-.149-.059-.207-.156a.302.302 0 0 1-.043-.174z",transform:"translate(354 204.5)"}),i.jsx(d("XPlatReactSVG").Path,{d:"M103 207.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0",transform:"translate(354 204.5)"}),i.jsx(d("XPlatReactSVG").Path,{d:"M102 193.5c-5.523 0-10 4.477-10 10s4.477 10 10 10 10-4.477 10-10-4.477-10-10-10m0 1.304c4.795 0 8.696 3.901 8.696 8.696s-3.901 8.696-8.696 8.696-8.696-3.901-8.696-8.696 3.901-8.696 8.696-8.696",transform:"translate(354 204.5)"})]})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("FBIconMessagesReplyFilled24.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").G,{fillRule:"evenodd",transform:"translate(-444 -156)",children:i.jsxs(d("XPlatReactSVG").G,{children:[i.jsx(d("XPlatReactSVG").Path,{d:"M105.5 5v-.75A4.255 4.255 0 0 0 101.25 0h-7A4.255 4.255 0 0 0 90 4.25v4a4.257 4.257 0 0 0 3.5 4.184v2.816a.752.752 0 0 0 1.22.584L96.5 14.4v-3.15A6.257 6.257 0 0 1 102.75 5h2.75z",transform:"translate(354 157)"}),i.jsx(d("XPlatReactSVG").Path,{d:"M109.75 7h-7a4.255 4.255 0 0 0-4.25 4.25v4a4.255 4.255 0 0 0 4.25 4.25h2.39l4.14 3.334a.75.75 0 0 0 1.22-.584v-2.817a4.257 4.257 0 0 0 3.5-4.183v-4A4.255 4.255 0 0 0 109.75 7",transform:"translate(354 157)"})]})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("FBIconMobileFilled12.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").G,{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsx(d("XPlatReactSVG").Path,{d:"M453 1082.5h6v-7h-6v7zm3.5 2h-1a.501.501 0 0 1-.5-.5c0-.275.225-.5.5-.5h1c.275 0 .5.225.5.5s-.225.5-.5.5zm2.25-11h-5.5c-.69 0-1.25.56-1.25 1.25v9.5c0 .69.56 1.25 1.25 1.25h5.5c.69 0 1.25-.56 1.25-1.25v-9.5c0-.69-.56-1.25-1.25-1.25z"})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("FBIconMobileOutline20.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 20 20",width:"1em",height:"1em",fill:"currentColor",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").G,{fillRule:"evenodd",transform:"translate(-446 -398)",children:i.jsxs(d("XPlatReactSVG").G,{transform:"translate(354 203.5)",children:[i.jsx(d("XPlatReactSVG").Path,{fillRule:"nonzero",d:"M96 198.5 108 198.5 108 197 96 197z"}),i.jsx(d("XPlatReactSVG").Path,{d:"M1.375 1.25h1.25",transform:"translate(100 210.5)"}),i.jsx(d("XPlatReactSVG").Path,{fillRule:"nonzero",d:"M1.375 2h1.25a.75.75 0 0 0 0-1.5h-1.25a.75.75 0 0 0 0 1.5z",transform:"translate(100 210.5)"}),i.jsx(d("XPlatReactSVG").Path,{fillRule:"nonzero",d:"M106.578 214.5h-9.156A2.422 2.422 0 0 1 95 212.078v-15.156a2.422 2.422 0 0 1 2.422-2.422h9.156a2.422 2.422 0 0 1 2.422 2.422v15.156a2.422 2.422 0 0 1-2.422 2.422zm0-1.5c.51 0 .922-.413.922-.922v-15.156a.922.922 0 0 0-.922-.922h-9.156a.922.922 0 0 0-.922.922v15.156c0 .51.413.922.922.922h9.156z"}),i.jsx(d("XPlatReactSVG").Path,{fillRule:"nonzero",d:"M96 210.5 108 210.5 108 209 96 209z"})]})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("FBIconMobileRotateFilled24.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b;return i.jsxs((b=d("XPlatReactSVG")).Svg,babelHelpers["extends"]({viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",title:a.title},a,{children:[i.jsxs(b.Defs,{children:[i.jsx(b.Path,{d:"M.250109636 0 162 0 162 932 .250109636 932z"}),a.children]}),i.jsxs(b.G,{transform:"translate(-444 -156) translate(354 156.5)",stroke:"none",strokeWidth:1,fillRule:"evenodd",children:[i.jsx(b.Mask,{children:i.jsx(b.Use,{xlinkHref:"#a"})}),i.jsx(b.Path,{d:"M98.5 16h7V6.5h-7V16zm8.5 2V5c0-1.103-.897-2-2-2h-6c-1.103 0-2 .897-2 2v13c0 1.103.897 2 2 2h6c1.103 0 2-.897 2-2z",mask:"url(#b)"}),i.jsx(b.Path,{d:"M96.752 1.5h4.748a.75.75 0 0 0 0-1.5h-4.748a5.256 5.256 0 0 0-5.249 5.25V10h-.753a.75.75 0 0 0-.53 1.28l1.5 1.5a.746.746 0 0 0 1.06 0l1.5-1.5a.751.751 0 0 0-.53-1.28h-.747V5.25a3.754 3.754 0 0 1 3.75-3.75M113.78 11.682l-1.5-1.5a.75.75 0 0 0-1.06 0l-1.5 1.5a.75.75 0 0 0 .53 1.28h.749v4.788a3.755 3.755 0 0 1-3.75 3.75H102.5a.75.75 0 0 0 0 1.5h4.748a5.256 5.256 0 0 0 5.25-5.25v-4.787h.75a.75.75 0 0 0 .531-1.28",mask:"url(#b)"})]})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("FBIconQuestionCircleFilled12.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").G,{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsx(d("XPlatReactSVG").Path,{d:"M456.743 1080.355v.312a.75.75 0 0 1-1.5 0v-.95a.75.75 0 0 1 .75-.75c.555 0 1.007-.428 1.007-.955 0-.535-.449-.97-1-.97-.551 0-1 .435-1 .97a.75.75 0 1 1-1.5 0c0-1.362 1.122-2.47 2.5-2.47 1.379 0 2.5 1.108 2.5 2.47 0 1.099-.74 2.03-1.757 2.343m-.743 3.103a.897.897 0 1 1 .002-1.793.897.897 0 0 1-.002 1.793m0-9.958c-3.309 0-6 2.691-6 6s2.691 6 6 6 6-2.691 6-6-2.691-6-6-6"})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("FBIconTabletOutline20.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 20 20",width:"1em",height:"1em",fill:"currentColor",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").G,{fillRule:"evenodd",transform:"translate(-446 -398)",children:i.jsxs(d("XPlatReactSVG").G,{transform:"translate(355.5 191.5)",children:[i.jsx(d("XPlatReactSVG").Path,{fillRule:"nonzero",d:"M93.5 211.5 107.5 211.5 107.5 210 93.5 210z"}),i.jsx(d("XPlatReactSVG").Path,{fillRule:"nonzero",d:"M106.078 226.5H94.922a2.422 2.422 0 0 1-2.422-2.422v-15.156a2.422 2.422 0 0 1 2.422-2.422h11.156a2.422 2.422 0 0 1 2.422 2.422v15.156a2.422 2.422 0 0 1-2.422 2.422zm0-1.5c.51 0 .922-.413.922-.922v-15.156a.922.922 0 0 0-.922-.922H94.922a.922.922 0 0 0-.922.922v15.156c0 .51.413.922.922.922h11.156z"}),i.jsx(d("XPlatReactSVG").Path,{fillRule:"nonzero",d:"M93.5 222 107.5 222 107.5 220.5 93.5 220.5z"}),i.jsx(d("XPlatReactSVG").Path,{d:"M101.5 223.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0"})]})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MWPakeQPLEvents",["qpl"],(function(a,b,c,d,e,f,g){"use strict";a=c("qpl")._(231349365,"1751");g.pakeInitiatorQplEvent=a}),98);
__d("PAKEMessageQplLoggingAction",[],(function(a,b,c,d,e,f){a=Object.freeze({ADD_MARKER:0,END_SUCCESS:1,END_FAILURE:2,ADD_ERROR_ANNOTATION:3});f["default"]=a}),66);
__d("LSQplInteractionHelper.nop",["FBLogger","I64","MWPakeQPLEvents","PAKEMessageQplLoggingAction","Promise","QPLUserFlow"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(a,e,f,g,j){a=(i||(i=d("I64"))).to_int32(g);switch(a){case c("PAKEMessageQplLoggingAction").ADD_MARKER:f==null?c("FBLogger")("labyrinth_web").mustfix("PAKE: markerName is null when adding DS PAKE marker."):c("QPLUserFlow").addPoint(d("MWPakeQPLEvents").pakeInitiatorQplEvent,f);break;case c("PAKEMessageQplLoggingAction").END_FAILURE:f==null?c("FBLogger")("labyrinth_web").mustfix("PAKE: markerName is null when adding failure DS PAKE marker."):c("QPLUserFlow").endFailure(d("MWPakeQPLEvents").pakeInitiatorQplEvent,f);break;case c("PAKEMessageQplLoggingAction").END_SUCCESS:c("QPLUserFlow").endSuccess(d("MWPakeQPLEvents").pakeInitiatorQplEvent);break;case c("PAKEMessageQplLoggingAction").ADD_ERROR_ANNOTATION:j==null?c("FBLogger")("labyrinth_web").mustfix("PAKE: pakeMessageType is null when annotating PAKE error."):c("QPLUserFlow").addAnnotations(d("MWPakeQPLEvents").pakeInitiatorQplEvent,{"int":{errorCode:(i||(i=d("I64"))).to_int32(j)}});break}return(h||(h=b("Promise"))).resolve()};a.__nop_name__="LSQplInteractionHelper";g["default"]=a}),98);
__d("LSDecryptPakeSecret",["LSLogMebClientEvent.nop","LSQplInteractionHelper.nop","LSSymmetricEncryptionCreateDecryptedString.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][decryptPakeSecret] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.filter(c.db.table(258).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.clientType,a[2])&&c.i64.eq(b.sessionId,a[0])}).next().then(function(e,f){var g=e.done;e=e.value;return g?c.sequence([function(a){return c.nativeOperation(b("LSQplInteractionHelper.nop"),"PAKE_DS_DECRYPT_SECRET_NO_SESSION_ONGOING_FAILURE",c.i64.cast([0,0]),void 0)},function(a){return d[12]="PAKE: Failed to decrypt PAKE secrets as no session was ongoing.",c.nativeOperation(b("LSQplInteractionHelper.nop"),void 0,c.i64.cast([0,3]),c.i64.cast([0,7]))},function(b){return c.islc(c.filter(c.db.table(258).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.clientType,a[2])&&c.i64.eq(b.sessionId,a[0])}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(b,d){d=b.done;b=b.value;return d?c.db.table(258).add({sessionId:a[0],messageType:c.i64.cast([0,7]),clientType:a[2]}):(b.item,c.forEach(c.db.table(258).fetch([[[a[0]]]]),function(a){var b=a.update;a.item;return b({messageType:c.i64.cast([0,7])})}))})},function(a){return function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSPakeMessagesDecryptPakeSecretStoredProcedure] ","",d[12]].join("")),d[13]=c.createArray(),void 0!==void 0?d[14]=(d[13].push(void 0),d[13]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSPakeMessagesDecryptPakeSecretStoredProcedure",[d[12]].join(""),d[13],c.i64.cast([0,3]))},function(a){return a=[void 0,c.i64.cast([-1,4294967294])],d[2]=a[0],d[3]=a[1],a}]):(f=e.item,c.sequence([function(e){return d[13]=f.responderId,d[14]=f.initiatorId,d[15]=f.pakeSecret,d[13]!==void 0?c.sequence([function(e){return d[14]!==void 0?c.sequence([function(e){return d[15]!==void 0?c.sequence([function(a){return c.nativeOperation(b("LSQplInteractionHelper.nop"),"PAKE_DS_DECRYPT_SECRET_GENERATE_PAKE_AAD_START",c.i64.cast([0,0]),void 0)},function(a){return d[20]="_",c.nativeOperation(b("LSQplInteractionHelper.nop"),"PAKE_DS_DECRYPT_SECRET_NATIVE_OP_START",c.i64.cast([0,0]),void 0)},function(e){return c.nativeOperation(b("LSSymmetricEncryptionCreateDecryptedString.nop"),a[1],c.blobs.of_string(["v1",d[20],c.i64.to_string(a[0]),d[20],d[13],d[20],d[14],d[20],c.i64.to_string(f.clientType)].join("")),d[15]).then(function(a){return a=a,d[21]=a[0],a})},function(e){return d[21]!==void 0?c.resolve((e=[d[21],c.i64.cast([0,0])],d[22]=e[0],d[23]=e[1],e)):c.sequence([function(a){return d[25]="PAKE: Failed to decrypt PAKE secrets as key was incorrect.",c.nativeOperation(b("LSQplInteractionHelper.nop"),void 0,c.i64.cast([0,3]),c.i64.cast([0,10]))},function(b){return c.islc(c.filter(c.db.table(258).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.clientType,a[2])&&c.i64.eq(b.sessionId,a[0])}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(b,d){d=b.done;b=b.value;return d?c.db.table(258).add({sessionId:a[0],messageType:c.i64.cast([0,10]),clientType:a[2]}):(b.item,c.forEach(c.db.table(258).fetch([[[a[0]]]]),function(a){var b=a.update;a.item;return b({messageType:c.i64.cast([0,10])})}))})},function(a){return function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSPakeMessagesDecryptPakeSecretStoredProcedure] ","",d[25]].join("")),d[26]=c.createArray(),void 0!==void 0?d[27]=(d[26].push(void 0),d[26]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSPakeMessagesDecryptPakeSecretStoredProcedure",[d[25]].join(""),d[26],c.i64.cast([0,3]))},function(a){return a=[void 0,c.i64.cast([-1,4294967295])],d[22]=a[0],d[23]=a[1],a}])},function(a){return a=[d[22],d[23]],d[18]=a[0],d[19]=a[1],a}]):c.sequence([function(a){return c.nativeOperation(b("LSQplInteractionHelper.nop"),"PAKE_DS_DECRYPT_SECRET_PAKE_SECRET_NULL_FAILURE",c.i64.cast([0,0]),void 0)},function(a){return d[21]="PAKE: Failed to decrypt PAKE secrets as there was no secret to decrypt.",c.nativeOperation(b("LSQplInteractionHelper.nop"),void 0,c.i64.cast([0,3]),c.i64.cast([0,8]))},function(b){return c.islc(c.filter(c.db.table(258).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.clientType,a[2])&&c.i64.eq(b.sessionId,a[0])}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(b,d){d=b.done;b=b.value;return d?c.db.table(258).add({sessionId:a[0],messageType:c.i64.cast([0,8]),clientType:a[2]}):(b.item,c.forEach(c.db.table(258).fetch([[[a[0]]]]),function(a){var b=a.update;a.item;return b({messageType:c.i64.cast([0,8])})}))})},function(a){return function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSPakeMessagesDecryptPakeSecretStoredProcedure] ","",d[21]].join("")),d[22]=c.createArray(),void 0!==void 0?d[23]=(d[22].push(void 0),d[22]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSPakeMessagesDecryptPakeSecretStoredProcedure",[d[21]].join(""),d[22],c.i64.cast([0,3]))},function(a){return a=[void 0,c.i64.cast([-1,4294967294])],d[18]=a[0],d[19]=a[1],a}])},function(a){return a=[d[18],d[19]],d[16]=a[0],d[17]=a[1],a}]):c.sequence([function(a){return c.nativeOperation(b("LSQplInteractionHelper.nop"),"PAKE_DS_DECRYPT_SECRET_INITIATOR_ID_NULL_FAILURE",c.i64.cast([0,0]),void 0)},function(a){return d[19]="PAKE: Failed to decrypt PAKE secrets as initiator id was null.",c.nativeOperation(b("LSQplInteractionHelper.nop"),void 0,c.i64.cast([0,3]),c.i64.cast([0,8]))},function(b){return c.islc(c.filter(c.db.table(258).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.clientType,a[2])&&c.i64.eq(b.sessionId,a[0])}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(b,d){d=b.done;b=b.value;return d?c.db.table(258).add({sessionId:a[0],messageType:c.i64.cast([0,8]),clientType:a[2]}):(b.item,c.forEach(c.db.table(258).fetch([[[a[0]]]]),function(a){var b=a.update;a.item;return b({messageType:c.i64.cast([0,8])})}))})},function(a){return function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSPakeMessagesDecryptPakeSecretStoredProcedure] ","",d[19]].join("")),d[20]=c.createArray(),void 0!==void 0?d[21]=(d[20].push(void 0),d[20]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSPakeMessagesDecryptPakeSecretStoredProcedure",[d[19]].join(""),d[20],c.i64.cast([0,3]))},function(a){return a=[void 0,c.i64.cast([-1,4294967294])],d[16]=a[0],d[17]=a[1],a}])},function(a){return a=[d[16],d[17]],d[11]=a[0],d[12]=a[1],a}]):c.sequence([function(a){return c.nativeOperation(b("LSQplInteractionHelper.nop"),"PAKE_DS_DECRYPT_SECRET_RESPONDER_ID_NULL_FAILURE",c.i64.cast([0,0]),void 0)},function(a){return d[17]="PAKE: Failed to decrypt PAKE secrets as responder id was null.",c.nativeOperation(b("LSQplInteractionHelper.nop"),void 0,c.i64.cast([0,3]),c.i64.cast([0,8]))},function(b){return c.islc(c.filter(c.db.table(258).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.clientType,a[2])&&c.i64.eq(b.sessionId,a[0])}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(b,d){d=b.done;b=b.value;return d?c.db.table(258).add({sessionId:a[0],messageType:c.i64.cast([0,8]),clientType:a[2]}):(b.item,c.forEach(c.db.table(258).fetch([[[a[0]]]]),function(a){var b=a.update;a.item;return b({messageType:c.i64.cast([0,8])})}))})},function(a){return function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSPakeMessagesDecryptPakeSecretStoredProcedure] ","",d[17]].join("")),d[18]=c.createArray(),void 0!==void 0?d[19]=(d[18].push(void 0),d[18]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSPakeMessagesDecryptPakeSecretStoredProcedure",[d[17]].join(""),d[18],c.i64.cast([0,3]))},function(a){return a=[void 0,c.i64.cast([-1,4294967294])],d[11]=a[0],d[12]=a[1],a}])},function(a){return a=[d[11],d[12]],d[2]=a[0],d[3]=a[1],a}]))})},function(a){return d[5]=c.i64.of_float(Date.now()),d[6]=c.i64.random(),d[8]="Finishing execution. Execution time: ",d[9]=c.i64.to_string(c.i64.sub(d[5],d[0])),d[10]=" ms",d[7]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][decryptPakeSecret] ",d[7],d[8],d[7],d[9],d[7],d[10]].join("")),c.i64.eq(c.i64.mod_(d[6],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[11]=",",d[12]=c.createArray(),void 0!==void 0?d[13]=(d[12].push(void 0),d[12]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"decryptPakeSecret",[d[8],d[11],d[9],d[11],d[10]].join(""),d[12],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[2],d[3]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSPakeMessagesDecryptPakeSecretStoredProcedure";a.__tables__=["pake_messages"];e.exports=a}),null);
__d("LSDecryptPakeSecretStoredProcedure",["LSDecryptPakeSecret","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSDecryptPakeSecret"),e.sessionId,e.encryptionKey,e.clientType);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSFinishAddPeerDevice",["LSAppendDataTraceAddon","LSArrayGetObjectAt","LSBase64Encode.nop","LSCreateDebugToken.nop","LSCreateDerivedKeys.nop","LSCreateSignature_v2.nop","LSDeleteBackupOnClient","LSGenerateLocalKeys","LSGetBlobFromString.nop","LSHmac_v2.nop","LSIsEncryptionVersionSecure","LSIsMobileClient","LSIssueNewEbTaskAndGetTaskIDV2","LSLogMebClientEvent.nop","LSOcmfClientEvolve_v2.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsFinishAddPeerDeviceStoredProcedure] Beginning execution."),c.sequence([function(a){return void 0!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),void 0,c.i64.cast([0,1434]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[8]=a[0],a})},function(a){return d[8]?d[9]=!0:d[9]=!1,d[9]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[11]="LSDataTraceMciTraceLog native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",d[11]].join("")),d[10]=c.createArray(),void 0!==void 0?d[12]=(d[10].push(void 0),d[10]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",d[11],d[10],c.i64.cast([0,3]))):c.resolve()}])},function(e){return c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))}).next().then(function(e,f){f=e.done;e=e.value;return f?c.sequence([function(a){return c.db.table(168).fetch().next().then(function(a,d){var e=a.done;a=a.value;return e?0:(d=a.item,c.storedProcedure(b("LSDeleteBackupOnClient"),d.backupId,void 0,!1,void 0,"null",!0))})},function(e){return d[8]=a[0].get("backup_id"),c.storedProcedure(b("LSGenerateLocalKeys"),!1).then(function(a){return a=a,d[9]=a[0],d[10]=a[1],a})},function(e){return d[9]!==void 0?c.sequence([function(a){return d[11]=d[9].get("device_key"),d[12]=d[9].get("epoch_storage_key"),d[13]=d[9].get("epoch_auth_key"),d[14]=d[11].get("device_private_key"),d[15]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[16]=a[0],a})},function(a){return d[16]?d[44]=(d[15].push(c.i64.cast([0,0])),d[15]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[17]=a[0],a})},function(a){return d[17]?d[44]=(d[15].push(c.i64.cast([0,2])),d[15]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[18]=a[0],a})},function(a){return d[18]?d[44]=(d[15].push(c.i64.cast([0,3])),d[15]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[19]=a[0],a})},function(a){return d[19]?d[44]=(d[15].push(c.i64.cast([0,4])),d[15]):0,d[20]="",d[21]=c.i64.of_int32(d[15].length),c.i64.gt(d[21],c.i64.cast([0,0]))?c.loopAsync(d[21],function(a){return d[44]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[15],d[44]).then(function(a){return a=a,d[45]=a[0],d[46]=a[1],a})},function(a){return d[20]=[d[20],"_",c.i64.to_string(d[45])].join("")}])}):c.resolve()},function(a){return c.nativeOperation(b("LSGetBlobFromString.nop"),["supported_versions_",d[20],"revision_version_",c.i64.to_string(c.i64.cast([0,1]))].join("")).then(function(a){return a=a,d[22]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateSignature_v2.nop"),d[14],c.blob("Mg=="),d[22]).then(function(a){return a=a,d[23]=a[0],a})},function(a){return c.blobs.neq(d[23],void 0)?c.sequence([function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[23]).then(function(a){return a=a,d[44]=a[0],a})},function(a){return d[24]=d[44]}]):c.resolve(d[24]=void 0)},function(e){return d[25]=a[0].get("temp_ocmf_client_state"),c.nativeOperation(b("LSOcmfClientEvolve_v2.nop"),d[25]).then(function(a){return a=a,d[26]=a[0],d[27]=a[1],a})},function(a){return c.blobs.neq(void 0,void 0)?c.sequence([function(a){return c.nativeOperation(b("LSOcmfClientEvolve_v2.nop"),void 0).then(function(a){return a=a,d[44]=a[0],d[45]=a[1],a})},function(a){return a=[d[26],d[27],d[44],d[45]],d[28]=a[0],d[29]=a[1],d[30]=a[2],d[31]=a[3],a}]):c.resolve((a=[d[26],d[27],void 0,void 0],d[28]=a[0],d[29]=a[1],d[30]=a[2],d[31]=a[3],a))},function(b){return d[32]=d[11].get("device_public_key"),d[33]=d[11].get("device_private_key"),d[34]=d[12].get("epoch_storage_public_key"),d[35]=d[12].get("epoch_storage_private_key"),d[36]=d[13].get("epoch_auth_public_key"),d[37]=d[13].get("epoch_auth_private_key"),d[38]=a[0].get("mailbox_root_key"),d[39]=a[0].get("oblivious_validation_token"),c.forEach(c.filter(c.db.table(168).fetch([[[d[8]]]]),function(a){return c.i64.eq(a.backupId,d[8])&&c.i64.lt(a.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(a){return c.db.table(168).add({backupId:d[8],devicePublicKeyBlob:d[32],devicePrivateKeyBlob:d[33],epochStoragePublicKeyBlob:d[34],epochStoragePrivateKeyBlob:d[35],epochAuthPublicKeyBlob:d[36],epochAuthPrivateKeyBlob:d[37],mailboxRootKeyBlob:d[38],ocmfClientStateBlob:d[28],obliviousValidationTokenBlob:d[39],authorityLevel:c.i64.cast([0,20]),backupTenancy:c.i64.cast([0,1]),revisionVersion:c.i64.cast([0,1]),encryptionVersion:c.i64.cast([0,0])})},function(e){return d[40]=a[0].get("add_peer_epoch_data"),d[41]=c.i64.of_int32(d[40].length),c.i64.gt(d[41],c.i64.cast([0,0]))?c.loopAsync(d[41],function(a){return d[44]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[40],d[44]).then(function(a){return a=a,d[45]=a[0],d[46]=a[1],a})},function(a){return d[47]=d[45].get("epoch_id"),d[48]=d[45].get("epoch_anon_id"),d[49]=d[45].get("epoch_root_key"),d[50]=d[45].get("epoch_status"),c.forEach(c.filter(c.db.table(169).fetch([[[d[47]]]]),function(a){return c.i64.eq(a.epochId,d[47])&&c.i64.lt(a.authorityLevel,c.i64.cast([0,80]))}),function(a){return a["delete"]()})},function(a){return c.db.table(169).add({epochId:d[47],authorityLevel:c.i64.cast([0,80]),backupId:d[8],epochAnonIdBlob:d[48],epochRootKeyBlob:d[49],epochStatus:d[50]})}])}):c.resolve()},function(a){return c.count(c.db.table(169).fetch()).then(function(a){return d[42]=a})},function(a){return c.i64.le(d[42],c.i64.cast([0,1]))?c.sequence([function(a){return c.db.table(169).fetch().next().then(function(a,e){var f=a.done;a=a.value;return f?c.sequence([function(a){return d[46]="No epoch available in epochs table",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsFinishAddPeerDeviceStoredProcedure] ","",d[46]].join("")),d[47]=c.createArray(),void 0!==void 0?d[48]=(d[47].push(void 0),d[47]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsFinishAddPeerDeviceStoredProcedure",[d[46]].join(""),d[47],c.i64.cast([0,3]))},function(a){return d[44]=void 0}]):(e=a.item,d[46]=new c.Map(),d[46].set("epoch_id",e.epochId),d[46].set("backup_id",e.backupId),d[46].set("epoch_anon_id_blob",e.epochAnonIdBlob),d[46].set("epoch_root_key_blob",e.epochRootKeyBlob),d[46].set("epoch_status",e.epochStatus),d[46].set("epoch_head",e.epochHead),d[46].set("authority_level",e.authorityLevel),d[44]=d[46])})},function(a){return d[43]=d[44]}]):c.sequence([function(a){return d[44]="Multiple epochs available in epochs table",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsFinishAddPeerDeviceStoredProcedure] ","",d[44]].join("")),d[45]=c.createArray(),void 0!==void 0?d[46]=(d[45].push(void 0),d[45]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsFinishAddPeerDeviceStoredProcedure",[d[44]].join(""),d[45],c.i64.cast([0,3]))},function(a){return d[43]=void 0}])},function(e){return d[43]!==void 0?c.sequence([function(a){return d[44]=d[43].get("epoch_anon_id_blob"),d[45]=d[43].get("epoch_root_key_blob"),d[46]=d[11].get("device_public_key"),d[47]=c.createArray(),d[51]=(d[47].push(c.i64.cast([0,32])),d[47]),c.nativeOperation(b("LSBase64Encode.nop"),d[44]).then(function(a){return a=a,d[48]=a[0],a})},function(a){return d[48]!==void 0?c.sequence([function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blobs.of_string(["epoch_devices","_",d[48]].join("")),void 0,d[45],d[47]).then(function(a){return a=a,d[51]=a[0],a})},function(a){return d[51]?d[52]=!1:d[52]=!0,d[52]?c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoEpochUtils] THIS IS NOT EXPECTED. Found null keys while deriving keys for epoch. Returning empty blobish"),d[55]="THIS IS NOT EXPECTED. Found null keys while deriving keys for epoch. Returning empty blobish",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoEpochUtils] ","",d[55]].join("")),d[54]=c.createArray(),void 0!==void 0?d[57]=(d[54].push(void 0),d[54]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoEpochUtils",d[55],d[54],c.i64.cast([0,3]))},function(a){return c.nativeOperation(b("LSGetBlobFromString.nop"),"").then(function(a){return a=a,d[56]=a[0],a})},function(a){return d[53]=d[56]}]):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[51],c.i64.cast([0,0])).then(function(a){return a=a,d[54]=a[0],d[55]=a[1],a})},function(a){return d[53]=d[54]}])},function(a){return d[49]=d[53]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBCryptoEpochUtils] THIS IS NOT EXPECTED. Failed to base64 encode epoch anon id. Returning empty blobish"),d[52]="THIS IS NOT EXPECTED. Failed to base64 encode epoch anon id. Returning empty blobish",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBCryptoEpochUtils] ","",d[52]].join("")),d[51]=c.createArray(),void 0!==void 0?d[54]=(d[51].push(void 0),d[51]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBCryptoEpochUtils",d[52],d[51],c.i64.cast([0,3]))},function(a){return c.nativeOperation(b("LSGetBlobFromString.nop"),"").then(function(a){return a=a,d[53]=a[0],a})},function(a){return d[49]=d[53]}])},function(a){return c.nativeOperation(b("LSHmac_v2.nop"),d[49],d[46]).then(function(a){return a=a,d[50]=a[0],a})},function(e){return c.blobs.neq(d[50],void 0)?c.sequence([function(a){return d[51]=d[11].get("device_public_key"),c.nativeOperation(b("LSBase64Encode.nop"),d[51]).then(function(a){return a=a,d[52]=a[0],a})},function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[50]).then(function(a){return a=a,d[53]=a[0],a})},function(a){return d[54]=d[43].get("epoch_root_key_blob"),c.blobs.neq(d[54],void 0)?c.sequence([function(a){return d[81]=c.createArray(),d[87]=(d[81].push(c.i64.cast([0,18])),d[81]),c.nativeOperation(b("LSCreateDerivedKeys.nop"),c.blob("bWViL2RlYnVnL2ZpbmdlcnByaW50L01FQkVwb2NoUm9vdEtleQ=="),void 0,d[54],d[81]).then(function(a){return a=a,d[82]=a[0],a})},function(a){return d[82]!==void 0?c.sequence([function(a){return d[87]=c.i64.of_int32(d[82].length),c.i64.ge(d[87],c.i64.cast([0,1]))?c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[82],c.i64.cast([0,0])).then(function(a){return a=a,d[89]=a[0],d[90]=a[1],a})},function(a){return d[88]=d[89]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM."),d[90]="CreateDerivedKeys returned an empty list of keys. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBFingerprint] ","",d[90]].join("")),d[89]=c.createArray(),void 0!==void 0?d[91]=(d[89].push(void 0),d[89]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint",d[90],d[89],c.i64.cast([0,3]))},function(a){return d[88]=void 0}])},function(a){return d[83]=d[88]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBFingerprint] CreateDerivedKeys returned null. This should never happen; aborting dasm VM."),d[88]="CreateDerivedKeys returned null. This should never happen; aborting dasm VM.",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBFingerprint] ","",d[88]].join("")),d[87]=c.createArray(),void 0!==void 0?d[89]=(d[87].push(void 0),d[87]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBFingerprint",d[88],d[87],c.i64.cast([0,3]))},function(a){return d[83]=void 0}])},function(a){return c.blobs.neq(d[83],void 0)?d[84]=!0:d[84]=!1,d[84]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Attempting to coerce a null value to nonnull."),c["throw"]("LS::assert is failed. Attempting to coerce a null value to nonnull.")),c.nativeOperation(b("LSBase64Encode.nop"),d[83]).then(function(a){return a=a,d[85]=a[0],a})},function(a){return d[85]!==void 0?d[86]=d[85]:d[86]="encodingfailed",d[55]=d[86]}]):c.resolve(d[55]="null")},function(a){return d[56]=d[12].get("epoch_storage_public_key"),c.nativeOperation(b("LSBase64Encode.nop"),d[56]).then(function(a){return a=a,d[57]=a[0],a})},function(a){return d[58]=d[9].get("epoch_storage_public_key_sig"),c.nativeOperation(b("LSBase64Encode.nop"),d[58]).then(function(a){return a=a,d[59]=a[0],a})},function(a){return d[60]=d[13].get("epoch_auth_public_key"),c.nativeOperation(b("LSBase64Encode.nop"),d[60]).then(function(a){return a=a,d[61]=a[0],a})},function(a){return d[62]=d[9].get("epoch_auth_public_key_sig"),c.nativeOperation(b("LSBase64Encode.nop"),d[62]).then(function(a){return a=a,d[63]=a[0],a})},function(e){return d[64]=d[11].get("device_private_key"),d[65]=a[0].get("mailbox_root_key"),d[66]=d[12].get("epoch_storage_private_key"),c.blobs.neq(d[65],void 0)?c.sequence([function(a){return d[81]=new c.Map(),c.nativeOperation(b("LSCreateDebugToken.nop"),d[65],"private_key",d[64],c.i64.cast([0,1]),d[81]).then(function(a){return a=a,d[82]=a[0],a})},function(a){return c.blobs.neq(d[82],void 0)?d[83]=d[82]:d[83]=void 0,d[67]=d[83]}]):c.resolve(d[67]=void 0)},function(a){return c.blobs.neq(d[67],void 0)?c.sequence([function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[67]).then(function(a){return a=a,d[81]=a[0],a})},function(a){return d[68]=d[81]}]):c.resolve(d[68]=void 0)},function(a){return c.blobs.neq(d[65],void 0)?c.sequence([function(a){return d[81]=new c.Map(),c.nativeOperation(b("LSCreateDebugToken.nop"),d[65],"ocmf_client_state",d[28],c.i64.cast([0,1]),d[81]).then(function(a){return a=a,d[82]=a[0],a})},function(a){return c.blobs.neq(d[82],void 0)?d[83]=d[82]:d[83]=void 0,d[69]=d[83]}]):c.resolve(d[69]=void 0)},function(a){return c.blobs.neq(d[69],void 0)?c.sequence([function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[69]).then(function(a){return a=a,d[81]=a[0],a})},function(a){return d[70]=d[81]}]):c.resolve(d[70]=void 0)},function(a){return c.blobs.neq(d[65],void 0)?c.sequence([function(a){return d[81]=new c.Map(),c.nativeOperation(b("LSCreateDebugToken.nop"),d[65],"epoch_storage_private_key",d[66],c.i64.cast([0,1]),d[81]).then(function(a){return a=a,d[82]=a[0],a})},function(a){return c.blobs.neq(d[82],void 0)?d[83]=d[82]:d[83]=void 0,d[71]=d[83]}]):c.resolve(d[71]=void 0)},function(a){return c.blobs.neq(d[71],void 0)?c.sequence([function(a){return c.nativeOperation(b("LSBase64Encode.nop"),d[71]).then(function(a){return a=a,d[81]=a[0],a})},function(a){return d[72]=d[81]}]):c.resolve(d[72]=void 0)},function(e){return d[73]=a[0].get("backup_id"),c.nativeOperation(b("LSBase64Encode.nop"),d[29]).then(function(a){return a=a,d[74]=a[0],a})},function(e){return d[75]=a[0].get("server_data_id"),d[76]=d[43].get("epoch_id"),d[77]=new c.Map(),d[77].set("supported_encryption_versions",d[15]),d[77].set("client_version",c.i64.cast([0,1])),d[77].set("version_sig",d[24]==null?"":d[24]),d[78]=new c.Map(),d[78].set("backup_id",d[73]),d[78].set("device_epoch_hmac",d[53]==null?"":d[53]),d[78].set("epoch_root_key_fingerprint",d[55]),d[78].set("device_public_key",d[52]==null?"":d[52]),d[78].set("epoch_auth_pubkey",d[61]==null?"":d[61]),d[78].set("epoch_auth_pubkey_sig",d[63]==null?"":d[63]),d[78].set("epoch_storage_pubkey",d[57]==null?"":d[57]),d[78].set("epoch_storage_pubkey_sig",d[59]==null?"":d[59]),d[78].set("ocmf_rotation_token",d[74]==null?"":d[74]),d[78].set("server_data_id",d[75]),d[78].set("device_registration_id",a[1]),d[78].set("base_epoch_id",d[76]),d[78].set("encryption_version_data",d[77]),d[78].set("private_key_debug_token",d[68]),d[78].set("ocmf_client_state_debug_token",d[70]),d[78].set("epoch_storage_pvtkey_debug_token",d[72]),d[78].set("trace_id",void 0),d[78].set("occam_only_eligible",!0),d[79]=c.toJSON(d[78]),c.storedProcedure(b("LSIssueNewEbTaskAndGetTaskIDV2"),"encrypted_backups_setup",c.i64.cast([0,50017]),d[79],c.i64.cast([0,0]),c.i64.cast([0,93]),c.i64.cast([0,0]),void 0,c.i64.cast([0,0])).then(function(a){return a=a,d[80]=a[0],a})}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsFinishAddPeerDeviceStoredProcedure] $device_epoch_hmac found to be null"),d[51]=c.createArray(),void 0!==void 0?d[52]=(d[51].push(void 0),d[51]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsFinishAddPeerDeviceStoredProcedure","$device_epoch_hmac found to be null",d[51],c.i64.cast([0,3]))},function(a){return c.storedProcedure(b("LSDeleteBackupOnClient"),d[8],"backup_init_flow",!0,void 0,void 0,!1)},function(a){return c.forEach(c.db.table(169).fetch(),function(a){return a["delete"]()})}])}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsFinishAddPeerDeviceStoredProcedure] Error! There should be exactly one open epoch. Deleting local state and terminating device addition"),d[44]=c.createArray(),void 0!==void 0?d[45]=(d[44].push(void 0),d[44]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsFinishAddPeerDeviceStoredProcedure","Error! There should be exactly one open epoch. Deleting local state and terminating device addition",d[44],c.i64.cast([0,3]))},function(a){return c.storedProcedure(b("LSDeleteBackupOnClient"),d[8],"backup_init_flow",!0,void 0,void 0,!1)},function(a){return c.forEach(c.db.table(169).fetch(),function(a){return a["delete"]()})}])}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsFinishAddPeerDeviceStoredProcedure] Error! Error in generating the keys. Deleting local state and terminating device addition"),d[11]=c.createArray(),void 0!==void 0?d[12]=(d[11].push(void 0),d[11]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsFinishAddPeerDeviceStoredProcedure","Error! Error in generating the keys. Deleting local state and terminating device addition",d[11],c.i64.cast([0,3]))},function(a){return c.storedProcedure(b("LSDeleteBackupOnClient"),d[8],"backup_init_flow",!0,void 0,void 0,!1)},function(a){return c.forEach(c.db.table(169).fetch(),function(a){return a["delete"]()})}])}]):(e.item,d[8]="An authoritative row already exists, aborting execution of add peer device",d[8]!==void 0?(function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsFinishAddPeerDeviceStoredProcedure] ","",d[8]].join("")),d[9]=c.createArray(),void 0!==void 0?d[10]=(d[9].push(void 0),d[9]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsFinishAddPeerDeviceStoredProcedure",d[8],d[9],c.i64.cast([0,3]))):c.resolve())})},function(a){return d[2]=c.i64.of_float(Date.now()),d[3]=c.i64.random(),d[5]="Finishing execution. Execution time: ",d[6]=c.i64.to_string(c.i64.sub(d[2],d[0])),d[7]=" ms",d[4]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsFinishAddPeerDeviceStoredProcedure] ",d[4],d[5],d[4],d[6],d[4],d[7]].join("")),c.i64.eq(c.i64.mod_(d[3],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[8]=",",d[9]=c.createArray(),void 0!==void 0?d[10]=(d[9].push(void 0),d[9]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsFinishAddPeerDeviceStoredProcedure",[d[5],d[8],d[6],d[8],d[7]].join(""),d[9],c.i64.cast([0,4]))):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsFinishAddPeerDeviceStoredProcedure";a.__tables__=["secure_encrypted_backups_client_state","secure_encrypted_backups_epochs"];e.exports=a}),null);
__d("LSDeserializeSecretsAndAddDevice",["LSArrayGetObjectAt","LSBase64Decode.nop","LSDeserializeFromJsonIntoDictionaryV2.nop","LSFinishAddPeerDevice","LSQplInteractionHelper.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return c.nativeOperation(b("LSQplInteractionHelper.nop"),"MEB_DS_DESERIALIZE_SECRETS_NATIVE_OP_START",c.i64.cast([0,0]),void 0)},function(e){return c.nativeOperation(b("LSDeserializeFromJsonIntoDictionaryV2.nop"),a[0]).then(function(a){return a=a,d[0]=a[0],a})},function(a){return c.nativeOperation(b("LSQplInteractionHelper.nop"),"MEB_DS_DESERIALIZE_SECRETS_NATIVE_OP_END",c.i64.cast([0,0]),void 0)},function(a){return d[1]=d[0].get("temp_ocmf_client_state"),c.nativeOperation(b("LSBase64Decode.nop"),d[1]).then(function(a){return a=a,d[2]=a[0],a})},function(a){return d[3]=d[0].get("mailbox_root_key"),c.nativeOperation(b("LSBase64Decode.nop"),d[3]).then(function(a){return a=a,d[4]=a[0],a})},function(a){return d[5]=d[0].get("oblivious_validation_token"),c.nativeOperation(b("LSBase64Decode.nop"),d[5]).then(function(a){return a=a,d[6]=a[0],a})},function(a){return d[7]=c.createArray(),d[8]=d[0].get("add_peer_epoch_data_serializable"),d[9]=c.i64.of_int32(d[8].length),c.i64.gt(d[9],c.i64.cast([0,0]))?c.loopAsync(d[9],function(a){return d[14]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[8],d[14]).then(function(a){return a=a,d[15]=a[0],d[16]=a[1],a})},function(a){return d[17]=d[15].get("epoch_anon_id"),c.nativeOperation(b("LSBase64Decode.nop"),d[17]).then(function(a){return a=a,d[18]=a[0],a})},function(a){return d[19]=d[15].get("epoch_root_key"),c.nativeOperation(b("LSBase64Decode.nop"),d[19]).then(function(a){return a=a,d[20]=a[0],a})},function(a){return d[21]=d[15].get("epoch_id"),d[22]=d[15].get("epoch_status"),d[23]=new c.Map(),d[23].set("epoch_id",d[21]),d[23].set("epoch_anon_id",d[18]==null?c.blob(""):d[18]),d[23].set("epoch_root_key",d[20]==null?c.blob(""):d[20]),d[23].set("epoch_status",d[22]),d[24]=(d[7].push(d[23]),d[7])}])}):c.resolve()},function(e){return d[10]=d[0].get("backup_id"),d[11]=d[0].get("server_data_id"),d[12]=new c.Map(),d[12].set("backup_id",d[10]),d[12].set("server_data_id",d[11]),d[12].set("temp_ocmf_client_state",d[2]==null?c.blob(""):d[2]),d[12].set("mailbox_root_key",d[4]==null?c.blob(""):d[4]),d[12].set("oblivious_validation_token",d[6]==null?c.blob(""):d[6]),d[12].set("add_peer_epoch_data",d[7]),d[12]!==void 0?c.sequence([function(e){return c.storedProcedure(b("LSFinishAddPeerDevice"),d[12],a[1])},function(a){return d[13]=!0}]):c.resolve(d[13]=!1)},function(a){return e[0]=d[13]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsDeserializeSecretsAndAddDeviceStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSDeserializeSecretsAndAddDeviceStoredProcedure",["LSDeserializeSecretsAndAddDevice","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSDeserializeSecretsAndAddDevice"),e.serializedPayload,e.deviceRegistrationId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSFetchOTCEligibleEBDevicesV2",["LSIssueNewEbTaskAndGetTaskIDV2"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(a){return c.sequence([function(a){return c.forEach(c.db.table(261).fetch(),function(a){return a["delete"]()})},function(a){return d[0]="",c.forEach(c.filter(c.db.table(261).fetch([[[d[0]]]]),function(a){return a.deviceId===d[0]&&c.i64.lt(a.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(a){return c.db.table(261).add({deviceId:d[0],authorityLevel:c.i64.cast([0,20])})},function(a){return d[1]=new c.Map(),d[2]=c.toJSON(d[1]),c.storedProcedure(b("LSIssueNewEbTaskAndGetTaskIDV2"),"meb_fetch_otc_eligible_devices",c.i64.cast([0,50028]),d[2],c.i64.cast([0,0]),c.i64.cast([0,93]),c.i64.cast([0,0]),void 0,c.i64.cast([0,0])).then(function(a){return a=a,d[3]=a[0],a})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsFetchOTCEligibleEBDevicesV2StoredProcedure";a.__tables__=["encrypted_backups_otc_devices"];e.exports=a}),null);
__d("LSFetchOTCEligibleEBDevicesV2StoredProcedure",["LSFetchOTCEligibleEBDevicesV2","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a){a=a.storedProcedure(c("LSFetchOTCEligibleEBDevicesV2"));return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSGetActiveSession",["LSLogMebClientEvent.nop","LSQplInteractionHelper.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][getActiveSession] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.count(c.filter(c.db.table(258).fetch(),function(b){return c.i64.eq(b.messageType,c.i64.cast([0,0]))&&c.i64.eq(b.clientType,a[1])&&b.initiatorId===void 0||c.i64.eq(b.clientType,a[1])&&b.initiatorId===a[0]&&![c.i64.cast([0,1]),c.i64.cast([0,2]),c.i64.cast([0,3]),c.i64.cast([0,4]),c.i64.cast([0,21]),c.i64.cast([0,15]),c.i64.cast([0,23])].some(function(a){return c.i64.eq(b.messageType,a)})&&c.i64.neq(b.sessionId,c.i64.cast([-1,4294967295]))})).then(function(a){return d[2]=a})},function(e){return c.i64.le(d[2],c.i64.cast([0,1]))?c.sequence([function(e){return c.filter(c.db.table(258).fetch(),function(b){return c.i64.eq(b.messageType,c.i64.cast([0,0]))&&c.i64.eq(b.clientType,a[1])&&b.initiatorId===void 0||c.i64.eq(b.clientType,a[1])&&b.initiatorId===a[0]&&![c.i64.cast([0,1]),c.i64.cast([0,2]),c.i64.cast([0,3]),c.i64.cast([0,4]),c.i64.cast([0,21]),c.i64.cast([0,15]),c.i64.cast([0,23])].some(function(a){return c.i64.eq(b.messageType,a)})&&c.i64.neq(b.sessionId,c.i64.cast([-1,4294967295]))}).next().then(function(a,e){var f=a.done;a=a.value;return f?c.sequence([function(a){return c.nativeOperation(b("LSQplInteractionHelper.nop"),void 0,c.i64.cast([0,3]),c.i64.cast([0,17]))},function(a){return a=[c.i64.cast([-1,4294967295]),void 0,void 0],d[12]=a[0],d[13]=a[1],d[14]=a[2],a}]):(e=a.item,c.sequence([function(a){return d[19]=e.responderId,d[19]!==void 0?c.resolve((a=[c.i64.cast([0,0]),e.sessionId,d[19]],d[16]=a[0],d[17]=a[1],d[18]=a[2],a)):c.sequence([function(a){return c.nativeOperation(b("LSQplInteractionHelper.nop"),"PAKE_DS_SESSION_ONGOING_RESPONDER_ID_NULL_FAILURE",c.i64.cast([0,0]),void 0)},function(a){return c.nativeOperation(b("LSQplInteractionHelper.nop"),void 0,c.i64.cast([0,3]),c.i64.cast([0,8]))},function(a){return a=[c.i64.cast([-1,4294967294]),void 0,void 0],d[16]=a[0],d[17]=a[1],d[18]=a[2],a}])},function(a){return a=[d[16],d[17],d[18]],d[12]=a[0],d[13]=a[1],d[14]=a[2],a}]))})},function(a){return a=[d[12],d[13],d[14]],d[3]=a[0],d[4]=a[1],d[5]=a[2],a}]):c.sequence([function(a){return c.nativeOperation(b("LSQplInteractionHelper.nop"),void 0,c.i64.cast([0,3]),c.i64.cast([0,18]))},function(a){return a=[c.i64.cast([-1,4294967294]),void 0,void 0],d[3]=a[0],d[4]=a[1],d[5]=a[2],a}])},function(a){return d[6]=c.i64.of_float(Date.now()),d[7]=c.i64.random(),d[9]="Finishing execution. Execution time: ",d[10]=c.i64.to_string(c.i64.sub(d[6],d[0])),d[11]=" ms",d[8]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][getActiveSession] ",d[8],d[9],d[8],d[10],d[8],d[11]].join("")),c.i64.eq(c.i64.mod_(d[7],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[12]=",",d[13]=c.createArray(),void 0!==void 0?d[14]=(d[13].push(void 0),d[13]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"getActiveSession",[d[9],d[12],d[10],d[12],d[11]].join(""),d[13],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[3],d[4],d[5]],e[0]=a[0],e[1]=a[1],e[2]=a[2],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSPakeMessagesGetActiveSessionStoredProcedure";a.__tables__=["pake_messages"];e.exports=a}),null);
__d("LSGetActiveSessionStoredProcedure",["LSGetActiveSession","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSGetActiveSession"),e.initiatorId,e.clientType);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSSendOTCNotifications",["LSIssueNewEbTaskAndGetTaskIDV2"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return c.forEach(c.db.table(285).fetch(),function(a){return a["delete"]()})},function(a){return c.forEach(c.filter(c.db.table(285).fetch([[[c.i64.cast([0,1])]]]),function(a){return c.i64.eq(a.pk,c.i64.cast([0,1]))&&c.i64.lt(a.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(a){return c.db.table(285).add({pk:c.i64.cast([0,1]),notificationSendingStatus:c.i64.cast([0,2]),authorityLevel:c.i64.cast([0,20])})},function(e){return d[0]=new c.Map(),d[0].set("device_ids",a[0]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewEbTaskAndGetTaskIDV2"),"meb_send_otc_notifications",c.i64.cast([0,50032]),d[1],c.i64.cast([0,0]),c.i64.cast([0,93]),c.i64.cast([0,0]),void 0,c.i64.cast([0,0])).then(function(a){return a=a,d[2]=a[0],a})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsSendOTCNotificationsStoredProcedure";a.__tables__=["encrypted_backups_otc_notification_sending_status"];e.exports=a}),null);
__d("LSSendOTCNotificationsStoredProcedure",["LSSendOTCNotifications","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSSendOTCNotifications"),e.deviceIds);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSSendPakeMessage",["LSIssueNewEbTaskAndGetTaskIDV2","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][sendPakeMessage] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.filter(c.db.table(258).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.clientType,a[4])&&c.i64.eq(b.sessionId,a[0])}).next().then(function(e,f){var g=e.done;e=e.value;return g?c.islc(c.filter(c.db.table(258).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.clientType,a[4])&&c.i64.eq(b.sessionId,a[0])}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(b,d){d=b.done;b=b.value;return d?c.db.table(258).add({sessionId:a[0],messageType:c.i64.cast([0,7]),clientType:a[4]}):(b.item,c.forEach(c.db.table(258).fetch([[[a[0]]]]),function(a){var b=a.update;a.item;return b({messageType:c.i64.cast([0,7])})}))}):(f=e.item,d[17]=f.responderId,d[18]=f.initiatorId,d[15]=f.responderUserId,d[16]=f.initiatorUserId,a[1]===d[18]?(c.i64.eq(a[4],c.i64.cast([0,1]))?d[19]=d[15]:d[19]=void 0,d[9]=d[19]):(a[1]===d[17]?(c.i64.eq(a[4],c.i64.cast([0,1]))?d[20]=d[16]:d[20]=void 0,d[19]=d[20]):d[19]=void 0,d[9]=d[19]),c.i64.eq(a[4],c.i64.cast([0,1]))?d[10]=d[15]:d[10]=void 0,c.i64.eq(a[4],c.i64.cast([0,1]))?d[11]=d[16]:d[11]=void 0,d[12]=new c.Map(),d[12].set("session_id",a[0]),d[12].set("responder_id",d[17]),d[12].set("initiator_id",d[18]),d[12].set("message_payload",a[2]==null?f.messagePayload:a[2]),d[12].set("pake_secret",f.pakeSecret),d[12].set("sender_id",a[1]),d[12].set("message_type",a[3]),d[12].set("client_type",a[4]),d[12].set("message_recipient_id",d[9]),d[12].set("initiator_user_id",d[11]),d[12].set("responder_user_id",d[10]),d[13]=c.toJSON(d[12]),c.storedProcedure(b("LSIssueNewEbTaskAndGetTaskIDV2"),"PakeMessages",c.i64.cast([0,717]),d[13],c.i64.cast([0,0]),c.i64.cast([0,93]),c.i64.cast([0,0]),void 0,c.i64.cast([0,0])).then(function(a){return a=a,d[14]=a[0],a}))})},function(a){return d[3]=c.i64.of_float(Date.now()),d[4]=c.i64.random(),d[6]="Finishing execution. Execution time: ",d[7]=c.i64.to_string(c.i64.sub(d[3],d[0])),d[8]=" ms",d[5]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][sendPakeMessage] ",d[5],d[6],d[5],d[7],d[5],d[8]].join("")),c.i64.eq(c.i64.mod_(d[4],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[9]=",",d[10]=c.createArray(),void 0!==void 0?d[11]=(d[10].push(void 0),d[10]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"sendPakeMessage",[d[6],d[9],d[7],d[9],d[8]].join(""),d[10],c.i64.cast([0,4]))):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSPakeMessagesSendPakeMessageStoredProcedure";a.__tables__=["pake_messages"];e.exports=a}),null);
__d("LSSendPakeMessageOne",["LSBase64Encode.nop","LSIssueNewEbTaskAndGetTaskIDV2","LSLogMebClientEvent.nop","LSQplInteractionHelper.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][sendPakeMessageOne] Beginning execution."),d[1]=c.i64.of_float(Date.now()),c.nativeOperation(b("LSBase64Encode.nop"),a[2]).then(function(a){return a=a,d[2]=a[0],a})},function(e){return c.filter(c.db.table(258).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.clientType,a[3])&&c.i64.eq(b.sessionId,a[0])}).next().then(function(e,f){var g=e.done;e=e.value;return g?c.sequence([function(a){return c.nativeOperation(b("LSQplInteractionHelper.nop"),void 0,c.i64.cast([0,3]),c.i64.cast([0,7]))},function(b){return c.islc(c.filter(c.db.table(258).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.clientType,a[3])&&c.i64.eq(b.sessionId,a[0])}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(b,d){d=b.done;b=b.value;return d?c.db.table(258).add({sessionId:a[0],messageType:c.i64.cast([0,7]),clientType:a[3]}):(b.item,c.forEach(c.db.table(258).fetch([[[a[0]]]]),function(a){var b=a.update;a.item;return b({messageType:c.i64.cast([0,7])})}))})}]):(f=e.item,d[10]=f.responderId,d[10]!==void 0?(c.i64.eq(a[3],c.i64.cast([0,1]))?d[11]=f.responderUserId:d[11]=void 0,c.i64.eq(a[3],c.i64.cast([0,1]))?d[12]=f.initiatorUserId:d[12]=void 0,d[13]=new c.Map(),d[13].set("session_id",a[0]),d[13].set("responder_id",d[10]),d[13].set("initiator_id",a[1]),d[13].set("message_payload",d[2]==null?"":d[2]),d[13].set("message_payload_v2",void 0),d[13].set("pake_secret",void 0),d[13].set("sender_id",a[1]),d[13].set("message_type",c.i64.cast([0,1])),d[13].set("client_type",a[3]),d[13].set("message_recipient_id",d[11]),d[13].set("initiator_user_id",d[12]),d[13].set("responder_user_id",d[11]),d[14]=c.toJSON(d[13]),c.storedProcedure(b("LSIssueNewEbTaskAndGetTaskIDV2"),"PakeMessages",c.i64.cast([0,717]),d[14],c.i64.cast([0,0]),c.i64.cast([0,93]),c.i64.cast([0,0]),void 0,c.i64.cast([0,0])).then(function(a){return a=a,d[15]=a[0],a})):c.sequence([function(a){return c.nativeOperation(b("LSQplInteractionHelper.nop"),void 0,c.i64.cast([0,3]),c.i64.cast([0,8]))},function(b){return c.islc(c.filter(c.db.table(258).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.clientType,a[3])&&c.i64.eq(b.sessionId,a[0])}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(b,d){d=b.done;b=b.value;return d?c.db.table(258).add({sessionId:a[0],messageType:c.i64.cast([0,8]),clientType:a[3]}):(b.item,c.forEach(c.db.table(258).fetch([[[a[0]]]]),function(a){var b=a.update;a.item;return b({messageType:c.i64.cast([0,8])})}))})}]))})},function(a){return d[4]=c.i64.of_float(Date.now()),d[5]=c.i64.random(),d[7]="Finishing execution. Execution time: ",d[8]=c.i64.to_string(c.i64.sub(d[4],d[0])),d[9]=" ms",d[6]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][sendPakeMessageOne] ",d[6],d[7],d[6],d[8],d[6],d[9]].join("")),c.i64.eq(c.i64.mod_(d[5],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[10]=",",d[11]=c.createArray(),void 0!==void 0?d[12]=(d[11].push(void 0),d[11]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"sendPakeMessageOne",[d[7],d[10],d[8],d[10],d[9]].join(""),d[11],c.i64.cast([0,4]))):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSPakeMessagesSendPakeMessageOneStoredProcedure";a.__tables__=["pake_messages"];e.exports=a}),null);
__d("LSSendPakeMessageOneStoredProcedure",["LSSendPakeMessageOne","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSSendPakeMessageOne"),e.sessionId,e.initiatorId,e.messagePayload,e.clientType);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSSendPakeMessageStoredProcedure",["LSSendPakeMessage","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSSendPakeMessage"),e.sessionId,e.senderId,e.messagePayload,e.messageType,e.clientType);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MWEBLazyLoadResetPinPage",["JSResourceForInteraction","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h=c("JSResourceForInteraction")("MWEBPushResetPinPage").__setRef("MWEBLazyLoadResetPinPage");function a(a,b){c("promiseDone")(h.load().then(function(c){return c(a,b)}))}g["default"]=a}),98);
__d("MWEBOTCDialogStepDeferred.react",["deferredLoadComponent","react","react-compiler-runtime","requireDeferredForDisplay"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("deferredLoadComponent")(c("requireDeferredForDisplay")("MWEncryptedBackupsInsertOTCStep.react").__setRef("MWEBOTCDialogStepDeferred.react"));function a(a){var b=d("react-compiler-runtime").c(2),c;b[0]!==a?(c=i.jsx(j,babelHelpers["extends"]({},a)),b[0]=a,b[1]=c):c=b[1];return c}g["default"]=a}),98);
__d("MWEBPinCodeUpsellDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{queries:{}}},root:c("JSResourceForInteraction")("MWEBPinCodeUpsellDialog.react").__setRef("MWEBPinCodeUpsellDialog.entrypoint")};g["default"]=a}),98);
__d("MWEBRestoreOTCFirstDialogStepDeferred.react",["deferredLoadComponent","react","react-compiler-runtime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("deferredLoadComponent")(c("requireDeferred")("MWEBRestoreOTCFirstStep.react").__setRef("MWEBRestoreOTCFirstDialogStepDeferred.react"));function a(a){var b=d("react-compiler-runtime").c(2),c;b[0]!==a?(c=i.jsx(j,babelHelpers["extends"]({},a)),b[0]=a,b[1]=c):c=b[1];return c}g["default"]=a}),98);
__d("MWEncryptedBackupsViewAllOtcEligibleDialogStepDeferred.react",["deferredLoadComponent","react","react-compiler-runtime","requireDeferred","vulture"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("deferredLoadComponent")(c("requireDeferred")("MWEncryptedBackupsViewAllOtcEligibleDialogStep.react").__setRef("MWEncryptedBackupsViewAllOtcEligibleDialogStepDeferred.react"));function a(a){var b=d("react-compiler-runtime").c(2);c("vulture")("BdlrYpriQbPb2XIB0sXKMHJqe2g=");var e;b[0]!==a?(e=i.jsx(j,babelHelpers["extends"]({},a)),b[0]=a,b[1]=e):e=b[1];return e}g["default"]=a}),98);
__d("MWEncryptedBackupsOtcRestoreSteps",["MWEBOTCDialogStepDeferred.react","MWEncryptedBackupsViewAllOtcEligibleDialogStepDeferred.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function j(a){var b=a.onResendCodeFailure;a=a.pushPage;a(function(a){a=a.onReturn;return i.jsx(c("MWEncryptedBackupsViewAllOtcEligibleDialogStepDeferred.react"),{onResendCodeFailure:b,onReturn:a})})}function a(a){var b=a.onClose,d=a.onOtcComplete,e=a.onSkip,f=a.pushPage;f(function(){return i.jsx(c("MWEBOTCDialogStepDeferred.react"),{onClose:b,onComplete:d,onSkip:e,onViewAllDevices:function(a){a=a.onResendCodeFailure;return j({onResendCodeFailure:a,pushPage:f})},pushPage:f})})}g.pushViewOtcEligibleDevicesPage=j;g.pushByOneTimeCodePage=a}),98);
__d("usePushFDSMultiStepDialogEntryPointPage",["BaseMultiPageEntryPointImpl.react","CometRelay","FDSMultiStepDialogPushPageContext.react","react","react-compiler-runtime","useCometRelayEntrypointContextualEnvironmentProvider"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;var j=b.useContext,k=b.useTransition;function a(a,b){var e=d("react-compiler-runtime").c(8),f=k(),g=f[0],h=f[1],l=c("useCometRelayEntrypointContextualEnvironmentProvider")(),m=j(d("FDSMultiStepDialogPushPageContext.react").FDSMultiStepDialogPushPageContext);e[0]!==l||e[1]!==a||e[2]!==b||e[3]!==m?(f=function(e,f){if(b==null)return;h(function(){var g,h=d("CometRelay").loadEntryPoint(l,a,b);g=(g=f)!=null?g:{};var j=g.fallback;g=babelHelpers.objectWithoutPropertiesLoose(g,["fallback"]);m(function(){return i.jsx(c("BaseMultiPageEntryPointImpl.react"),{entryPoint:a,environmentProvider:l,fallback:j,loadedEntryPoint:h,otherProps:e,preloadParams:b,usePlaceholder:j!=null})},g)})},e[0]=l,e[1]=a,e[2]=b,e[3]=m,e[4]=f):f=e[4];f=f;var n;e[5]!==g||e[6]!==f?(n=[g,f],e[5]=g,e[6]=f,e[7]=n):n=e[7];return n}g["default"]=a}),98);
__d("MAWEncryptedBackupsRestoreStep.react",["MWChatEncryptedBackupsQPLSource.enum","MWEBLazyLoadResetPinPage","MWEBOTCDialogStepDeferred.react","MWEBPinCodeUpsellDialog.entrypoint","MWEBRestoreOTCFirstDialogStepDeferred.react","MWEBVestaUserInfoContext.react","MWEBVirtualDevicesContext.react","MWEncryptedBackupsOtcRestoreSteps","deferredLoadComponent","gkx","react","react-compiler-runtime","requireDeferred","requireDeferredForDisplay","usePushFDSMultiStepDialogEntryPointPage"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useCallback;var j=c("deferredLoadComponent")(c("requireDeferred")("MWChatEncryptedBackupsAccessCodeInputStep.react").__setRef("MAWEncryptedBackupsRestoreStep.react")),k=c("deferredLoadComponent")(c("requireDeferredForDisplay")("MWChatEncryptedBackupsPinCodeRestoreStep.react").__setRef("MAWEncryptedBackupsRestoreStep.react")),l=c("deferredLoadComponent")(c("requireDeferred")("MWChatEncryptedBackupsKVSOnlyRestoreStep.react").__setRef("MAWEncryptedBackupsRestoreStep.react"));function m(a){var b=d("react-compiler-runtime").c(24),e=a.offlineDevicesCount,f=a.onClose,g=a.onComplete,h=a.onForgotRC,k=a.onSkip,m=a.pushPage,n=a.shouldShowForgotButton;a=a.source;var o=d("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices();o=o.virtualDeviceInfo;if(o.doesUserHaveOtcEligibleDevices){o=a===c("MWChatEncryptedBackupsQPLSource.enum").INBOX_INTERSTITIAL_SOFTBLOCK;if(o){b[0]!==f||b[1]!==g||b[2]!==k||b[3]!==m?(a=i.jsx(c("MWEBRestoreOTCFirstDialogStepDeferred.react"),{onCloseDialog:f,onComplete:g,onSkip:k,pushPage:m}),b[0]=f,b[1]=g,b[2]=k,b[3]=m,b[4]=a):a=b[4];return a}b[5]!==m?(o=function(a){a=a.onResendCodeFailure;return d("MWEncryptedBackupsOtcRestoreSteps").pushViewOtcEligibleDevicesPage({onResendCodeFailure:a,pushPage:m})},b[5]=m,b[6]=o):o=b[6];b[7]!==f||b[8]!==g||b[9]!==k||b[10]!==m||b[11]!==o?(a=i.jsx(c("MWEBOTCDialogStepDeferred.react"),{onClose:f,onComplete:g,onSkip:k,onViewAllDevices:o,pushPage:m}),b[7]=f,b[8]=g,b[9]=k,b[10]=m,b[11]=o,b[12]=a):a=b[12];return a}if(e!==null&&e>=1){b[13]!==f||b[14]!==g||b[15]!==h||b[16]!==k||b[17]!==m||b[18]!==n?(o=i.jsx(j,{onClose:f,onComplete:g,onForgotRC:h,onSkip:k,pushPage:m,shouldShowForgotButton:n}),b[13]=f,b[14]=g,b[15]=h,b[16]=k,b[17]=m,b[18]=n,b[19]=o):o=b[19];return o}b[20]!==f||b[21]!==g||b[22]!==m?(a=i.jsx(l,{onClose:f,onComplete:g,pushPage:m}),b[20]=f,b[21]=g,b[22]=m,b[23]=a):a=b[23];return a}function a(a){var b=d("react-compiler-runtime").c(41),e=a.clientID,f=a.offlineDevicesCount,g=a.onClose,h=a.onComplete,j=a.onForgotRC,l=a.onSkip,n=a.pushPage,o=a.shouldShowForgotButton;a=a.source;var p=d("MWEBVestaUserInfoContext.react").useMWEBIsCooldownOrLockOutState(),q=d("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices();q=q.virtualDeviceInfo;q=q.doesUserHaveOtcEligibleDevices;var r;b[0]!==h||b[1]!==n?(r=function(){c("MWEBLazyLoadResetPinPage")(h,n)},b[0]=h,b[1]=n,b[2]=r):r=b[2];r=r;var s;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(s={},b[3]=s):s=b[3];s=c("usePushFDSMultiStepDialogEntryPointPage")(c("MWEBPinCodeUpsellDialog.entrypoint"),s);var t=s[1];b[4]!==h||b[5]!==l||b[6]!==t?(s=function(){t({onClose:l,onComplete:h},{withoutBackButton:!0})},b[4]=h,b[5]=l,b[6]=t,b[7]=s):s=b[7];s=s;if(e!=null&&p&&q){b[8]!==f||b[9]!==g||b[10]!==r||b[11]!==j||b[12]!==l||b[13]!==n||b[14]!==o||b[15]!==a?(p=i.jsx(m,{offlineDevicesCount:f,onClose:g,onComplete:r,onForgotRC:j,onSkip:l,pushPage:n,shouldShowForgotButton:o,source:a}),b[8]=f,b[9]=g,b[10]=r,b[11]=j,b[12]=l,b[13]=n,b[14]=o,b[15]=a,b[16]=p):p=b[16];return p}else if(e!=null){b[17]!==g||b[18]!==h||b[19]!==l||b[20]!==n||b[21]!==o?(q=i.jsx(k,{onClose:g,onComplete:h,onSkip:l,pushPage:n,shouldShowForgotButton:o}),b[17]=g,b[18]=h,b[19]=l,b[20]=n,b[21]=o,b[22]=q):q=b[22];return q}else if(c("gkx")("13248")){b[23]!==f||b[24]!==g||b[25]!==s||b[26]!==j||b[27]!==l||b[28]!==n||b[29]!==o||b[30]!==a?(r=i.jsx(m,{offlineDevicesCount:f,onClose:g,onComplete:s,onForgotRC:j,onSkip:l,pushPage:n,shouldShowForgotButton:o,source:a}),b[23]=f,b[24]=g,b[25]=s,b[26]=j,b[27]=l,b[28]=n,b[29]=o,b[30]=a,b[31]=r):r=b[31];return r}b[32]!==f||b[33]!==g||b[34]!==h||b[35]!==j||b[36]!==l||b[37]!==n||b[38]!==o||b[39]!==a?(p=i.jsx(m,{offlineDevicesCount:f,onClose:g,onComplete:h,onForgotRC:j,onSkip:l,pushPage:n,shouldShowForgotButton:o,source:a}),b[32]=f,b[33]=g,b[34]=h,b[35]=j,b[36]=l,b[37]=n,b[38]=o,b[39]=a,b[40]=p):p=b[40];return p}g["default"]=a}),98);
__d("MAWPinCodeGating",["gkx","justknobx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("3955")&&c("justknobx")._("1015")}g.isPinCodeEnabled=a}),98);
__d("MWChatEncryptedBackupsLayout.react",["FocusRegion.react","MWXColumn.react","MWXColumnItem.react","MWXRow.react","MWXRowItem.react","MWXText.react","react","xplatToDOMRef"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.actionsDirection;b=b===void 0?"row":b;var e=a.children,f=a.focusRegionId,g=a.icon,h=a.innerContentPaddingHorizontal;h=h===void 0?20:h;var j=a.innerContentPaddingVertical;j=j===void 0?20:j;var k=a.outerContentPaddingHorizontal;k=k===void 0?20:k;var l=a.outerContentPaddingVertical;l=l===void 0?20:l;var m=a.primaryAction,n=a.ref,o=a.secondaryAction,p=a.showTopMargin;p=p===void 0?!0:p;var q=a.showTopMarginSmall;q=q===void 0?!1:q;var r=a.tertiaryAction,s=a.title,t=a.useBigTitle;t=t===void 0?!1:t;var u=a.useCompressedIcon;u=u===void 0?!1:u;var v=a.useScrollBar;v=v===void 0?!1:v;var w=a.useStretchContent;w=w===void 0?!1:w;a=a.useTightTitle;a=a===void 0?!1:a;f=f==null?m:i.jsx(d("FocusRegion.react").FocusRegion,{id:f,children:m});t=g!=null||t?"headlineEmphasized2":"headlineEmphasized3";a=i.jsx("div",babelHelpers["extends"]({},{0:{},1:{className:"x5ib6vp xc73u3c"}}[!!a<<0],{children:i.jsx(c("MWXText.react"),{align:"center",type:t,children:s})}));return i.jsxs(c("MWXColumn.react"),{align:"center",paddingHorizontal:k,paddingVertical:l,ref:d("xplatToDOMRef").xplatToDOMRef(n),spacing:16,children:[g&&i.jsx(c("MWXColumnItem.react"),{children:i.jsx("div",babelHelpers["extends"]({},{0:{className:"x1sy10c2 x1y1aw1k xwib8y2"},1:{className:"x4arcmf x1c0yhlu x6mlq2k x15u6uln"}}[!!u<<0],{children:g}))}),s!=null&&i.jsx(c("MWXColumnItem.react"),{align:"center",children:g!=null?a:i.jsx("div",babelHelpers["extends"]({},{0:{className:"x1iorvi4 x1lr1uin"},2:{className:"x4i7bpe x1lr1uin"},1:{className:"x1xy6bms x1lr1uin"},3:{className:"x1xy6bms x1lr1uin"}}[!!p<<1|!!q<<0],{children:a}))}),i.jsx(c("MWXColumnItem.react"),{align:w?"stretch":"center",paddingHorizontal:h,paddingVertical:j,children:i.jsx("div",babelHelpers["extends"]({},{0:{className:"x8vdgqj x1gja9t x2b8uid"},2:{className:"x1mh8g0r x11i5rnm"},1:{className:"x8vdgqj x1gja9t x2b8uid x1jcbksy x1odjw0f"},3:{className:"x1mh8g0r x11i5rnm x1jcbksy x1odjw0f"}}[!!w<<1|!!v<<0],{children:e}))}),(m!=null||o!=null||r!=null)&&i.jsx(c("MWXColumnItem.react"),{align:"stretch",children:b==="row"?i.jsxs(c("MWXRow.react"),{expanding:!0,paddingHorizontal:0,paddingVertical:0,spacing:8,children:[r!=null&&i.jsx(c("MWXRowItem.react"),{expanding:!0,children:r}),o!=null&&i.jsx(c("MWXRowItem.react"),{expanding:!0,children:o}),i.jsx(c("MWXRowItem.react"),{expanding:!0,children:f})]}):i.jsxs(c("MWXColumn.react"),{paddingHorizontal:0,paddingVertical:0,spacing:8,children:[i.jsx(c("MWXColumnItem.react"),{children:f}),o!=null&&i.jsx(c("MWXColumnItem.react"),{children:o}),r!=null&&i.jsx(c("MWXColumnItem.react"),{align:"center",children:r})]})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWEBNoMobileEOTRInformationalDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{queries:{}}},root:c("JSResourceForInteraction")("MWEBNoMobileEOTRInformationalDialog.react").__setRef("MWEBNoMobileEOTRInformationalDialog.entrypoint")};g["default"]=a}),98);
__d("useWAInfraMobileDeviceList",["react","react-compiler-runtime","useWAInfraDeviceList"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useMemo;function a(){var a=d("react-compiler-runtime").c(2),b=c("useWAInfraDeviceList")(),e;a[0]!==b?(e=b.filter(i),a[0]=b,a[1]=e):e=a[1];b=e;a=b;return a}function i(a){return a.platform==="Messenger"&&!["Mac OS X","Windows"].includes(a.manufacturer)&&!["Chrome","Safari","Firefox","Edge","System Product Name"].includes(a.model)&&!(a.manufacturer==="Apple"&&((a=a.model)==null?void 0:a.includes("Mac")))}g["default"]=a}),98);
__d("MWChatEncryptedBackupsAccessCodeInputStep.react",["fbt","EBSMGatingUI","FDSProgressButtonIndeterminate.react","MWChatEncryptedBackupsAccessCodeInput.react","MWChatEncryptedBackupsLayout.react","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsSetIsDialogPersistedContext","MWEBNoMobileEOTRInformationalDialog.entrypoint","MWEBODSEntityKey.enum","MWEBODSEntityName.enum","MWEBVirtualDevicesContext.react","MWEncryptedBackupsLocalStorageEntryEnum","MWEncryptedBackupsOtcRestoreSteps","MWXButton.react","MWXText.react","QPLUserFlow","RelayHooks","promiseDone","qex","react","react-compiler-runtime","requireDeferred","useEncryptedBackupsQplImpressionRef","useLabyrinthLogging","useMAWEncryptedBackupsRestoreToast","useMWChatEncryptedBackupsAddDevice","useMWEBFlowSourceContext","usePushPage","useReStore","useWAInfraMobileDeviceList"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));b=j;b.useCallback;var l=b.useContext,m=b.useState,n=c("requireDeferred")("MWEBUseLocalStorage").__setRef("MWChatEncryptedBackupsAccessCodeInputStep.react"),o=c("requireDeferred")("MWEncryptedBackupsSharedState").__setRef("MWChatEncryptedBackupsAccessCodeInputStep.react"),p=h._(/*BTDS*/"Submit");function a(a){var b=d("react-compiler-runtime").c(53),e=a.onClose,f=a.onComplete,g=a.onForgotRC,j=a.onSkip,r=a.pushPage;a=a.shouldShowForgotButton;a=a===void 0?!0:a;var s=c("useWAInfraMobileDeviceList")();if(b[0]===Symbol["for"]("react.memo_cache_sentinel")){var t;t=(t=c("qex")._("3693"))!=null?t:!1;b[0]=t}else t=b[0];var u=t;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(t={},b[1]=t):t=b[1];t=c("usePushPage")(c("MWEBNoMobileEOTRInformationalDialog.entrypoint"),t);var v=t[0];t=t[1];if(b[2]!==t){t.onHighIntent;var w=babelHelpers.objectWithoutPropertiesLoose(t,["onHighIntent"]);w=w;b[2]=t;b[3]=w}else w=b[3];var x=(i||(i=c("useReStore")))();b[4]===Symbol["for"]("react.memo_cache_sentinel")?(t=h._(/*BTDS*/"Enter your 40-character code to get your chats on this device"),b[4]=t):t=b[4];t=t;var y=m(""),z=y[0],A=y[1];y=m(!1);var B=y[0],C=y[1];y=d("useLabyrinthLogging").useLabyrinthLoggingFlow();var D=y.startFlow,E=l(c("MWChatEncryptedBackupsSetIsDialogPersistedContext")).setIsDialogPersisted;b[5]!==E?(y=function(){d("MWChatEncryptedBackupsLogging").endFailure({errorName:"wrong_recovery_code",event:d("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,odsEntityKey:c("MWEBODSEntityKey.enum").INCORRECT_RECOVERY_CODE,odsEntityName:c("MWEBODSEntityName.enum").MW_EB_RC_RESTORE_AUTH}),c("QPLUserFlow").markError(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"invalid_recovery_code_input"),C(!0),E==null?void 0:E(!1)},b[5]=E,b[6]=y):y=b[6];y=y;var F=c("useMAWEncryptedBackupsRestoreToast")(),G=F.showErrorToast,H=c("useMWEBFlowSourceContext")();b[7]!==B?(F=function(a){B&&C(!1),A(a)},b[7]=B,b[8]=F):F=b[8];F=F;var I=d("RelayHooks").useRelayEnvironment(),J;b[9]!==x||b[10]!==f?(J=function(){var a;c("QPLUserFlow").addPoint((a=d("MWChatEncryptedBackupsQPLEvents")).restoreDeviceAuthQplEvent,"add_device_success");c("QPLUserFlow").addPoint(a.restoreQplEvent,"restore_auth_finished_and_dismissed");o.onReady(function(a){a=a.upsertEBSharedStateEntry;c("promiseDone")(a({db:x,stateKey:c("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_RESTORED_SUCCESSFULLY}))});n.onReady(q);d("MWChatEncryptedBackupsLogging").endSuccess({annotations:{bool:{is_backend_setup:d("EBSMGatingUI").isBackendSetupSuccessfulForEBSM()}},event:a.restoreQplEvent});d("MWChatEncryptedBackupsLogging").endSuccess({event:a.restoreDeviceAuthQplEvent,odsEntityName:c("MWEBODSEntityName.enum").MW_EB_RC_RESTORE_AUTH});f()},b[9]=x,b[10]=f,b[11]=J):J=b[11];J=J;var K;b[12]!==E||b[13]!==G?(K=function(a){d("MWChatEncryptedBackupsLogging").endFailure({errorName:a,event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent}),d("MWChatEncryptedBackupsLogging").endFailure({errorName:a,event:d("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,odsEntityName:c("MWEBODSEntityName.enum").MW_EB_RC_RESTORE_AUTH}),G(),E==null?void 0:E(!1)},b[12]=E,b[13]=G,b[14]=K):K=b[14];K=K;var L;b[15]!==y||b[16]!==J||b[17]!==K||b[18]!==I?(L={environment:I,onComplete:J,onFailure:K,onInvalidRecoveryCode:y},b[15]=y,b[16]=J,b[17]=K,b[18]=I,b[19]=L):L=b[19];y=c("useMWChatEncryptedBackupsAddDevice")(L);var M=y[0];J=y[1];K=c("useEncryptedBackupsQplImpressionRef")(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_ENTER_RECOVERY_CODE_SCREEN_IMPRESSION",void 0,function(){O!=null&&c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_OPTION_DISPLAYED_RESTORE_SCREEN")});b[20]!==s||b[21]!==e||b[22]!==f||b[23]!==g||b[24]!==w||b[25]!==v||b[26]!==a?(I=a?k.jsx(c("MWXButton.react"),babelHelpers["extends"]({},u&&s.length===0?w:null,{label:h._(/*BTDS*/"Don\u2019t have 40-character code?"),onPress:function(){u&&s.length===0?v({onClose:e,onComplete:f}):(c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_ENTER_RECOVERY_CODE_SCREEN_ACTION_DONT_HAVE_RC"),g())},testid:void 0,type:"secondary"})):null,b[20]=s,b[21]=e,b[22]=f,b[23]=g,b[24]=w,b[25]=v,b[26]=a,b[27]=I):I=b[27];L=I;b[28]!==e||b[29]!==f||b[30]!==j||b[31]!==r?(y=function(){d("MWEncryptedBackupsOtcRestoreSteps").pushByOneTimeCodePage({onClose:e,onOtcComplete:f,onSkip:j,pushPage:r})},b[28]=e,b[29]=f,b[30]=j,b[31]=r,b[32]=y):y=b[32];var N=y;w=d("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices();a=w.virtualDeviceInfo;var O=a.doesUserHaveOtcEligibleDevices?k.jsx(c("MWXButton.react"),{label:h._(/*BTDS*/"Use a one-time code instead"),onPress:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_USE_ONE_TIME_CODE_CLICK"),N()},reduceEmphasis:!1,testid:void 0,type:"secondary"}):null;I=O!=null?O:L;b[33]!==z||b[34]!==M||b[35]!==H||b[36]!==J||b[37]!==E||b[38]!==D?(y=J?k.jsx(c("FDSProgressButtonIndeterminate.react"),{label:p}):k.jsx(c("MWXButton.react"),{disabled:z.length<40,label:p,onPress:function(){var a;c("QPLUserFlow").addPoint((a=d("MWChatEncryptedBackupsQPLEvents")).restoreQplEvent,"RESTORE_ENTER_RECOVERY_CODE_SCREEN_ACTION_SUBMIT");var b=H();c("QPLUserFlow").addAnnotations(a.restoreQplEvent,{string:{restore_type:"recovery_code",source:b}});D({additionalAnnotations:{device_type:"OFFLINE"},event:a.restoreDeviceAuthQplEvent,odsEntityName:c("MWEBODSEntityName.enum").MW_EB_RC_RESTORE_AUTH,source:b});c("QPLUserFlow").addPoint(a.restoreDeviceAuthQplEvent,"add_device_begin");E==null?void 0:E(!0);M(z)},testid:void 0}),b[33]=z,b[34]=M,b[35]=H,b[36]=J,b[37]=E,b[38]=D,b[39]=y):y=b[39];w=J?null:I;b[40]===Symbol["for"]("react.memo_cache_sentinel")?(a=h._(/*BTDS*/"Restore your end-to-end encrypted chats"),L=k.jsx("div",babelHelpers["extends"]({className:"xwib8y2"},{children:k.jsx(c("MWXText.react"),{type:"meta3",children:t})})),b[40]=a,b[41]=L):(a=b[40],L=b[41]);b[42]!==z||b[43]!==F?(J=k.jsx(c("MWChatEncryptedBackupsAccessCodeInput.react"),{onValueChange:F,smallInput:!1,value:z}),b[42]=z,b[43]=F,b[44]=J):J=b[44];b[45]!==B?(I=B?k.jsx("div",babelHelpers["extends"]({className:"x5ib6vp xc73u3c xz9dl7a"},{children:k.jsx(c("MWXText.react"),{align:"center",color:"negative",testid:void 0,type:"meta3",children:h._(/*BTDS*/"Incorrect 40-character code. Try again.")})})):null,b[45]=B,b[46]=I):I=b[46];b[47]!==K||b[48]!==y||b[49]!==w||b[50]!==J||b[51]!==I?(t=k.jsxs(c("MWChatEncryptedBackupsLayout.react"),{actionsDirection:"column",primaryAction:y,ref:K,secondaryAction:w,showTopMargin:!1,title:a,children:[L,J,I]}),b[47]=K,b[48]=y,b[49]=w,b[50]=J,b[51]=I,b[52]=t):t=b[52];return t}function q(a){var b=a.mwEBCreateLocalStorageEntry;a=a.mwEBDeleteLocalStorageEntry;b(c("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_RESTORED_IN_CURRENT_SESSION);b(c("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_RESTORED_IN_CURRENT_SESSION_2);a(c("MWEncryptedBackupsLocalStorageEntryEnum").EBSM_CORRUPTION_WIPE)}g["default"]=a}),226);
__d("MWChatEncryptedBackupsAppFacebookconSmall.react",["ix","FDSAppFacebookCircleFilled20Icon","MWXIcon.react","cr:1376","react","react-compiler-runtime","vulture"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){var a=d("react-compiler-runtime").c(1);c("vulture")("5_bgF7DNVlMKJlLAZW-sP5bIB00=");if(a[0]===Symbol["for"]("react.memo_cache_sentinel")){var e=b("cr:1376")!=null?new(b("cr:1376"))(h("391025"),16,16):c("FDSAppFacebookCircleFilled20Icon");e=j.jsx(c("MWXIcon.react"),{icon:e,size:20});a[0]=e}else e=a[0];return e}g["default"]=a}),98);
__d("MWChatEncryptedBackupsAppMessengerIconSmall.react",["MWXIconAppMessenger","MWXIconStrict.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(){var a=d("react-compiler-runtime").c(1),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=i.jsx(c("MWXIconStrict.react"),{icon:c("MWXIconAppMessenger"),size:20}),a[0]=b):b=a[0];return b}g["default"]=a}),98);
__d("MWChatEncryptedBackupsRecoveryCodeIcon.react",["ix","CometImageFromIXValue.react","react","react-compiler-runtime","stylex","useCurrentDisplayMode"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react");function a(a){var b=d("react-compiler-runtime").c(8),e=a.alt,f=a.ref;a=a.xstyle;var g=c("useCurrentDisplayMode")();g=g==="dark";var j;b[0]!==g?(j=g?h("232768"):h("232770"),b[0]=g,b[1]=j):j=b[1];g=j;b[2]!==e||b[3]!==g?(j=k.jsx(c("CometImageFromIXValue.react"),{alt:e,ref:f,source:g}),b[2]=e,b[3]=g,b[4]=j):j=b[4];f=j;b[5]!==f||b[6]!==a?(e=a==null?f:k.jsx("div",babelHelpers["extends"]({},(i||(i=c("stylex"))).props(a),{children:f})),b[5]=f,b[6]=a,b[7]=e):e=b[7];return e}g["default"]=a}),98);
__d("MWChatEncryptedBackupsInterstitialIcon.react",["ix","CometImageFromIXValue.react","gkx","react","react-compiler-runtime","stylex","useCurrentDisplayMode"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react");function a(a){var b=d("react-compiler-runtime").c(8),e=a.alt,f=a.ref;a=a.xstyle;var g=c("useCurrentDisplayMode")();g=g==="dark";var j;b[0]!==g?(j=c("gkx")("23219")?g?h("230225"):h("230227"):h("835202"),b[0]=g,b[1]=j):j=b[1];g=j;b[2]!==e||b[3]!==g?(j=k.jsx(c("CometImageFromIXValue.react"),{alt:e,ref:f,source:g}),b[2]=e,b[3]=g,b[4]=j):j=b[4];f=j;b[5]!==f||b[6]!==a?(e=a==null?f:k.jsx("div",babelHelpers["extends"]({},(i||(i=c("stylex"))).props(a),{children:f})),b[5]=f,b[6]=a,b[7]=e):e=b[7];return e}g["default"]=a}),98);
__d("MWChatEncryptedBackupsRestoreEndOfRoadDialog.react",["fbt","MWChatEncryptedBackupsInterstitialIcon.react","MWChatEncryptedBackupsLayout.react","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWXButton.react","MWXIconCalendar","MWXIconDocument","MWXIconStrict.react","MWXLink.react","MWXListCell.react","MWXTextPairing.react","QPLUserFlow","react","react-compiler-runtime","useEncryptedBackupsQplImpressionRef"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k="https://www.facebook.com/help/messenger-app/431055522328649?ref=learn_more";function a(a){var b=d("react-compiler-runtime").c(16),e=a.onClose,f=a.onDontRestore;a=c("useEncryptedBackupsQplImpressionRef")(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_END_OF_ROAD_IMPRESSION");var g;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(g=j.jsx(c("MWChatEncryptedBackupsInterstitialIcon.react"),{}),b[0]=g):g=b[0];var i;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(i=h._(/*BTDS*/"Go to chats"),b[1]=i):i=b[1];b[2]!==e||b[3]!==f?(i=j.jsx(c("MWXButton.react"),{label:i,onPress:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_END_OF_THE_ROAD_ACTION_GO_TO_CHATS"),f==null?void 0:f(),d("MWChatEncryptedBackupsLogging").cancelFlow({cancelEndPoint:"END_OF_THE_ROAD_GO_TO_CHATS",event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent}),e()}}),b[2]=e,b[3]=f,b[4]=i):i=b[4];var m,n;b[5]===Symbol["for"]("react.memo_cache_sentinel")?(m=h._(/*BTDS*/"Other steps you can take to restore your messages"),n={className:"xfdjxqc"},b[5]=m,b[6]=n):(m=b[5],n=b[6]);var o;b[7]===Symbol["for"]("react.memo_cache_sentinel")?(o=j.jsx(c("MWXIconStrict.react"),{backgroundEnabled:!0,color:"primary",icon:c("MWXIconCalendar"),size:36}),b[7]=o):o=b[7];var p;b[8]===Symbol["for"]("react.memo_cache_sentinel")?(p=h._(/*BTDS*/"Skip restoring for now and try again later from Settings."),b[8]=p):p=b[8];b[9]===Symbol["for"]("react.memo_cache_sentinel")?(o=j.jsx(c("MWXListCell.react"),{addOnStart:o,content:j.jsx(c("MWXTextPairing.react"),{body:p,bodyColor:"secondary",headline:h._(/*BTDS*/"Restore messages later"),headlineColor:"primary",level:4})}),b[9]=o):o=b[9];b[10]===Symbol["for"]("react.memo_cache_sentinel")?(p=j.jsx(c("MWXIconStrict.react"),{backgroundEnabled:!0,color:"primary",icon:c("MWXIconDocument"),size:36}),b[10]=p):p=b[10];var q;b[11]===Symbol["for"]("react.memo_cache_sentinel")?(q=h._(/*BTDS*/"Find other ways to restore your messages in the {helpCenterLink}.",[h._param("helpCenterLink",j.jsx(c("MWXLink.react"),{display_DEPRECATED:"inline",href:k,onClick:l,rel:"noreferrer",target:"_blank",children:j.jsx("b",{children:h._(/*BTDS*/"Help Center")})}))]),b[11]=q):q=b[11];b[12]===Symbol["for"]("react.memo_cache_sentinel")?(n=j.jsxs("div",babelHelpers["extends"]({},n,{children:[o,j.jsx(c("MWXListCell.react"),{addOnEndVerticalAlign:"center",addOnStart:p,addOnStartVerticalAlign:"center",content:j.jsx(c("MWXTextPairing.react"),{body:q,bodyColor:"secondary",headline:h._(/*BTDS*/"See all restore options"),headlineColor:"primary",level:4})})]})),b[12]=n):n=b[12];b[13]!==a||b[14]!==i?(o=j.jsx(c("MWChatEncryptedBackupsLayout.react"),{icon:g,primaryAction:i,ref:a,title:m,children:n}),b[13]=a,b[14]=i,b[15]=o):o=b[15];return o}function l(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_END_OF_THE_ROAD_ACTION_OPEN_HELP_CENTER_LINK")}g["default"]=a}),226);
__d("MWChatEncryptedBackupsCreatePinInstruction.react",["fbt","MWChatEncryptedBackupsLayout.react","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsRecoveryCodeIcon.react","MWChatEncryptedBackupsRestoreEndOfRoadDialog.react","MWXButton.react","MWXLink.react","MWXListCell.react","MWXText.react","MWXTextPairing.react","QPLUserFlow","deferredLoadComponent","react","react-compiler-runtime","requireDeferred","useEncryptedBackupsQplImpressionRef","useMWEncryptedBackupsListenForChangesToVirtualDevicesV2"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;b.useCallback;var k=b.useState,l=c("deferredLoadComponent")(c("requireDeferred")("MWChatEncryptedBackupsPinCodeRestoreStep.react").__setRef("MWChatEncryptedBackupsCreatePinInstruction.react")),m="https://www.facebook.com/help/messenger-app/3357856081116516?ref=learn_more";function a(a){var b=d("react-compiler-runtime").c(31),e=a.onClose,f=a.onComplete,g=a.pushPage;a=k(!0);var i=a[0];a=a[1];var o=c("useMWEncryptedBackupsListenForChangesToVirtualDevicesV2")(),p=o.vestaClientID;i&&p!=null&&a(!1);b[0]!==e||b[1]!==g?(o=function(){return g(function(){return j.jsx(c("MWChatEncryptedBackupsRestoreEndOfRoadDialog.react"),{onClose:e})})},b[0]=e,b[1]=g,b[2]=o):o=b[2];var q=o;b[3]!==e||b[4]!==f||b[5]!==g||b[6]!==p?(a=function(){return g(function(){return p==null?null:j.jsx(l,{onClose:e,onComplete:f,onSkip:e,pushPage:g})})},b[3]=e,b[4]=f,b[5]=g,b[6]=p,b[7]=a):a=b[7];var r=a;o=c("useEncryptedBackupsQplImpressionRef")(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_KVS_TROUBLESHOOT_PIN_SCREEN_IMPRESSION");b[8]===Symbol["for"]("react.memo_cache_sentinel")?(a=j.jsx(c("MWChatEncryptedBackupsRecoveryCodeIcon.react"),{}),b[8]=a):a=b[8];var s;b[9]===Symbol["for"]("react.memo_cache_sentinel")?(s=h._(/*BTDS*/"Enter PIN"),b[9]=s):s=b[9];var t;b[10]!==r?(t=function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_KVS_TROUBLESHOOT_PIN_SCREEN_ENTER_PIN_CLICK"),r()},b[10]=r,b[11]=t):t=b[11];b[12]!==i||b[13]!==t?(s=j.jsx(c("MWXButton.react"),{disabled:i,label:s,onPress:t}),b[12]=i,b[13]=t,b[14]=s):s=b[14];b[15]===Symbol["for"]("react.memo_cache_sentinel")?(i=h._(/*BTDS*/"Can\u2019t create PIN?"),b[15]=i):i=b[15];b[16]!==q?(t=j.jsx(c("MWXButton.react"),{label:i,onPress:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_KVS_TROUBLESHOOT_PIN_SCREEN_CANT_CREATE_PIN_CLICK"),q()},type:"secondary"}),b[16]=q,b[17]=t):t=b[17];b[18]===Symbol["for"]("react.memo_cache_sentinel")?(i={className:"xewm4ob"},b[18]=i):i=b[18];var u;b[19]===Symbol["for"]("react.memo_cache_sentinel")?(i=j.jsx("div",babelHelpers["extends"]({},i,{children:j.jsx(c("MWXText.react"),{align:"center",type:"headlineEmphasized2",children:h._(/*BTDS*/"Create a PIN to restore your chats")})})),u={className:"x169t7cy x19f6ikt xm77wn2 xvue9z"},b[19]=i,b[20]=u):(i=b[19],u=b[20]);var v;b[21]===Symbol["for"]("react.memo_cache_sentinel")?(v=h._(/*BTDS*/"Step 1 \u00b7 Find your mobile device"),b[21]=v):v=b[21];var w;b[22]===Symbol["for"]("react.memo_cache_sentinel")?(w=h._(/*BTDS*/"It needs to have secure storage turned on."),b[22]=w):w=b[22];b[23]===Symbol["for"]("react.memo_cache_sentinel")?(v=j.jsx(c("MWXListCell.react"),{content:j.jsx(c("MWXTextPairing.react"),{headline:v,level:4,meta:j.jsxs(j.Fragment,{children:[w," ",j.jsx(c("MWXLink.react"),{href:m,onClick:n,rel:"noreferrer",target:"_blank",children:j.jsx("b",{children:h._(/*BTDS*/"Learn more")})})]})})}),w=j.jsx("br",{}),b[23]=v,b[24]=w):(v=b[23],w=b[24]);var x;b[25]===Symbol["for"]("react.memo_cache_sentinel")?(x=h._(/*BTDS*/"Step 2 \u00b7 Create a PIN on that device"),b[25]=x):x=b[25];b[26]===Symbol["for"]("react.memo_cache_sentinel")?(u=j.jsxs("div",babelHelpers["extends"]({},u,{children:[v,w,j.jsx(c("MWXListCell.react"),{content:j.jsx(c("MWXTextPairing.react"),{headline:x,level:4,meta:j.jsxs(c("MWXText.react"),{type:"meta4",children:[h._(/*BTDS*/"1. Go to Messenger Settings"),j.jsx("br",{}),h._(/*BTDS*/"2. Tap {=m1}",[h._implicitParam("=m1",j.jsx("b",{children:h._(/*BTDS*/"Privacy & safety")}))]),j.jsx("br",{}),h._(/*BTDS*/"3. Tap {=m1}",[h._implicitParam("=m1",j.jsx("b",{children:h._(/*BTDS*/"End-to-end encrypted chats")}))]),j.jsx("br",{}),h._(/*BTDS*/"4. Tap {=m1}",[h._implicitParam("=m1",j.jsx("b",{children:h._(/*BTDS*/"Message storage")}))]),j.jsx("br",{}),h._(/*BTDS*/"5. Tap {=m1}",[h._implicitParam("=m1",j.jsx("b",{children:h._(/*BTDS*/"Create PIN")}))])]})})})]})),b[26]=u):u=b[26];b[27]!==o||b[28]!==s||b[29]!==t?(v=j.jsxs(c("MWChatEncryptedBackupsLayout.react"),{actionsDirection:"column",icon:a,primaryAction:s,ref:o,secondaryAction:t,children:[i,u]}),b[27]=o,b[28]=s,b[29]=t,b[30]=v):v=b[30];return v}function n(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_KVS_TROUBLESHOOT_PIN_SCREEN_LEARN_MORE_LINK_CLICK")}g["default"]=a}),226);
__d("MWEBHasSeenAutoRestoreNoticeContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({hasSeenNotice:!1});g["default"]=b}),98);
__d("MWXMultiStepDialogHeader.react",["cr:73","cr:8246","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var c=d("react-compiler-runtime").c(16),e,f,g,h,j;c[0]!==a?(e=a.buttonType,f=a.iconCssSelectorId,h=a.withoutBackButton,j=a.withoutHeaderBottomBorder,g=babelHelpers.objectWithoutPropertiesLoose(a,["buttonType","iconCssSelectorId","withoutBackButton","withoutHeaderBottomBorder"]),c[0]=a,c[1]=e,c[2]=f,c[3]=g,c[4]=h,c[5]=j):(e=c[1],f=c[2],g=c[3],h=c[4],j=c[5]);if(b("cr:8246")){c[6]!==e||c[7]!==f||c[8]!==g||c[9]!==h||c[10]!==j?(a=i.jsx(b("cr:8246"),babelHelpers["extends"]({buttonType:e,iconCssSelectorId:f,withoutBackButton:h,withoutHeaderBottomBorder:j},g)),c[6]=e,c[7]=f,c[8]=g,c[9]=h,c[10]=j,c[11]=a):a=c[11];return a}if(b("cr:73")){f=!h;c[12]!==e||c[13]!==g||c[14]!==f?(j=i.jsx(b("cr:73"),babelHelpers["extends"]({backButtonType:e,closeButtonType:e,withBackButton:f},g)),c[12]=e,c[13]=g,c[14]=f,c[15]=j):j=c[15];return j}return null}g["default"]=a}),98);
__d("MWEncryptedBackupsForgotRCStep",["deferredLoadComponent","react","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("deferredLoadComponent")(c("requireDeferred")("MWChatEncryptedBackupsGenerateNewRecoveryCodeInstruction.react").__setRef("MWEncryptedBackupsForgotRCStep"));function a(a){var b=a.onClose,c=a.onComplete,d=a.pushPage;d(function(){return i.jsx(j,{onClose:b,onComplete:c,pushPage:d})})}g.pushForgotRCPage=a}),98);
__d("pushRCRestoreStep",["MWEncryptedBackupsForgotRCStep","deferredLoadComponent","react","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("deferredLoadComponent")(c("requireDeferred")("MWChatEncryptedBackupsAccessCodeInputStep.react").__setRef("pushRCRestoreStep"));function a(a){var b=a.onClose,c=a.onComplete,e=a.onForgotRC,f=a.pushPage,g=a.shouldShowForgotButton;a=function(){d("MWEncryptedBackupsForgotRCStep").pushForgotRCPage({onClose:b,onComplete:c,pushPage:f})};var h=(e=e)!=null?e:a;f(function(){return i.jsx(j,{onClose:b,onComplete:c,onForgotRC:h,onSkip:b,pushPage:f,shouldShowForgotButton:g})})}g["default"]=a}),98);
__d("MWChatEncryptedBackupsGenerateNewRecoveryCodeInstruction.react",["fbt","MWChatEncryptedBackupsLayout.react","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsRecoveryCodeIcon.react","MWChatEncryptedBackupsRestoreEndOfRoadDialog.react","MWEBHasSeenAutoRestoreNoticeContext","MWXButton.react","MWXLink.react","MWXListCell.react","MWXMultiStepDialogHeader.react","MWXTextPairing.react","QPLUserFlow","cr:6320","cr:6321","pushRCRestoreStep","react","useEncryptedBackupsQplImpressionRef"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useContext,l="https://www.facebook.com/help/messenger-app/3357856081116516?ref=learn_more";function a(a){var e=a.onClose,f=a.onCloseDialogWithConfirmation,g=a.onComplete,i=a.onDontRestore,m=a.pushPage,n=f!=null;a=k(c("MWEBHasSeenAutoRestoreNoticeContext"));var o=a.hasSeenNotice,p=b("cr:6320")==null?void 0:b("cr:6320")(),q=b("cr:6321")==null?void 0:b("cr:6321")(),r=function(){m(function(){return j.jsxs(j.Fragment,{children:[n?j.jsx(c("MWXMultiStepDialogHeader.react"),{onClose:f,title:null,withCloseButton:!0,withoutBackButton:!0}):null,j.jsx(c("MWChatEncryptedBackupsRestoreEndOfRoadDialog.react"),{onClose:g,onDontRestore:i})]})})};a=c("useEncryptedBackupsQplImpressionRef")(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_TROUBLESHOOT_RC_SCREEN_IMPRESSION");return j.jsx(c("MWChatEncryptedBackupsLayout.react"),{actionsDirection:"column",icon:j.jsx(c("MWChatEncryptedBackupsRecoveryCodeIcon.react"),{}),primaryAction:j.jsx(c("MWXButton.react"),{label:h._(/*BTDS*/"Enter new code"),onPress:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_TROUBLESHOOT_RC_SCREEN_ACTION_ENTER_CODE"),c("pushRCRestoreStep")({onClose:e,onComplete:function(){p!=null?p({onNextStep:g,pushPage:m}):q!=null?q({hasSeenNotice:o,onNextStep:g,pushPage:m}):e()},pushPage:m,shouldShowForgotButton:!1})},testid:void 0}),ref:a,secondaryAction:j.jsx(c("MWXButton.react"),{label:h._(/*BTDS*/"Can\u2019t generate code?"),onPress:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_TROUBLESHOOT_RC_SCREEN_ACTION_CANT_GENERATE_CODE"),r()},type:"secondary"}),title:h._(/*BTDS*/"Generate a new code to restore your chats"),children:j.jsxs("div",babelHelpers["extends"]({className:"xvue9z"},{children:[j.jsx(c("MWXListCell.react"),{content:j.jsx(c("MWXTextPairing.react"),{body:j.jsxs(j.Fragment,{children:[h._(/*BTDS*/"It needs to have secure storage turned on. It\u2019s likely to be the device you used to create your original 40-character code.")," ",j.jsx(c("MWXLink.react"),{display_DEPRECATED:"inline",href:l,onClick:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_TROUBLESHOOT_SCREEN_ACTION_OPEN_LEARN_MORE_LINK")},rel:"noreferrer",target:"_blank",children:j.jsx("b",{children:h._(/*BTDS*/"Learn more")})})]}),bodyColor:"secondary",headline:h._(/*BTDS*/"Step 1 \u00b7 Find your other device"),level:4})}),j.jsx(c("MWXListCell.react"),{content:j.jsx(c("MWXTextPairing.react"),{body:j.jsxs(j.Fragment,{children:[h._(/*BTDS*/"1. Go to Messenger Settings"),j.jsx("br",{}),h._(/*BTDS*/"2. Tap {=m1}",[h._implicitParam("=m1",j.jsx("b",{children:h._(/*BTDS*/"Privacy & safety")}))]),j.jsx("br",{}),h._(/*BTDS*/"3. Tap {=m1}",[h._implicitParam("=m1",j.jsx("b",{children:h._(/*BTDS*/"End-to-end encrypted chats")}))]),j.jsx("br",{}),h._(/*BTDS*/"4. Tap {=m1}",[h._implicitParam("=m1",j.jsx("b",{children:h._(/*BTDS*/"Message storage")}))]),j.jsx("br",{}),h._(/*BTDS*/"5. Tap {=m1}",[h._implicitParam("=m1",j.jsx("b",{children:h._(/*BTDS*/"Generate recovery code")}))])]}),bodyColor:"secondary",headline:h._(/*BTDS*/"Step 2 \u00b7 Generate a new code on that device"),level:4})})]}))})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWChatEncryptedBackupsCreateRecoveryCodeInstruction.react",["fbt","MWChatEncryptedBackupsGenerateNewRecoveryCodeInstruction.react","MWChatEncryptedBackupsLayout.react","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsRecoveryCodeIcon.react","MWChatEncryptedBackupsRestoreEndOfRoadDialog.react","MWEBHasSeenAutoRestoreNoticeContext","MWXButton.react","MWXLink.react","MWXListCell.react","MWXText.react","MWXTextPairing.react","QPLUserFlow","cr:6320","cr:6321","pushRCRestoreStep","react","useEncryptedBackupsQplImpressionRef","useMWEncryptedBackupsListenForChangesToVirtualDevicesV2"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));e=i;var k=e.useCallback,l=e.useContext,m=e.useState,n="https://www.facebook.com/help/messenger-app/3357856081116516?ref=learn_more";function a(a){var e=a.onClose,f=a.onComplete,g=a.pushPage;a=m(!0);var i=a[0];a=a[1];var o=c("useMWEncryptedBackupsListenForChangesToVirtualDevicesV2")();o=o.offlineDevicesCount;var p=b("cr:6320")==null?void 0:b("cr:6320")(),q=b("cr:6321")==null?void 0:b("cr:6321")(),r=l(c("MWEBHasSeenAutoRestoreNoticeContext")),s=r.hasSeenNotice;i&&o>0&&a(!1);var t=k(function(){return g(function(){return j.jsx(c("MWChatEncryptedBackupsRestoreEndOfRoadDialog.react"),{onClose:e})})},[e,g]),u=k(function(){return g(function(){return j.jsx(c("MWChatEncryptedBackupsGenerateNewRecoveryCodeInstruction.react"),{onClose:e,onComplete:f,pushPage:g})})},[e,f,g]);r=c("useEncryptedBackupsQplImpressionRef")(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_KVS_TROUBLESHOOT_RC_SCREEN_IMPRESSION");return j.jsxs(c("MWChatEncryptedBackupsLayout.react"),{actionsDirection:"column",icon:j.jsx(c("MWChatEncryptedBackupsRecoveryCodeIcon.react"),{}),primaryAction:j.jsx(c("MWXButton.react"),{disabled:i,label:h._(/*BTDS*/"Enter 40-character code"),onPress:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_KVS_TROUBLESHOOT_RC_SCREEN_ENTER_CODE_CLICK"),c("pushRCRestoreStep")({onClose:e,onComplete:function(){p!=null?p({onNextStep:e,pushPage:g}):q!=null?q({hasSeenNotice:s,onNextStep:e,pushPage:g}):e()},onForgotRC:u,pushPage:g,shouldShowForgotButton:!1})}}),ref:r,secondaryAction:j.jsx(c("MWXButton.react"),{label:h._(/*BTDS*/"Can\u2019t generate code?"),onPress:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_KVS_TROUBLESHOOT_RC_SCREEN_CANT_GENERATE_CODE_CLICK"),t()},type:"secondary"}),children:[j.jsx("div",babelHelpers["extends"]({className:"xewm4ob"},{children:j.jsx(c("MWXText.react"),{align:"center",type:"headlineEmphasized2",children:h._(/*BTDS*/"Generate a 40-character code to restore your chats")})})),j.jsxs("div",babelHelpers["extends"]({className:"x169t7cy x19f6ikt xm77wn2 xvue9z"},{children:[j.jsx(c("MWXListCell.react"),{content:j.jsx(c("MWXTextPairing.react"),{headline:h._(/*BTDS*/"Step 1 \u00b7 Find your mobile device"),level:4,meta:j.jsxs(j.Fragment,{children:[h._(/*BTDS*/"It needs to have secure storage turned on.")," ",j.jsx(c("MWXLink.react"),{display_DEPRECATED:"inline",href:n,onClick:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_KVS_TROUBLESHOOT_RC_SCREEN_LEARN_MORE_LINK_CLICK")},rel:"noreferrer",target:"_blank",children:j.jsx("b",{children:h._(/*BTDS*/"Learn more")})})]})})}),j.jsx("br",{}),j.jsx(c("MWXListCell.react"),{content:j.jsx(c("MWXTextPairing.react"),{headline:h._(/*BTDS*/"Step 2 \u00b7 Generate a 40-character code on that device"),level:4,meta:j.jsxs(c("MWXText.react"),{type:"meta4",children:[h._(/*BTDS*/"1. Go to Messenger Settings"),j.jsx("br",{}),h._(/*BTDS*/"2. Tap {=m1}",[h._implicitParam("=m1",j.jsx("b",{children:h._(/*BTDS*/"Privacy & safety")}))]),j.jsx("br",{}),h._(/*BTDS*/"3. Tap {=m1}",[h._implicitParam("=m1",j.jsx("b",{children:h._(/*BTDS*/"End-to-end encrypted chats")}))]),j.jsx("br",{}),h._(/*BTDS*/"4. Tap {=m1}",[h._implicitParam("=m1",j.jsx("b",{children:h._(/*BTDS*/"Message storage")}))]),j.jsx("br",{}),h._(/*BTDS*/"5. Tap {=m1}",[h._implicitParam("=m1",j.jsx("b",{children:h._(/*BTDS*/"Generate recovery code")}))])]})})})]}))]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWChatEncryptedBackupsDots3HorizontalIconSmall.react",["ix","FDSDots3HorizontalFilled20Icon","MWXIcon.react","cr:1376","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){var a=d("react-compiler-runtime").c(1);if(a[0]===Symbol["for"]("react.memo_cache_sentinel")){var e=b("cr:1376")!=null?new(b("cr:1376"))(h("275834"),24,24):c("FDSDots3HorizontalFilled20Icon");e=j.jsx(c("MWXIcon.react"),{color:"primary",icon:e});a[0]=e}else e=a[0];return e}g["default"]=a}),98);
__d("useMWEBRestoreOnComplete",["MWEBHasSeenAutoRestoreNoticeContext","cr:6320","cr:6321","react"],(function(a,b,c,d,e,f,g){"use strict";var h;e=h||d("react");var i=e.useCallback,j=e.useContext;function a(a){var d=j(c("MWEBHasSeenAutoRestoreNoticeContext")),e=d.hasSeenNotice,f=b("cr:6320")==null?void 0:b("cr:6320")(),g=b("cr:6321")==null?void 0:b("cr:6321")();return i(function(b,c){return f!=null?f({onNextStep:c,pushPage:b}):g!=null?g({hasSeenNotice:e,onNextStep:c,pushPage:b}):a()},[f,g,e,a])}g["default"]=a}),98);
__d("useMWChatEncryptedBackupsRestore",["MAWEncryptedBackupsRestoreStep.react","MWChatEncryptedBackupsQPLEvents","MWEncryptedBackupsForgotRCStep","react","react-compiler-runtime","useMWEBRestoreOnComplete"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(8),e=a.clientID,f=a.offlineDevicesCount,g=a.onClose,h=a.onComplete,k=a.shouldShowForgotButton,l=a.startFlow,m=c("useMWEBRestoreOnComplete")(g);b[0]!==e||b[1]!==f||b[2]!==g||b[3]!==h||b[4]!==m||b[5]!==k||b[6]!==l?(a=function(a){return function(){l(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent),a(function(){var b;return i.jsx(c("MAWEncryptedBackupsRestoreStep.react"),{clientID:e,offlineDevicesCount:f,onClose:g,onComplete:function(){m(a,h)},onForgotRC:function(){d("MWEncryptedBackupsForgotRCStep").pushForgotRCPage({onClose:g,onComplete:h,pushPage:a})},onSkip:g,pushPage:a,shouldShowForgotButton:(b=k)!=null?b:!0})},{onBack:j})}},b[0]=e,b[1]=f,b[2]=g,b[3]=h,b[4]=m,b[5]=k,b[6]=l,b[7]=a):a=b[7];return a}function j(a){return function(){a()}}g.useMWChatEncryptedBackupsRestore=a}),98);
__d("MWChatEncryptedBackupsForgotPinInformationalResetPin.react",["fbt","MAWPinCodeGating","MWChatEncryptedBackupsLayout.react","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsRecoveryCodeIcon.react","MWChatEncryptedBackupsRestoreEndOfRoadDialog.react","MWEBVirtualDevicesContext.react","MWXButton.react","MWXLink.react","MWXListCell.react","MWXMultiStepDialogHeader.react","MWXText.react","MWXTextPairing.react","QPLUserFlow","react","react-compiler-runtime","useEncryptedBackupsQplImpressionRef","useMWChatEncryptedBackupsRestore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k="https://www.facebook.com/help/messenger-app/479091330683112?ref=learn_more";function a(a){var b=d("react-compiler-runtime").c(34),e=a.onClose,f=a.onCloseDialogWithConfirmation,g=a.onComplete,i=a.onDontRestore,n=a.pushPage;a=d("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices();a=a.virtualDeviceInfo;var o;b[0]!==a?(o=d("MAWPinCodeGating").isPinCodeEnabled()?a.vestaClientID:null,b[0]=a,b[1]=o):o=b[1];b[2]!==e||b[3]!==g||b[4]!==o?(a={clientID:o,offlineDevicesCount:-1,onClose:e,onComplete:g,shouldShowForgotButton:!1,startFlow:m},b[2]=e,b[3]=g,b[4]=o,b[5]=a):a=b[5];g=d("useMWChatEncryptedBackupsRestore").useMWChatEncryptedBackupsRestore(a);o=c("useEncryptedBackupsQplImpressionRef")(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_TROUBLESHOOT_PIN_SCREEN_IMPRESSION");b[6]!==g||b[7]!==n?(a=g(n),b[6]=g,b[7]=n,b[8]=a):a=b[8];var p=a,q=f!=null;b[9]!==q||b[10]!==e||b[11]!==f||b[12]!==i||b[13]!==n?(g=function(){n(function(){return j.jsxs(j.Fragment,{children:[q?j.jsx(c("MWXMultiStepDialogHeader.react"),{onClose:f,title:null,withCloseButton:!0,withoutBackButton:!0}):null,j.jsx(c("MWChatEncryptedBackupsRestoreEndOfRoadDialog.react"),{onClose:e,onDontRestore:i})]})})},b[9]=q,b[10]=e,b[11]=f,b[12]=i,b[13]=n,b[14]=g):g=b[14];var r=g;b[15]===Symbol["for"]("react.memo_cache_sentinel")?(a=j.jsx(c("MWChatEncryptedBackupsRecoveryCodeIcon.react"),{}),b[15]=a):a=b[15];var s;b[16]===Symbol["for"]("react.memo_cache_sentinel")?(g=h._(/*BTDS*/"Enter new PIN"),s=h._(/*BTDS*/"Enter new PIN"),b[16]=g,b[17]=s):(g=b[16],s=b[17]);b[18]!==p?(g=j.jsx(c("MWXButton.react"),{"aria-label":g,label:s,onPress:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_TROUBLESHOOT_PIN_SCREEN_ACTION_ENTER_PIN"),p()},testid:void 0}),b[18]=p,b[19]=g):g=b[19];b[20]===Symbol["for"]("react.memo_cache_sentinel")?(s=h._(/*BTDS*/"Can\u2019t reset PIN?"),b[20]=s):s=b[20];b[21]!==r?(s=j.jsx(c("MWXButton.react"),{label:s,onPress:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_TROUBLESHOOT_PIN_SCREEN_ACTION_CANT_RESET_PIN"),r()},type:"secondary"}),b[21]=r,b[22]=s):s=b[22];var t,u;b[23]===Symbol["for"]("react.memo_cache_sentinel")?(t=h._(/*BTDS*/"Reset your PIN to restore your chats"),u={className:"xvue9z"},b[23]=t,b[24]=u):(t=b[23],u=b[24]);var v;b[25]===Symbol["for"]("react.memo_cache_sentinel")?(v=h._(/*BTDS*/"It needs to have secure storage turned on. It\u2019s likely to be the device you used to create your original PIN."),b[25]=v):v=b[25];b[26]===Symbol["for"]("react.memo_cache_sentinel")?(v=j.jsxs(j.Fragment,{children:[v," ",j.jsx(c("MWXText.react"),{color:"blueLink",type:"bodyLink4",children:j.jsx(c("MWXLink.react"),{href:k,onClick:l,rel:"noreferrer",target:"_blank",children:j.jsx("b",{children:h._(/*BTDS*/"Learn more")})})})]}),b[26]=v):v=b[26];b[27]===Symbol["for"]("react.memo_cache_sentinel")?(v=j.jsx(c("MWXListCell.react"),{content:j.jsx(c("MWXTextPairing.react"),{body:v,bodyColor:"secondary",headline:h._(/*BTDS*/"Step 1 \u00b7 Find your other device"),level:4})}),b[27]=v):v=b[27];var w;b[28]===Symbol["for"]("react.memo_cache_sentinel")?(w=j.jsxs(j.Fragment,{children:[h._(/*BTDS*/"1. Go to Messenger Settings"),j.jsx("br",{}),h._(/*BTDS*/"2. Tap {=m1}",[h._implicitParam("=m1",j.jsx("b",{children:h._(/*BTDS*/"Privacy & safety")}))]),j.jsx("br",{}),h._(/*BTDS*/"3. Tap {=m1}",[h._implicitParam("=m1",j.jsx("b",{children:h._(/*BTDS*/"End-to-end encrypted chats")}))]),j.jsx("br",{}),h._(/*BTDS*/"4. Tap {=m1}",[h._implicitParam("=m1",j.jsx("b",{children:h._(/*BTDS*/"Message storage")}))]),j.jsx("br",{}),h._(/*BTDS*/"5. Tap {=m1}",[h._implicitParam("=m1",j.jsx("b",{children:h._(/*BTDS*/"Reset PIN")}))])]}),b[28]=w):w=b[28];b[29]===Symbol["for"]("react.memo_cache_sentinel")?(u=j.jsxs("div",babelHelpers["extends"]({},u,{children:[v,j.jsx(c("MWXListCell.react"),{content:j.jsx(c("MWXTextPairing.react"),{body:w,bodyColor:"secondary",headline:h._(/*BTDS*/"Step 2 \u00b7 Reset your PIN on that device"),level:4})})]})),b[29]=u):u=b[29];b[30]!==o||b[31]!==s||b[32]!==g?(v=j.jsx(c("MWChatEncryptedBackupsLayout.react"),{actionsDirection:"column",icon:a,primaryAction:g,ref:o,secondaryAction:s,title:t,children:u}),b[30]=o,b[31]=s,b[32]=g,b[33]=v):v=b[33];return v}function l(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_TROUBLESHOOT_SCREEN_ACTION_OPEN_LEARN_MORE_LINK")}function m(){}g["default"]=a}),226);
__d("MWXIconMobileRotate",["MWXSvgIcon","SVGIcon","cr:12500","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12500")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWChatEncryptedBackupsMobileRotateIconSmall.react",["MWXIconMobileRotate","MWXIconStrict.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(){var a=d("react-compiler-runtime").c(1),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=i.jsx(c("MWXIconStrict.react"),{icon:c("MWXIconMobileRotate"),size:20}),a[0]=b):b=a[0];return b}g["default"]=a}),98);
__d("MWChatEncryptedBackupsTextIconSmall.react",["ix","FDSTextFilled20Icon","MWXIcon.react","cr:1376","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){var a=d("react-compiler-runtime").c(1);if(a[0]===Symbol["for"]("react.memo_cache_sentinel")){var e=b("cr:1376")!=null?new(b("cr:1376"))(h("275886"),24,24):c("FDSTextFilled20Icon");e=j.jsx(c("MWXIcon.react"),{color:"primary",icon:e});a[0]=e}else e=a[0];return e}g["default"]=a}),98);
__d("MWChatEncryptedBackupsForgotPinStep.react",["fbt","MWChatEncryptedBackupsAddonIcon.react","MWChatEncryptedBackupsChevronRightIconMedium.react","MWChatEncryptedBackupsForgotPinInformationalResetPin.react","MWChatEncryptedBackupsLayout.react","MWChatEncryptedBackupsMobileRotateIconSmall.react","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsTextIconSmall.react","MWEBHasSeenAutoRestoreNoticeContext","MWXListCellPressable.react","MWXText.react","MWXTextPairing.react","QPLUserFlow","cr:6320","cr:6321","pushRCRestoreStep","react","useEncryptedBackupsQplImpressionRef"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useContext;function a(a){var e=a.isRCDeviceEnabled,f=a.onClose,g=a.onComplete,i=a.pushPage,l=function(){i(function(){return j.jsx(c("MWChatEncryptedBackupsForgotPinInformationalResetPin.react"),{onClose:f,onComplete:g,pushPage:i})})};a=c("useEncryptedBackupsQplImpressionRef")(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_OPTIONS_SCREEN_IMPRESSION");var m=k(c("MWEBHasSeenAutoRestoreNoticeContext")),n=m.hasSeenNotice,o=b("cr:6320")==null?void 0:b("cr:6320")(),p=b("cr:6321")==null?void 0:b("cr:6321")();return j.jsxs(c("MWChatEncryptedBackupsLayout.react"),{actionsDirection:"column",ref:a,showTopMargin:!1,title:h._(/*BTDS*/"More ways to restore"),children:[j.jsx(c("MWXText.react"),{type:"meta3",children:h._(/*BTDS*/"Here are some others options to get your end-to-end encrypted chats.")}),j.jsxs("div",babelHelpers["extends"]({className:"x9a3u73 x1p5oq8j xfdjxqc"},{children:[j.jsx(c("MWXListCellPressable.react"),{addOnEnd:j.jsx(c("MWChatEncryptedBackupsChevronRightIconMedium.react"),{}),addOnEndVerticalAlign:"center",addOnStart:j.jsx(c("MWChatEncryptedBackupsAddonIcon.react"),{icon:j.jsx(c("MWChatEncryptedBackupsMobileRotateIconSmall.react"),{})}),addOnStartVerticalAlign:"center","aria-label":h._(/*BTDS*/"Reset your PIN from your other device."),content:j.jsx(c("MWXTextPairing.react"),{body:h._(/*BTDS*/"Reset your PIN from your other device."),bodyColor:"secondary",headline:h._(/*BTDS*/"Reset your PIN"),level:4}),onPress:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_OPTIONS_SCREEN_ACTION_RESET_PIN"),l()},testid:void 0}),e?j.jsx(c("MWXListCellPressable.react"),{addOnEnd:j.jsx(c("MWChatEncryptedBackupsChevronRightIconMedium.react"),{}),addOnEndVerticalAlign:"center",addOnStart:j.jsx(c("MWChatEncryptedBackupsAddonIcon.react"),{icon:j.jsx(c("MWChatEncryptedBackupsTextIconSmall.react"),{})}),addOnStartVerticalAlign:"center",content:j.jsx(c("MWXText.react"),{align:"start",type:"headlineEmphasized4",children:h._(/*BTDS*/"Enter 40-character code")}),onPress:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_OPTIONS_SCREEN_ACTION_ENTER_RECOVERY_CODE"),c("pushRCRestoreStep")({onClose:f,onComplete:function(){o!=null?o({onNextStep:g,pushPage:i}):p!=null?p({hasSeenNotice:n,onNextStep:g,pushPage:i}):f()},pushPage:i,shouldShowForgotButton:!0})},testid:void 0}):null]}))]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWEBChatDoubleInterstitialAlphaIcon.react",["ix","CometImageFromIXValue.react","react","react-compiler-runtime","stylex","useCurrentDisplayMode"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react");function a(a){var b=d("react-compiler-runtime").c(8),e=a.alt,f=a.ref;a=a.xstyle;var g=c("useCurrentDisplayMode")();g=g==="dark";var j;b[0]!==g?(j=g?h("869030"):h("869032"),b[0]=g,b[1]=j):j=b[1];g=j;b[2]!==e||b[3]!==g?(j=k.jsx(c("CometImageFromIXValue.react"),{alt:e,ref:f,source:g}),b[2]=e,b[3]=g,b[4]=j):j=b[4];f=j;b[5]!==f||b[6]!==a?(e=a==null?f:k.jsx("div",babelHelpers["extends"]({},(i||(i=c("stylex"))).props(a),{children:f})),b[5]=f,b[6]=a,b[7]=e):e=b[7];return e}g["default"]=a}),98);
__d("MWChatEncryptedBackupsKVSOnlyRestoreStep.react",["fbt","MWChatEncryptedBackupsAddonIcon.react","MWChatEncryptedBackupsChevronRightIconMedium.react","MWChatEncryptedBackupsCreatePinInstruction.react","MWChatEncryptedBackupsCreateRecoveryCodeInstruction.react","MWChatEncryptedBackupsDots3HorizontalIconSmall.react","MWChatEncryptedBackupsInterstitialIcon.react","MWChatEncryptedBackupsLayout.react","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsTextIconSmall.react","MWEBChatDoubleInterstitialAlphaIcon.react","MWEBNoMobileEOTRInformationalDialog.entrypoint","MWXButton.react","MWXListCellPressable.react","MWXText.react","MWXTextPairing.react","QPLUserFlow","qex","react","react-compiler-runtime","useEncryptedBackupsQplImpressionRef","usePushPage","useWAInfraMobileDeviceList"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));i.useCallback;function a(a){var b=d("react-compiler-runtime").c(37),e=a.onClose,f=a.onComplete,g=a.pushPage;a=c("useWAInfraMobileDeviceList")();var i;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(i={},b[0]=i):i=b[0];i=c("usePushPage")(c("MWEBNoMobileEOTRInformationalDialog.entrypoint"),i);var k=i[0];i=i[1];if(b[1]!==i){i.onHighIntent;var l=babelHelpers.objectWithoutPropertiesLoose(i,["onHighIntent"]);l=l;b[1]=i;b[2]=l}else l=b[2];if(b[3]===Symbol["for"]("react.memo_cache_sentinel")){i=(i=c("qex")._("3693"))!=null?i:!1;b[3]=i}else i=b[3];i=i;i=i&&a.length===0;b[4]!==e||b[5]!==f||b[6]!==g?(a=function(){return g(function(){return j.jsx(c("MWChatEncryptedBackupsCreatePinInstruction.react"),{onClose:e,onComplete:f,pushPage:g})})},b[4]=e,b[5]=f,b[6]=g,b[7]=a):a=b[7];var m=a;b[8]!==e||b[9]!==f||b[10]!==g?(a=function(){return g(function(){return j.jsx(c("MWChatEncryptedBackupsCreateRecoveryCodeInstruction.react"),{onClose:e,onComplete:f,pushPage:g})})},b[8]=e,b[9]=f,b[10]=g,b[11]=a):a=b[11];var n=a;a=c("useEncryptedBackupsQplImpressionRef")(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_KVS_OPTIONS_IMPRESSION");var o;b[12]!==i?(o=i?j.jsx(c("MWEBChatDoubleInterstitialAlphaIcon.react"),{}):j.jsx(c("MWChatEncryptedBackupsInterstitialIcon.react"),{}),b[12]=i,b[13]=o):o=b[13];var p;b[14]!==e||b[15]!==f||b[16]!==l||b[17]!==k||b[18]!==i?(p=i?j.jsx(c("MWXButton.react"),babelHelpers["extends"]({},i?l:null,{label:h._(/*BTDS*/"See options"),onPress:function(){k({onClose:e,onComplete:f})},type:"primary"})):void 0,b[14]=e,b[15]=f,b[16]=l,b[17]=k,b[18]=i,b[19]=p):p=b[19];b[20]!==i?(l=i?h._(/*BTDS*/"Chat history can\u2019t be restored on this device"):h._(/*BTDS*/"Restore your end-to-end encrypted chats with your mobile device"),b[20]=i,b[21]=l):l=b[21];var q;b[22]!==i?(q=i?h._(/*BTDS*/"Some messages may be missing from your chats."):h._(/*BTDS*/"Try one of these methods to get your chats on this device."),b[22]=i,b[23]=q):q=b[23];var r;b[24]!==q?(r=j.jsx(c("MWXText.react"),{color:"secondary",type:"body4",children:q}),b[24]=q,b[25]=r):r=b[25];b[26]!==m||b[27]!==n||b[28]!==i?(q=i?null:j.jsxs("div",babelHelpers["extends"]({className:"x1miatn0 x2b8uid xk68kj7"},{children:[j.jsx(c("MWXListCellPressable.react"),{addOnEnd:j.jsx(c("MWChatEncryptedBackupsChevronRightIconMedium.react"),{}),addOnEndVerticalAlign:"center",addOnStart:j.jsx(c("MWChatEncryptedBackupsAddonIcon.react"),{icon:j.jsx(c("MWChatEncryptedBackupsDots3HorizontalIconSmall.react"),{})}),addOnStartVerticalAlign:"center",content:j.jsx(c("MWXTextPairing.react"),{headline:h._(/*BTDS*/"Learn how to create a PIN"),level:4}),onPress:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_KVS_PIN_CODE_CLICK"),m()}}),j.jsx(c("MWXListCellPressable.react"),{addOnEnd:j.jsx(c("MWChatEncryptedBackupsChevronRightIconMedium.react"),{}),addOnEndVerticalAlign:"center",addOnStart:j.jsx(c("MWChatEncryptedBackupsAddonIcon.react"),{icon:j.jsx(c("MWChatEncryptedBackupsTextIconSmall.react"),{})}),addOnStartVerticalAlign:"center",content:j.jsx(c("MWXTextPairing.react"),{headline:h._(/*BTDS*/"Learn how to generate a 40-character code"),level:4}),onPress:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RESTORE_KVS_RECOVERY_CODE_CLICK"),n()}})]})),b[26]=m,b[27]=n,b[28]=i,b[29]=q):q=b[29];b[30]!==a||b[31]!==r||b[32]!==q||b[33]!==o||b[34]!==p||b[35]!==l?(i=j.jsxs(c("MWChatEncryptedBackupsLayout.react"),{actionsDirection:"row",icon:o,innerContentPaddingVertical:0,primaryAction:p,ref:a,title:l,children:[r,q]}),b[30]=a,b[31]=r,b[32]=q,b[33]=o,b[34]=p,b[35]=l,b[36]=i):i=b[36];return i}g["default"]=a}),226);
__d("MWDeserializeSecretsAndAddDevice",["LSDeserializeSecretsAndAddDeviceStoredProcedure","LSFactory"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.initiatorId,d=a.secrets;a=a.storage;return a.runInTransaction(function(a){return c("LSDeserializeSecretsAndAddDeviceStoredProcedure")(c("LSFactory")(a),{deviceRegistrationId:b,serializedPayload:d})},"readwrite",void 0,void 0,f.id+":31")}g["default"]=a}),98);
__d("MWEBAutoRestoreNoticeDialogStep.react",["fbt","CometRelay","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsSettingsDialog.entrypoint","MWXButton.react","MWXColumn.react","MWXColumnItem.react","MWXDialogHeader.react","MWXDialogPage.react","MWXLink.react","MWXRow.react","MWXRowItem.react","MWXText.react","gkx","react","react-compiler-runtime","useCometRelayEntrypointContextualEnvironmentProvider","useEncryptedBackupsQplImpressionRef"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));i.useCallback;var k=c("gkx")("23219");function a(a){var b=d("react-compiler-runtime").c(24),e=a.onComplete,f=a.pushPage;a=c("useEncryptedBackupsQplImpressionRef")(d("MWChatEncryptedBackupsQPLEvents").restoreWithAutoRestoreConsentQplEvent,"AUTO_RESTORE_NOTICE_SCREEN_IMPRESSION");var g=c("useCometRelayEntrypointContextualEnvironmentProvider")(),i;b[0]!==g||b[1]!==e||b[2]!==f?(i=function(){var a=d("CometRelay").loadEntryPoint(g,c("MWChatEncryptedBackupsSettingsDialog.entrypoint"),{});f(function(){return j.jsx(d("CometRelay").EntryPointContainer,{entryPointReference:a,props:{onClose:e,pushPageFromParent:f}})},{withoutBackButton:!0})},b[0]=g,b[1]=e,b[2]=f,b[3]=i):i=b[3];i=i;var l;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(l=h._(/*BTDS*/"Changes to secure storage settings"),b[4]=l):l=b[4];b[5]!==e?(l=j.jsx(c("MWXDialogHeader.react"),{onClose:e,title:l,withBackButton:!1,withCloseButton:!0}),b[5]=e,b[6]=l):l=b[6];if(b[7]!==i){var m;b[9]===Symbol["for"]("react.memo_cache_sentinel")?(m=h._(/*BTDS*/"Settings"),b[9]=m):m=b[9];m=h._(/*BTDS*/"After you restore chat history, messages will continue to sync automatically even if you log out and log back in. You can turn this off in {[Armadillo] Inline settings link parameter.}.",[h._param("[Armadillo] Inline settings link parameter.",j.jsx(c("MWXLink.react"),{color_DEPRECATED:"blueLink",display_DEPRECATED:"inline",onClick:i,weight_DEPRECATED:"semibold",children:m}))]);b[7]=i;b[8]=m}else m=b[8];b[10]!==m?(i=j.jsx(c("MWXColumnItem.react"),{paddingHorizontal:k?8:0,children:j.jsx(c("MWXText.react"),{align:"start",type:"body3",children:m})}),b[10]=m,b[11]=i):i=b[11];b[12]===Symbol["for"]("react.memo_cache_sentinel")?(m=h._(/*BTDS*/"OK"),b[12]=m):m=b[12];b[13]!==e?(m=j.jsx(c("MWXColumnItem.react"),{paddingTop:16,children:j.jsx(c("MWXRow.react"),{align:"end",paddingHorizontal:0,paddingTop:16,children:j.jsx(c("MWXRowItem.react"),{expanding:k,children:j.jsx(c("MWXButton.react"),{label:m,onPress:e,padding:"wide",testid:void 0})})})}),b[13]=e,b[14]=m):m=b[14];var n;b[15]!==i||b[16]!==m?(n=j.jsxs(c("MWXColumn.react"),{paddingVertical:k?8:0,children:[i,m]}),b[15]=i,b[16]=m,b[17]=n):n=b[17];b[18]!==a||b[19]!==n?(i=j.jsx("div",{ref:a,children:n}),b[18]=a,b[19]=n,b[20]=i):i=b[20];b[21]!==l||b[22]!==i?(m=j.jsx(c("MWXDialogPage.react"),{footer:null,header:l,children:i}),b[21]=l,b[22]=i,b[23]=m):m=b[23];return m}g["default"]=a}),226);
__d("MWXIconCommentLeftRight",["MWXSvgIcon","SVGIcon","cr:12380","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12380")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXIconMobileFilled",["MWXSvgIcon","SVGIcon","cr:12499","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12499")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXIconQuestionCircle",["MWXSvgIcon","SVGIcon","cr:12547","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12547")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWEBRestoreMoreOptionsStep.react",["fbt","FBLogger","MWChatEncryptedBackupsAddonIcon.react","MWChatEncryptedBackupsQPLEvents","MWEBVirtualDevicesContext.react","MWEncryptedBackupsOtcRestoreSteps","MWXColumn.react","MWXColumnItem.react","MWXDialogPage.react","MWXDivider.react","MWXIconChevronRight","MWXIconCommentLeftRight","MWXIconMobileFilled","MWXIconQuestionCircle","MWXIconStrict.react","MWXIconText","MWXListCellPressable.react","MWXMultiStepDialogHeader.react","MWXText.react","MWXTextPairing.react","QPLUserFlow","gkx","pushRCRestoreStep","react","react-compiler-runtime","useVisibilityObserver"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k="https://www.facebook.com/help/messenger-app/1084673321594605",l=c("gkx")("23433");function a(a){var b=d("react-compiler-runtime").c(32),e=a.onClose,f=a.onComplete,g=a.onOptOut,i=a.pushPage;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a={onVisible:n},b[0]=a):a=b[0];a=c("useVisibilityObserver")(a);var o=d("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices();o=o.virtualDeviceInfo;!o.doesUserHaveOtcEligibleDevices&&o.offlineDevicesCount===0&&(c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_FIRST_RESTORE_MORE_OPTIONS_STEP_NO_RESTORE_OPTIONS"),c("FBLogger")("labyrinth_web").warn("[labyrinth][web] User has no restore option when entering more options dialog"));var p,q;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(p=j.jsx(c("MWXMultiStepDialogHeader.react"),{title:h._(/*BTDS*/"More options"),withCloseButton:!1,withoutBackButton:!0,withoutHeaderBottomBorder:!1}),q={0:{className:"x1wsgfga x1rdy4ex"},1:{className:"x1y1aw1k"}}[!!l<<0],b[1]=p,b[2]=q):(p=b[1],q=b[2]);var r;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(r=j.jsx(c("MWXColumnItem.react"),{align:"start",children:j.jsx(c("MWXText.react"),{color:"secondary",type:"body3",children:h._(/*BTDS*/"Choose a way to restore chat history. You can also continue without chat history.")})}),b[3]=r):r=b[3];var s;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(s={className:"xp7jhwk x1n0m28w x2b8uid"},b[4]=s):s=b[4];var t;b[5]!==e||b[6]!==f||b[7]!==i||b[8]!==o.doesUserHaveOtcEligibleDevices?(t=o.doesUserHaveOtcEligibleDevices&&j.jsx(c("MWXColumnItem.react"),{children:j.jsx(c("MWXListCellPressable.react"),{addOnEnd:j.jsx(c("MWXIconStrict.react"),{color:"secondary",icon:c("MWXIconChevronRight"),size:20}),addOnEndVerticalAlign:"center",addOnStart:j.jsx(c("MWChatEncryptedBackupsAddonIcon.react"),{icon:j.jsx(c("MWXIconStrict.react"),{backgroundEnabled:!0,icon:c("MWXIconMobileFilled"),size:36})}),addOnStartVerticalAlign:"center",content:j.jsx(c("MWXTextPairing.react"),{body:h._(/*BTDS*/"Get a code sent to a mobile device where you\u2019ve recently used Messenger."),bodyColor:"secondary",headline:h._(/*BTDS*/"Send a one-time code"),headlineColor:"primary",level:4}),onPress:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_FIRST_RESTORE_MORE_OPTIONS_USE_OTC_CLICK"),d("MWEncryptedBackupsOtcRestoreSteps").pushByOneTimeCodePage({onClose:e,onOtcComplete:f,onSkip:e,pushPage:i})},size:"large",testid:void 0})}),b[5]=e,b[6]=f,b[7]=i,b[8]=o.doesUserHaveOtcEligibleDevices,b[9]=t):t=b[9];var u;b[10]!==e||b[11]!==f||b[12]!==i||b[13]!==o.offlineDevicesCount?(u=o.offlineDevicesCount>0?j.jsx(c("MWXColumnItem.react"),{children:j.jsx(c("MWXListCellPressable.react"),{addOnEnd:j.jsx(c("MWXIconStrict.react"),{color:"secondary",icon:c("MWXIconChevronRight"),size:20}),addOnEndVerticalAlign:"center",addOnStart:j.jsx(c("MWChatEncryptedBackupsAddonIcon.react"),{icon:j.jsx(c("MWXIconStrict.react"),{backgroundEnabled:!0,icon:c("MWXIconText"),size:36})}),addOnStartVerticalAlign:"center",content:j.jsx(c("MWXTextPairing.react"),{body:h._(/*BTDS*/"Use the 40-character code you generated during setup to see chat history on this device."),bodyColor:"secondary",headline:h._(/*BTDS*/"Enter 40-character code"),headlineColor:"primary",level:4}),onPress:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_FIRST_RESTORE_MORE_OPTIONS_USE_RC_CLICK"),c("pushRCRestoreStep")({onClose:e,onComplete:f,pushPage:i})},size:"large",testid:void 0})}):null,b[10]=e,b[11]=f,b[12]=i,b[13]=o.offlineDevicesCount,b[14]=u):u=b[14];b[15]===Symbol["for"]("react.memo_cache_sentinel")?(o=j.jsx(c("MWXIconStrict.react"),{color:"secondary",icon:c("MWXIconChevronRight"),size:20}),b[15]=o):o=b[15];var v;b[16]===Symbol["for"]("react.memo_cache_sentinel")?(v=j.jsx(c("MWChatEncryptedBackupsAddonIcon.react"),{icon:j.jsx(c("MWXIconStrict.react"),{backgroundEnabled:!0,icon:c("MWXIconCommentLeftRight"),size:36})}),b[16]=v):v=b[16];var w;b[17]===Symbol["for"]("react.memo_cache_sentinel")?(w=h._(/*BTDS*/"Messages will be missing on this device."),b[17]=w):w=b[17];b[18]===Symbol["for"]("react.memo_cache_sentinel")?(w=j.jsx(c("MWXTextPairing.react"),{body:w,bodyColor:"secondary",headline:h._(/*BTDS*/"Continue without chat history"),headlineColor:"primary",level:4}),b[18]=w):w=b[18];b[19]!==g?(o=j.jsx(c("MWXColumnItem.react"),{children:j.jsx(c("MWXListCellPressable.react"),{addOnEnd:o,addOnEndVerticalAlign:"center",addOnStart:v,addOnStartVerticalAlign:"center",content:w,onPress:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_FIRST_RESTORE_MORE_OPTIONS_DO_NOT_RESTORE_CLICK"),g()},size:"large",testid:void 0})}),b[19]=g,b[20]=o):o=b[20];b[21]===Symbol["for"]("react.memo_cache_sentinel")?(v=j.jsx(c("MWXColumnItem.react"),{paddingHorizontal:8,children:j.jsx(c("MWXDivider.react"),{})}),b[21]=v):v=b[21];b[22]===Symbol["for"]("react.memo_cache_sentinel")?(w=j.jsx(c("MWXIconStrict.react"),{color:"secondary",icon:c("MWXIconChevronRight"),size:20}),b[22]=w):w=b[22];var x;b[23]===Symbol["for"]("react.memo_cache_sentinel")?(x=j.jsx(c("MWChatEncryptedBackupsAddonIcon.react"),{icon:j.jsx(c("MWXIconStrict.react"),{backgroundEnabled:!0,icon:c("MWXIconQuestionCircle"),size:36})}),b[23]=x):x=b[23];b[24]===Symbol["for"]("react.memo_cache_sentinel")?(w=j.jsx(c("MWXColumnItem.react"),{children:j.jsx(c("MWXListCellPressable.react"),{addOnEnd:w,addOnEndVerticalAlign:"center",addOnStart:x,addOnStartVerticalAlign:"center",content:j.jsx(c("MWXTextPairing.react"),{bodyColor:"secondary",headline:h._(/*BTDS*/"Need help?"),headlineColor:"primary",level:4}),linkProps:{target:"_blank",url:k},onPress:m,size:"large",testid:void 0})}),b[24]=w):w=b[24];b[25]!==o||b[26]!==t||b[27]!==u?(x=j.jsx(c("MWXColumnItem.react"),{align:"start",expanding:!0,children:j.jsx("div",babelHelpers["extends"]({},s,{children:j.jsxs(c("MWXColumn.react"),{expanding:!0,spacing:8,children:[t,u,o,v,w]})}))}),b[25]=o,b[26]=t,b[27]=u,b[28]=x):x=b[28];b[29]!==a||b[30]!==x?(s=j.jsx(c("MWXDialogPage.react"),{footer:null,header:p,children:j.jsx("div",babelHelpers["extends"]({},q,{children:j.jsxs(c("MWXColumn.react"),{align:"center",paddingHorizontal:0,paddingTop:0,ref:a,spacing:8,children:[r,x]})}))}),b[29]=a,b[30]=x,b[31]=s):s=b[31];return s}function m(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_FIRST_RESTORE_MORE_OPTIONS_NEED_HELP_CLICK")}function n(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_FIRST_RESTORE_MORE_OPTIONS_STEP_IMPRESSION")}g["default"]=a}),226);
__d("pushEBRestoreMoreOptionsStep",["deferredLoadComponent","react","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("deferredLoadComponent")(c("requireDeferred")("MWEBRestoreMoreOptionsStep.react").__setRef("pushEBRestoreMoreOptionsStep"));function a(a){var b=a.onClose,c=a.onComplete,d=a.pushPage;d(function(){return i.jsx(j,{onClose:b,onComplete:c,onOptOut:b,pushPage:d})})}g["default"]=a}),98);
__d("MWEBRestoreOTCFirstStep.react",["fbt","MWChatEncryptedBackupsQPLEvents","MWEBSyncIcon.react","MWXColumn.react","MWXColumnItem.react","MWXDialogFooter.react","MWXDialogPage.react","MWXText.react","QPLUserFlow","pushEBRestoreMoreOptionsStep","qex","react","react-compiler-runtime","requireDeferredForDisplay","useVisibilityObserver"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=c("requireDeferredForDisplay")("MWEncryptedBackupsOtcRestoreSteps").__setRef("MWEBRestoreOTCFirstStep.react");function a(a){var b=d("react-compiler-runtime").c(23),e=a.onCloseDialog,f=a.onComplete,g=a.onSkip,i=a.pushPage;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a={onVisible:l},b[0]=a):a=b[0];a=c("useVisibilityObserver")(a);var m;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(m=h._(/*BTDS*/"Send code"),b[1]=m):m=b[1];b[2]!==e||b[3]!==f||b[4]!==g||b[5]!==i?(m={label:m,onPress:function(){k.onReadyImmediately(function(a){a=a.pushByOneTimeCodePage;c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_FIRST_RESTORE_SEND_CODE_CLICK");a({onClose:e,onOtcComplete:f,onSkip:g,pushPage:i})})}},b[2]=e,b[3]=f,b[4]=g,b[5]=i,b[6]=m):m=b[6];var n;b[7]!==e||b[8]!==f||b[9]!==i?(n=c("qex")._("3474")?void 0:{label:h._(/*BTDS*/"More Options"),onPress:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_FIRST_RESTORE_MORE_OPTIONS_CLICK"),c("pushEBRestoreMoreOptionsStep")({onClose:e,onComplete:f,pushPage:i})}},b[7]=e,b[8]=f,b[9]=i,b[10]=n):n=b[10];var o;b[11]!==m||b[12]!==n?(o=j.jsx(c("MWXDialogFooter.react"),{callToActionGroupDirection:"backward",primaryCallToAction:m,secondaryCallToAction:n}),b[11]=m,b[12]=n,b[13]=o):o=b[13];b[14]===Symbol["for"]("react.memo_cache_sentinel")?(m=j.jsx(c("MWXColumnItem.react"),{align:"center",paddingTop:20,paddingVertical:4}),b[14]=m):m=b[14];b[15]===Symbol["for"]("react.memo_cache_sentinel")?(n=j.jsx(c("MWXColumnItem.react"),{align:"center",paddingTop:0,paddingVertical:8,children:j.jsx(c("MWEBSyncIcon.react"),{})}),b[15]=n):n=b[15];var p;b[16]===Symbol["for"]("react.memo_cache_sentinel")?(p=j.jsx(c("MWXColumnItem.react"),{align:"center",children:j.jsx(c("MWXText.react"),{align:"center",color:"primary",type:"headlineEmphasized2",children:h._(/*BTDS*/"Send a one-time code to restore your chat history")})}),b[16]=p):p=b[16];var q;b[17]===Symbol["for"]("react.memo_cache_sentinel")?(q=j.jsx(c("MWXColumnItem.react"),{align:"center",children:j.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"body3",children:h._(/*BTDS*/"Get a one-time code from the Messenger or Facebook mobile app to restore your chat history on this device.")})}),b[17]=q):q=b[17];b[18]!==a?(m=j.jsxs(c("MWXColumn.react"),{align:"center",paddingHorizontal:16,paddingVertical:8,ref:a,spacing:16,children:[m,n,p,q]}),b[18]=a,b[19]=m):m=b[19];b[20]!==m||b[21]!==o?(n=j.jsx(c("MWXDialogPage.react"),{footer:o,header:null,children:m}),b[20]=m,b[21]=o,b[22]=n):n=b[22];return n}function l(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_FIRST_RESTORE_DIALOG_STEP_IMPRESSION")}g["default"]=a}),226);
__d("MWEncryptedBackupsOTCShowNotificationSentToast",["fbt","FDSCheckmarkFilled24Icon","MWChatEncryptedBackupsQPLEvents","QPLUserFlow","SVGIcon","cr:4027","cr:6570","mwPushToast","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){var a=b("cr:6570")?j.jsx(b("cr:6570"),{icon:c("FDSCheckmarkFilled24Icon")}):void 0,e=b("cr:4027")?d("SVGIcon").svgIcon(b("cr:4027")):void 0;d("mwPushToast").mwPushToast({body:h._(/*BTDS*/"Code sent."),icon:{comet:a,mds:e},testid:"mw-chat-encrypted-backups-otc-notification-sent-successful-toast"});c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_NOTIFICATION_SENT_SUCCESSFUL_TOAST")}g.showOTCNotificationSentToast=a}),226);
__d("MWEncrypedBackupsSendOTCNotifications",["FBLogger","I64","LSAuthorityLevel","LSEncryptedBackupsOpStatus","LSFactory","LSSendOTCNotificationsStoredProcedure","LSVec","MWEncryptedBackupsOTCShowNotificationSentToast","ReQL","ReQLSuspense","err","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;(i||d("react")).useCallback;async function k(a){var b=a.db,e=a.deviceIds;a=new Promise(function(a,e){var f=d("ReQL").fromTableAscending(b.tables.encrypted_backups_otc_notification_sending_status),g=f.subscribe(function(b,f){if(f.operation==="delete")return;b=f.value;if(b==null)return;f=(j||(j=d("I64"))).to_int32(b.authorityLevel);if(f!==c("LSAuthorityLevel").AUTHORITATIVE)return;g();switch((j||(j=d("I64"))).to_int32(b.notificationSendingStatus)){case c("LSEncryptedBackupsOpStatus").SUCCESS:d("MWEncryptedBackupsOTCShowNotificationSentToast").showOTCNotificationSentToast();return a();case c("LSEncryptedBackupsOpStatus").FAILURE:return e(c("err")("[sendOTCNotifications] Failure"));default:c("FBLogger")("labyrinth_web").mustfix("OTC: Unexpected UNKNOWN status type for notification sending result.");return e(c("err")("[sendOTCNotifications] Unknown"))}})});await b.runInTransaction(function(a){return c("LSSendOTCNotificationsStoredProcedure")(c("LSFactory")(a),{deviceIds:c("LSVec").ofArray((a=e)!=null?a:[])})},"readwrite",void 0,void 0,f.id+":81");return a}function a(){var a,b=d("react-compiler-runtime").c(5),e=(h||(h=c("useReStore")))();a=(a=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.tables.encrypted_backups_otc_notification_sending_status)},[e.tables.encrypted_backups_otc_notification_sending_status],f.id+":98"))==null?void 0:a.authorityLevel;a=a!=null&&(j||(j=d("I64"))).to_int32(a)===c("LSAuthorityLevel").OPTIMISTIC;var g;b[0]!==e?(g=function(a){return k({db:e,deviceIds:a})},b[0]=e,b[1]=g):g=b[1];g=g;var i;b[2]!==a||b[3]!==g?(i=[g,a],b[2]=a,b[3]=g,b[4]=i):i=b[4];return i}g.sendOTCNotifications=k;g.useSendOTCNotifications=a}),98);
__d("MWEncryptedBackupsDeviceUtils",[],(function(a,b,c,d,e,f){"use strict";a=[6628568379,173847642670370,350685531728];b=[173847642670370];f.FB_APP_IDS=a;f.TABLET_APP_IDS=b}),66);
__d("MWXIconMobile",["MWXSvgIcon","SVGIcon","cr:12502","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12502")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXIconTablet",["MWXSvgIcon","SVGIcon","cr:12599","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12599")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWEncryptedBackupsDeviceListCell.react",["fbt","AddOnStartOverride.react","BaseMiddot.react","FDSRelativeTimestamp.react","I64","MWEncryptedBackupsDeviceUtils","MWXIconForListCell.react","MWXIconMobile","MWXIconTablet","MWXListCell.react","MWXTextPairing.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||(i=d("react")),l=i.useMemo;function a(a){var b=a.device;a=l(function(){return b.appId!=null?(j||(j=d("I64"))).to_float(b.appId):null},[b.appId]);var e=d("MWEncryptedBackupsDeviceUtils").TABLET_APP_IDS.includes(a);a=d("MWEncryptedBackupsDeviceUtils").FB_APP_IDS.includes(a)?h._(/*BTDS*/"Facebook"):h._(/*BTDS*/"Messenger");return k.jsx(c("MWXListCell.react"),{addOnStart:k.jsx(c("AddOnStartOverride.react"),{children:k.jsx(c("MWXIconForListCell.react"),{icon:e?c("MWXIconTablet"):c("MWXIconMobile"),size:"large"})}),content:k.jsx(c("MWXTextPairing.react"),{body:b.lastUploadTime!=null&&h._(/*BTDS*/"Last seen {last_seen}",[h._param("last_seen",k.jsx(c("FDSRelativeTimestamp.react"),{date:new Date(Number(b.lastUploadTime)*1e3)}))]),bodyColor:"secondary",headline:b.model!=null?k.jsxs(k.Fragment,{children:[a,k.jsx(c("BaseMiddot.react"),{}),b.model]}):a,level:4})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWEncryptedBackupsEligibleDeviceCell.react",["I64","MWChatEncryptedBackupsAddonIcon.react","MWChatEncryptedBackupsAppFacebookconSmall.react","MWChatEncryptedBackupsAppMessengerIconSmall.react","MWEncryptedBackupsDeviceUtils","MWXListCell.react","MWXText.react","react","react-compiler-runtime","vulture"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");function a(a){var b=d("react-compiler-runtime").c(10),e=a.deviceAppId,f=a.deviceManufacturer,g=a.deviceModel;a=a.eligibleDeviceCellId;c("vulture")("iW767kCcZ_qtlopGSscOQ1HRA4Y=");if(b[0]!==e){var h;h=(h=e!=null&&d("MWEncryptedBackupsDeviceUtils").FB_APP_IDS.includes((i||(i=d("I64"))).to_float(e)))!=null?h:!1;b[0]=e;b[1]=h}else h=b[1];e=h;b[2]!==e?(h=j.jsx(c("MWChatEncryptedBackupsAddonIcon.react"),{icon:e?j.jsx(c("MWChatEncryptedBackupsAppFacebookconSmall.react"),{}):j.jsx(c("MWChatEncryptedBackupsAppMessengerIconSmall.react"),{})}),b[2]=e,b[3]=h):h=b[3];e=f+" "+g;b[4]!==e?(f=j.jsx(c("MWXText.react"),{type:"headline4",children:e}),b[4]=e,b[5]=f):f=b[5];b[6]!==a||b[7]!==h||b[8]!==f?(g=j.jsx(c("MWXListCell.react"),{addOnStart:h,addOnStartVerticalAlign:"center",content:f,size:"large",testid:void 0}),b[6]=a,b[7]=h,b[8]=f,b[9]=g):g=b[9];return g}g["default"]=a}),98);
__d("MWXIconExclamationMarkCircleOutline",["MWXSvgIcon","SVGIcon","cr:12406","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12406")),c("gkx")("23219"));g["default"]=a}),98);
__d("useFetchOTCEligibleEBDevices",["FBLogger","LSAuthorityLevel","LSFactory","LSFetchOTCEligibleEBDevicesV2StoredProcedure","LSIntEnum","ReQL","ReQLSuspense","gkx","promiseDone","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b=j||d("react");b.useCallback;var k=b.useEffect;b.useMemo;var l=b.useRef,m=c("gkx")("24064");function a(a){var b=d("react-compiler-runtime").c(30),e=a===void 0?"store-or-network":a,g=(h||(h=c("useReStore")))(),j=l(!1);b[0]!==g.tables.encrypted_backups_otc_devices?(a=function(){return d("ReQL").fromTableAscending(g.tables.encrypted_backups_otc_devices)},b[0]=g.tables.encrypted_backups_otc_devices,b[1]=a):a=b[1];var q;b[2]!==g?(q=[g],b[2]=g,b[3]=q):q=b[3];var r=d("ReQLSuspense").useArray(a,q,f.id+":42");b[4]!==g?(a=function(){return g.runInTransaction(p,"readwrite",void 0,void 0,f.id+":48")},b[4]=g,b[5]=a):a=b[5];var s=a;b[6]!==s?(q=function(){c("promiseDone")(s(),null,o)},b[6]=s,b[7]=q):q=b[7];var t=q;b[8]!==e||b[9]!==r.length||b[10]!==t?(a=function(){j.current!==!0&&(r.length===0||e==="network-only")&&(j.current=!0,t())},q=[e,r.length,t],b[8]=e,b[9]=r.length,b[10]=t,b[11]=a,b[12]=q):(a=b[11],q=b[12]);k(a,q);a=r.length>0&&(i||(i=d("LSIntEnum"))).toNumber(r[0].authorityLevel)===c("LSAuthorityLevel").OPTIMISTIC;q=a;a=!q&&r.length>0&&r[0].deviceId==="-1";var u=a;b[13]!==u?(a=function(){u&&c("FBLogger")("labyrinth_web").mustfix("Encrypted Backups OTC: Failed to fetch otc eligible devices.")},b[13]=u,b[14]=a):a=b[14];var v;b[15]!==u||b[16]!==s||b[17]!==e||b[18]!==q||b[19]!==r||b[20]!==t?(v=[u,s,e,q,r,t],b[15]=u,b[16]=s,b[17]=e,b[18]=q,b[19]=r,b[20]=t,b[21]=v):v=b[21];k(a,v);b[22]!==r?(a=r.filter(n),b[22]=r,b[23]=a):a=b[23];v=a;a=v;v=a.length>0||m;var w;b[24]!==u||b[25]!==q||b[26]!==a||b[27]!==v||b[28]!==t?(w={doesUserHaveOtcEligibleDevices:v,failedToFetchOtcDevices:u,isFetchOtcDevicesInFlight:q,otcEligibleDevices:a,triggerFetchOtcEligibleDevices:t},b[24]=u,b[25]=q,b[26]=a,b[27]=v,b[28]=t,b[29]=w):w=b[29];return w}function n(a){return(i||(i=d("LSIntEnum"))).toNumber(a.authorityLevel)!==c("LSAuthorityLevel").OPTIMISTIC&&a.deviceId!==""}function o(){c("FBLogger")("labyrinth_web").mustfix("Failed to fetch OTC eligible devices")}async function p(a){var b=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.encrypted_backups_otc_devices));b=b!=null&&(i||(i=d("LSIntEnum"))).toNumber(b.authorityLevel)===c("LSAuthorityLevel").OPTIMISTIC;if(!b)return c("LSFetchOTCEligibleEBDevicesV2StoredProcedure")(c("LSFactory")(a))}g.default=a}),98);
__d("MWEncryptedBackupsOTCEligibleDevicesList.react",["fbt","AddOnStartOverride.react","MWChatEncryptedBackupsQPLEvents","MWEncryptedBackupsDeviceListCell.react","MWXGlimmer.react","MWXIconExclamationMarkCircleOutline","MWXIconForListCell.react","MWXLink.react","MWXList.react","MWXListCell.react","MWXText.react","MWXTextPairing.react","QPLUserFlow","react","react-compiler-runtime","useFetchOTCEligibleEBDevices"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useEffect,l=b.useRef,m={glimmerBody:{borderTopStartRadius:"xa9qn9j",borderTopEndRadius:"x1trwbdj",borderBottomEndRadius:"x6a0fk7",borderBottomStartRadius:"xuyh7jl",height:"xlzyvqe",width:"x3hqpx7",$$css:!0},glimmerHeadline:{borderTopStartRadius:"xa9qn9j",borderTopEndRadius:"x1trwbdj",borderBottomEndRadius:"x6a0fk7",borderBottomStartRadius:"xuyh7jl",height:"xlzyvqe",width:"xktia5q",$$css:!0},glimmerIcon:{borderTopStartRadius:"xlid4zk",borderTopEndRadius:"x13tp074",borderBottomEndRadius:"x1qns1p2",borderBottomStartRadius:"xipx5yg",height:"xc9qbxq",width:"x14qfxbe",$$css:!0}};function n(){var a=d("react-compiler-runtime").c(2),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=j.jsx(c("AddOnStartOverride.react"),{children:j.jsx(c("MWXGlimmer.react"),{index:0,xstyle:m.glimmerIcon})}),a[0]=b):b=a[0];a[1]===Symbol["for"]("react.memo_cache_sentinel")?(b=j.jsx(c("MWXListCell.react"),{addOnStart:b,content:j.jsx(c("MWXTextPairing.react"),{body:j.jsx(c("MWXGlimmer.react"),{index:2,xstyle:m.glimmerBody}),headline:j.jsx(c("MWXGlimmer.react"),{index:1,xstyle:m.glimmerHeadline}),level:4})}),a[1]=b):b=a[1];return b}function a(){var a=d("react-compiler-runtime").c(13),b=c("useFetchOTCEligibleEBDevices")(),e=b.failedToFetchOtcDevices,f=b.isFetchOtcDevicesInFlight,g=b.otcEligibleDevices;b=b.triggerFetchOtcEligibleDevices;var i=l(!1),m,q;a[0]!==e||a[1]!==f||a[2]!==g.length?(m=function(){f||(c("QPLUserFlow").addAnnotations(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,{"int":{otc_eligible_devices:g.length}}),e?i.current||(i.current=!0,c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_DEVICES_LIST_FAILURE")):!i.current&&g.length>0&&(i.current=!0,c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_DEVICES_LIST_LOADED")))},q=[e,f,g.length],a[0]=e,a[1]=f,a[2]=g.length,a[3]=m,a[4]=q):(m=a[3],q=a[4]);k(m,q);if(f){a[5]===Symbol["for"]("react.memo_cache_sentinel")?(m=j.jsx(n,{}),a[5]=m):m=a[5];return m}else if(e){a[6]===Symbol["for"]("react.memo_cache_sentinel")?(q=j.jsx(c("AddOnStartOverride.react"),{children:j.jsx(c("MWXIconForListCell.react"),{icon:c("MWXIconExclamationMarkCircleOutline"),size:"large"})}),a[6]=q):q=a[6];a[7]!==b?(m=j.jsx(c("MWXListCell.react"),{addOnStart:q,content:j.jsx(c("MWXText.react"),{type:"headlineEmphasized4",children:h._(/*BTDS*/"Unable to show your devices. {try_again}",[h._param("try_again",j.jsx(c("MWXText.react"),{color:"blueLink",type:"headlineEmphasized4",children:j.jsx(c("MWXLink.react"),{onClick:b,children:h._(/*BTDS*/"Refresh")})}))])})}),a[7]=b,a[8]=m):m=a[8];return m}else{a[9]!==g?(q=g.toSorted(p).map(o),a[9]=g,a[10]=q):q=a[10];a[11]!==q?(b=j.jsx(c("MWXList.react"),{testid:void 0,children:q}),a[11]=q,a[12]=b):b=a[12];return b}}function o(a){return j.jsx(c("MWEncryptedBackupsDeviceListCell.react"),{device:a},a.deviceId)}o.displayName=o.name+" [from "+f.id+"]";function p(a,b){return Number(b.lastUploadTime)-Number(a.lastUploadTime)}g["default"]=a}),226);
__d("MWEncryptedBackupsOTCEligibleDevicesPopover.react",["MWEncryptedBackupsOTCEligibleDevicesList.react","MWXPopover.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){a=d("react-compiler-runtime").c(1);var b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=i.jsx(c("MWXPopover.react"),{withArrow:!0,children:i.jsx("div",babelHelpers["extends"]({className:"x1xiyphd x1odjw0f x1y1aw1k x1sxyh0 xwib8y2 xurb0ha x168biu4"},{children:i.jsx(c("MWEncryptedBackupsOTCEligibleDevicesList.react"),{})}))}),a[0]=b):b=a[0];return b}g["default"]=a}),98);
__d("MWEncryptedBackupsViewAllOtcEligibleDialogStep.react",["fbt","CometScrollableArea.react","FBLogger","FDSListCellGlimmer.react","MWChatEncryptedBackupsQPLEvents","MWEncrypedBackupsSendOTCNotifications","MWEncryptedBackupsEligibleDeviceCell.react","MWXColumn.react","MWXColumnItem.react","MWXDialogPageLegacy.react","MWXMultiStepDialogHeader.react","MWXText.react","QPLUserFlow","gkx","react","react-compiler-runtime","useFetchOTCEligibleEBDevices","useVisibilityObserver","vulture"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useEffect,l=b.useRef,m=c("gkx")("23219"),n="https://www.facebook.com/help/messenger-app/431055522328649?ref=learn_more",o={cellsScrollableAreaFds:{marginStart:"x1mh8g0r",maxHeight:"xwazeda",paddingBottom:"x10b6aqq",width:"xh8yej3",$$css:!0},cellsScrollableAreaMds:{marginStart:"x1hk0nng",maxHeight:"x8vp032",width:"xh8yej3",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(25),e=a.onResendCodeFailure,f=a.onReturn;c("vulture")("M4MnY8ZVVhhosM03vjXSb-8ScsU=");b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a={onVisible:r},b[0]=a):a=b[0];a=c("useVisibilityObserver")(a);var g=l(!1),i=d("MWEncrypedBackupsSendOTCNotifications").useSendOTCNotifications(),s=i[0];i=i[1];var t=c("useFetchOTCEligibleEBDevices")(),u=t.failedToFetchOtcDevices,v=t.isFetchOtcDevicesInFlight;t=t.otcEligibleDevices;var w=v?null:t.length,x,y;b[1]!==u||b[2]!==w||b[3]!==f?(x=function(){(w===0||u)&&g.current===!1&&(g.current=!0,f())},y=[u,w,f],b[1]=u,b[2]=w,b[3]=f,b[4]=x,b[5]=y):(x=b[4],y=b[5]);k(x,y);b[6]===Symbol["for"]("react.memo_cache_sentinel")?(x=j.jsx(c("MWXMultiStepDialogHeader.react"),{title:h._(/*BTDS*/"Your devices"),withCloseButton:!1,withoutBackButton:!0}),b[6]=x):x=b[6];b[7]===Symbol["for"]("react.memo_cache_sentinel")?(y=h._(/*BTDS*/"Resend code"),b[7]=y):y=b[7];var z;b[8]!==e||b[9]!==f||b[10]!==s?(z=function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_RESEND_CODE_CLICK"),s().then(f)["catch"](function(){c("FBLogger")("labyrinth_web").mustfix("OTC: Send otc notifications sproc failed."),f(),e()})},b[8]=e,b[9]=f,b[10]=s,b[11]=z):z=b[11];b[12]!==i||b[13]!==z?(y={label:y,loading:i,onPress:z},b[12]=i,b[13]=z,b[14]=y):y=b[14];b[15]===Symbol["for"]("react.memo_cache_sentinel")?(i={label:h._(/*BTDS*/"Can\u2019t access the code?"),linkProps:{target:"_blank",url:n},onPress:q},b[15]=i):i=b[15];b[16]===Symbol["for"]("react.memo_cache_sentinel")?(z={className:"x977yut xyamay9"},b[16]=z):z=b[16];b[17]===Symbol["for"]("react.memo_cache_sentinel")?(z=j.jsx(c("MWXColumnItem.react"),{align:"start",children:j.jsx("div",babelHelpers["extends"]({},z,{children:j.jsx(c("MWXText.react"),{color:"secondary",type:"body3",children:h._(/*BTDS*/"Open your app on one of these devices to get a one-time code.")})}))}),b[17]=z):z=b[17];b[18]!==v||b[19]!==t?(z=j.jsxs(c("MWXColumn.react"),{align:"center",paddingHorizontal:0,paddingVertical:0,spacing:16,children:[z,j.jsx(c("MWXColumnItem.react"),{align:"start",children:v?j.jsx("div",babelHelpers["extends"]({className:"x889kno x65xoit"},{children:j.jsx(c("FDSListCellGlimmer.react"),{imageStyle:"circle",paddingHorizontal:0})})):j.jsx(c("CometScrollableArea.react"),{horizontal:!1,xstyle:m?o.cellsScrollableAreaMds:o.cellsScrollableAreaFds,children:j.jsx(c("MWXColumn.react"),{align:"center",paddingHorizontal:0,paddingVertical:0,spacing:0,children:t.map(p)})})})]}),b[18]=v,b[19]=t,b[20]=z):z=b[20];b[21]!==a||b[22]!==z||b[23]!==y?(v=j.jsxs(j.Fragment,{children:[x,j.jsx(c("MWXDialogPageLegacy.react"),{callToActionGroupLayout:"expanded",primaryCallToAction:y,ref:a,secondaryCallToAction:i,children:z})]}),b[21]=a,b[22]=z,b[23]=y,b[24]=v):v=b[24];return v}function p(a,b){var d=a.appId,e=a.deviceId,f=a.manufacturer;a=a.model;return a!=null&&f!=null?j.jsx(c("MWXColumnItem.react"),{align:"start",children:j.jsx(c("MWEncryptedBackupsEligibleDeviceCell.react"),{deviceAppId:d,deviceManufacturer:f,deviceModel:a,eligibleDeviceCellId:"mw-chat-encrypted-backups-eligible-otc-device-"+b})},e):null}function q(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_CANT_ACCESS_CODE_CLICK")}function r(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_VIEW_ALL_DEVICES_SCREEN")}g["default"]=a}),226);
__d("PAKECleanupSessionReasonEnum",[],(function(a,b,c,d,e,f){a=Object.freeze({FLOW_ABANDONED:0,TIMEOUT:1});f["default"]=a}),66);
__d("PAKEDecryptSecretSprocStatusEnum",[],(function(a,b,c,d,e,f){a=Object.freeze({SUCCESS:0,WRONG_KEYS:-1,FAILURE:-2});f["default"]=a}),66);
__d("PAKEGetActiveSessionSprocStatusEnum",[],(function(a,b,c,d,e,f){a=Object.freeze({SUCCESS:0,NO_SESSION:-1,FAILURE:-2});f["default"]=a}),66);
__d("PAKEMessageTypeEnum",[],(function(a,b,c,d,e,f){a=Object.freeze({AWAITING_CLIENT:0,PAKE_MESSAGE_1:1,PAKE_MESSAGE_2_AND_SECRET:2,SESSION_EXPIRED_ERROR:3,MAX_ATTEMPTS_ERROR:4,GENERIC_ERROR:5,MESSAGE_SENT_ERROR:6,PREVIOUS_MESSAGE_MISSING_ERROR:7,INVALID_PREVIOUS_MESSAGE_ERROR:8,ENCRYPTION_ERROR:9,DECRYPTION_ERROR:10,CPACE_STEP_2_ERROR:11,FETCH_SECRETS_ERROR:12,CPACE_STEP_1_ERROR:13,CPACE_STEP_3_ERROR:14,PAKE_HANDSHAKE_SUCCESS:15,SERIALIZATION_ERROR:16,NO_ACTIVE_SESSION:17,MULTIPLE_ACTIVE_SESSIONS_ERROR:18,PROCESS_SECRETS_ERROR:19,TIMEOUT_ERROR:20,FLOW_ABANDONED_ERROR:21,DESERIALIZE_SECRETS_ERROR:22,CODE_REQUESTED:23,PQ_PAKE_MESSAGE_2:24,PQ_PAKE_MESSAGE_3:25,PQ_PAKE_SECRETS:26});f["default"]=a}),66);
__d("pakeCpace",["Promise"],(function(a,b,c,d,e,f){var g,h=function(){var a=typeof document!=="undefined"&&document.currentScript?document.currentScript.src:void 0;return function(c){c=c||{};var c=typeof c!=="undefined"?c:{},d=Object.assign,i,j;c.ready=new(g||(g=b("Promise")))(function(a,b){i=a,j=b});var k=d({},c),l=[],m="./this.program";(function(a,b){throw b});var n=!0,o=!1,p="";function aa(a){return c.locateFile?c.locateFile(a,p):p+a}var ba,ca,da;(n||o)&&(o?p=self.location.href:typeof document!=="undefined"&&document.currentScript&&(p=document.currentScript.src),a&&(p=a),p.indexOf("blob:")!==0?p=p.substr(0,p.replace(/[?#].*/,"").lastIndexOf("/")+1):p="",(ba=function(a){var b=new XMLHttpRequest();b.open("GET",a,!1);b.send(null);return b.responseText},o&&(da=function(a){var b=new XMLHttpRequest();b.open("GET",a,!1);b.responseType="arraybuffer";b.send(null);return new Uint8Array(b.response)}),ca=function(a,b,c){var d=new XMLHttpRequest();d.open("GET",a,!0);d.responseType="arraybuffer";d.onload=function(){if(d.status==200||d.status==0&&d.response){b(d.response);return}c()};d.onerror=c;d.send(null)}),function(a){return document.title=a});var ea=c.print||emptyFunction.bind(console),q=c.printErr||emptyFunction.bind(console);d(c,k);k=null;c.arguments&&(l=c.arguments);c.thisProgram&&(m=c.thisProgram);c.quit&&c.quit;var fa=0,r=function(a){fa=a},ga=function(){return fa},s;c.wasmBinary&&(s=c.wasmBinary);c.noExitRuntime||!0;typeof WebAssembly!=="object"&&A("no native wasm support detected");var ha,ia=!1;function ja(a,b){a||A(b)}var ka=typeof TextDecoder!=="undefined"?new TextDecoder("utf8"):void 0;function t(a,b,c){c=b+c;var d=b;while(a[d]&&!(d>=c))++d;if(d-b>16&&a.subarray&&ka)return ka.decode(a.subarray(b,d));else{c="";while(b<d){var e=a[b++];if(!(e&128)){c+=String.fromCharCode(e);continue}var f=a[b++]&63;if((e&224)==192){c+=String.fromCharCode((e&31)<<6|f);continue}var g=a[b++]&63;(e&240)==224?e=(e&15)<<12|f<<6|g:e=(e&7)<<18|f<<12|g<<6|a[b++]&63;if(e<65536)c+=String.fromCharCode(e);else{f=e-65536;c+=String.fromCharCode(55296|f>>10,56320|f&1023)}}}return c}function la(a,b){return a?t(v,a,b):""}function ma(a,b,c,d){if(!(d>0))return 0;var e=c;d=c+d-1;for(var f=0;f<a.length;++f){var g=a.charCodeAt(f);if(g>=55296&&g<=57343){var h=a.charCodeAt(++f);g=65536+((g&1023)<<10)|h&1023}if(g<=127){if(c>=d)break;b[c++]=g}else if(g<=2047){if(c+1>=d)break;b[c++]=192|g>>6;b[c++]=128|g&63}else if(g<=65535){if(c+2>=d)break;b[c++]=224|g>>12;b[c++]=128|g>>6&63;b[c++]=128|g&63}else{if(c+3>=d)break;b[c++]=240|g>>18;b[c++]=128|g>>12&63;b[c++]=128|g>>6&63;b[c++]=128|g&63}}b[c]=0;return c-e}function na(a,b,c){return ma(a,v,b,c)}function oa(a){var b=0;for(var c=0;c<a.length;++c){var d=a.charCodeAt(c);d>=55296&&d<=57343&&(d=65536+((d&1023)<<10)|a.charCodeAt(++c)&1023);d<=127?++b:d<=2047?b+=2:d<=65535?b+=3:b+=4}return b}var pa=typeof TextDecoder!=="undefined"?new TextDecoder("utf-16le"):void 0;function qa(a,b){var c=a,d=c>>1,e=d+b/2;while(!(d>=e)&&za[d])++d;c=d<<1;if(c-a>32&&pa)return pa.decode(v.subarray(a,c));else{e="";for(d=0;!(d>=b/2);++d){c=w[a+d*2>>1];if(c==0)break;e+=String.fromCharCode(c)}return e}}function ra(a,b,c){c===void 0&&(c=2147483647);if(c<2)return 0;c-=2;var d=b;c=c<a.length*2?c/2:a.length;for(var e=0;e<c;++e){var f=a.charCodeAt(e);w[b>>1]=f;b+=2}w[b>>1]=0;return b-d}function sa(a){return a.length*2}function ta(a,b){var c=0,d="";while(!(c>=b/4)){var e=x[a+c*4>>2];if(e==0)break;++c;if(e>=65536){var f=e-65536;d+=String.fromCharCode(55296|f>>10,56320|f&1023)}else d+=String.fromCharCode(e)}return d}function ua(a,b,c){c===void 0&&(c=2147483647);if(c<4)return 0;var d=b;c=d+c-4;for(var e=0;e<a.length;++e){var f=a.charCodeAt(e);if(f>=55296&&f<=57343){var g=a.charCodeAt(++e);f=65536+((f&1023)<<10)|g&1023}x[b>>2]=f;b+=4;if(b+4>c)break}x[b>>2]=0;return b-d}function va(a){var b=0;for(var c=0;c<a.length;++c){var d=a.charCodeAt(c);d>=55296&&d<=57343&&++c;b+=4}return b}function wa(b,a){u.set(b,a)}function xa(b,a,c){for(var d=0;d<b.length;++d)u[a++>>0]=b.charCodeAt(d);c||(u[a>>0]=0)}var ya,u,v,w,za,x,y,Aa,Ba;function Ca(a){ya=a,c.HEAP8=u=new Int8Array(a),c.HEAP16=w=new Int16Array(a),c.HEAP32=x=new Int32Array(a),c.HEAPU8=v=new Uint8Array(a),c.HEAPU16=za=new Uint16Array(a),c.HEAPU32=y=new Uint32Array(a),c.HEAPF32=Aa=new Float32Array(a),c.HEAPF64=Ba=new Float64Array(a)}c.INITIAL_MEMORY||16777216;var Da,Ea=[],Fa=[],Ga=[];function Ha(){if(c.preRun){typeof c.preRun=="function"&&(c.preRun=[c.preRun]);while(c.preRun.length)Ka(c.preRun.shift())}Xa(Ea)}function Ia(){!c.noFSInit&&!K.init.initialized&&K.init(),K.ignorePermissions=!1,I.init(),Xa(Fa)}function Ja(){if(c.postRun){typeof c.postRun=="function"&&(c.postRun=[c.postRun]);while(c.postRun.length)Ma(c.postRun.shift())}Xa(Ga)}function Ka(a){Ea.unshift(a)}function La(a){Fa.unshift(a)}function Ma(a){Ga.unshift(a)}var z=0,Na=null,Oa=null;function Pa(a){return a}function Qa(a){z++,c.monitorRunDependencies&&c.monitorRunDependencies(z)}function Ra(a){z--;c.monitorRunDependencies&&c.monitorRunDependencies(z);if(z==0){Na!==null&&(clearInterval(Na),Na=null);if(Oa){a=Oa;Oa=null;a()}}}c.preloadedImages={};c.preloadedAudios={};function A(a){c.onAbort&&c.onAbort(a);a="Aborted("+a+")";q(a);ia=!0;a+=". Build with -s ASSERTIONS=1 for more info.";a=new WebAssembly.RuntimeError(a);j(a);throw a}var Sa="data:application/octet-stream;base64,";function Ta(a){return a.startsWith(Sa)}var B;B="pakeCpace.wasm";Ta(B)||(B=aa(B));function Ua(a){try{if(a==B&&s)return new Uint8Array(s);if(da)return da(a);else throw"both async and sync fetching of the wasm failed"}catch(a){A(a)}}function Va(){return!s&&(n||o)&&typeof fetch==="function"?fetch(B,{credentials:"same-origin"}).then(function(a){if(!a.ok)throw"failed to load wasm binary file at '"+B+"'";return a.arrayBuffer()})["catch"](function(){return Ua(B)}):(g||(g=b("Promise"))).resolve().then(function(){return Ua(B)})}function Wa(){var b={a:vd};function d(b,a){a=b.exports;c.asm=a;ha=c.asm.ha;Ca(ha.buffer);Da=c.asm.ka;La(c.asm.ia);Ra("wasm-instantiate")}Qa("wasm-instantiate");function g(a){d(a.instance)}function h(a){return Va().then(function(a){return WebAssembly.instantiate(a,b)}).then(function(a){return a}).then(a,function(a){q("failed to asynchronously prepare wasm: "+a),A(a)})}function i(){if(!s&&typeof WebAssembly.instantiateStreaming==="function"&&!Ta(B)&&typeof fetch==="function")return fetch(B,{credentials:"same-origin"}).then(function(a){a=WebAssembly.instantiateStreaming(a,b);return a.then(g,function(a){q("wasm streaming compile failed: "+a);q("falling back to ArrayBuffer instantiation");return h(g)})});else return h(g)}if(c.instantiateWasm)try{var a=c.instantiateWasm(b,d);return a}catch(a){q("Module.instantiateWasm callback failed with error: "+a);return!1}i()["catch"](j);return{}}var C,D;function Xa(a){while(a.length>0){var b=a.shift();if(typeof b=="function"){b(c);continue}var d=b.func;typeof d==="number"?b.arg===void 0?E(d)():E(d)(b.arg):d(b.arg===void 0?null:b.arg)}}function E(a){return Da.get(a)}function Ya(a){return wd(a+16)+16}function Za(a){this.excPtr=a,this.ptr=a-16,this.set_type=function(a){x[this.ptr+4>>2]=a},this.get_type=function(){return x[this.ptr+4>>2]},this.set_destructor=function(a){x[this.ptr+8>>2]=a},this.get_destructor=function(){return x[this.ptr+8>>2]},this.set_refcount=function(a){x[this.ptr>>2]=a},this.set_caught=function(a){a=a?1:0,u[this.ptr+12>>0]=a},this.get_caught=function(){return u[this.ptr+12>>0]!=0},this.set_rethrown=function(a){a=a?1:0,u[this.ptr+13>>0]=a},this.get_rethrown=function(){return u[this.ptr+13>>0]!=0},this.init=function(a,b){this.set_type(a),this.set_destructor(b),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var a=x[this.ptr>>2];x[this.ptr>>2]=a+1},this.release_ref=function(){var a=x[this.ptr>>2];x[this.ptr>>2]=a-1;return a===1}}function $a(a){this.free=function(){X(this.ptr),this.ptr=0},this.set_base_ptr=function(a){x[this.ptr>>2]=a},this.get_base_ptr=function(){return x[this.ptr>>2]},this.set_adjusted_ptr=function(a){x[this.ptr+4>>2]=a},this.get_adjusted_ptr_addr=function(){return this.ptr+4},this.get_adjusted_ptr=function(){return x[this.ptr+4>>2]},this.get_exception_ptr=function(){var a=zd(this.get_exception_info().get_type());if(a)return x[this.get_base_ptr()>>2];a=this.get_adjusted_ptr();return a!==0?a:this.get_base_ptr()},this.get_exception_info=function(){return new Za(this.get_base_ptr())},a===void 0?(this.ptr=wd(8),this.set_adjusted_ptr(0)):this.ptr=a}var ab=[];function bb(a){a.add_ref()}var cb=0;function db(a){a=new $a(a);var b=a.get_exception_info();b.get_caught()||(b.set_caught(!0),cb--);b.set_rethrown(!1);ab.push(a);bb(b);return a.get_exception_ptr()}var F=0;function eb(a){try{return X(new Za(a).ptr)}catch(a){}}function fb(a){if(a.release_ref()&&!a.get_rethrown()){var b=a.get_destructor();b&&E(b)(a.excPtr);eb(a.excPtr)}}function gb(){Y(0);var a=ab.pop();fb(a.get_exception_info());a.free();F=0}function hb(a){a=new $a(a);var b=a.get_base_ptr();F||(F=b);a.free();throw b}function ib(){var a=F;if(!a){r(0);return 0|0}var b=new Za(a),c=b.get_type(),d=new $a();d.set_base_ptr(a);d.set_adjusted_ptr(a);if(!c){r(0);return d.ptr|0}var e=Array.prototype.slice.call(arguments);for(var f=0;f<e.length;f++){var g=e[f];if(g===0||g===c)break;if(yd(g,c,d.get_adjusted_ptr_addr())){r(g);return d.ptr|0}}r(c);return d.ptr|0}function jb(){var a=F;if(!a){r(0);return 0|0}var b=new Za(a),c=b.get_type(),d=new $a();d.set_base_ptr(a);d.set_adjusted_ptr(a);if(!c){r(0);return d.ptr|0}var e=Array.prototype.slice.call(arguments);for(var f=0;f<e.length;f++){var g=e[f];if(g===0||g===c)break;if(yd(g,c,d.get_adjusted_ptr_addr())){r(g);return d.ptr|0}}r(c);return d.ptr|0}function kb(){var a=ab.pop();a||A("no exception to throw");var b=a.get_exception_info(),c=a.get_base_ptr();!b.get_rethrown()?(ab.push(a),b.set_rethrown(!0),b.set_caught(!1),cb++):a.free();F=c;throw c}function lb(a,b,c){var d=new Za(a);d.init(b,c);F=a;cb++;throw a}function mb(){return cb}var G={splitPath:function(a){var b=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return b.exec(a).slice(1)},normalizeArray:function(a,b){var c=0;for(var d=a.length-1;d>=0;d--){var e=a[d];e==="."?a.splice(d,1):e===".."?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c;c--)a.unshift("..");return a},normalize:function(a){var b=a.charAt(0)==="/",c=a.substr(-1)==="/";a=G.normalizeArray(a.split("/").filter(function(a){return!!a}),!b).join("/");!a&&!b&&(a=".");a&&c&&(a+="/");return(b?"/":"")+a},dirname:function(a){a=G.splitPath(a);var b=a[0];a=a[1];if(!b&&!a)return".";a&&(a=a.substr(0,a.length-1));return b+a},basename:function(a){if(a==="/")return"/";a=G.normalize(a);a=a.replace(/\/$/,"");var b=a.lastIndexOf("/");return b===-1?a:a.substr(b+1)},extname:function(a){return G.splitPath(a)[3]},join:function(){var a=Array.prototype.slice.call(arguments,0);return G.normalize(a.join("/"))},join2:function(a,b){return G.normalize(a+"/"+b)}};function nb(){if(typeof crypto==="object"&&typeof crypto.getRandomValues==="function"){var a=new Uint8Array(1);return function(){crypto.getRandomValues(a);return a[0]}}else return function(){A("randomDevice")}}var H={resolve:function(){var a="",b=!1;for(var c=arguments.length-1;c>=-1&&!b;c--){var d=c>=0?arguments[c]:K.cwd();if(typeof d!=="string")throw new TypeError("Arguments to path.resolve must be strings");else if(!d)return"";a=d+"/"+a;b=d.charAt(0)==="/"}a=G.normalizeArray(a.split("/").filter(function(a){return!!a}),!b).join("/");return(b?"/":"")+a||"."},relative:function(a,b){a=H.resolve(a).substr(1);b=H.resolve(b).substr(1);function c(a){var b=0;for(;b<a.length;b++)if(a[b]!=="")break;var c=a.length-1;for(;c>=0;c--)if(a[c]!=="")break;return b>c?[]:a.slice(b,c-b+1)}a=c(a.split("/"));c=c(b.split("/"));b=Math.min(a.length,c.length);var d=b;for(var e=0;e<b;e++)if(a[e]!==c[e]){d=e;break}b=[];for(var e=d;e<a.length;e++)b.push("..");b=b.concat(c.slice(d));return b.join("/")}},I={ttys:[],init:function(){},shutdown:function(){},register:function(a,b){I.ttys[a]={input:[],output:[],ops:b},K.registerDevice(a,I.stream_ops)},stream_ops:{open:function(a){var b=I.ttys[a.node.rdev];if(!b)throw new K.ErrnoError(43);a.tty=b;a.seekable=!1},close:function(a){a.tty.ops.flush(a.tty)},flush:function(a){a.tty.ops.flush(a.tty)},read:function(b,a,c,d,e){if(!b.tty||!b.tty.ops.get_char)throw new K.ErrnoError(60);e=0;for(var f=0;f<d;f++){var g;try{g=b.tty.ops.get_char(b.tty)}catch(a){throw new K.ErrnoError(29)}if(g===void 0&&e===0)throw new K.ErrnoError(6);if(g===null||g===void 0)break;e++;a[c+f]=g}e&&(b.node.timestamp=Date.now());return e},write:function(b,a,c,d,e){if(!b.tty||!b.tty.ops.put_char)throw new K.ErrnoError(60);try{for(var f=0;f<d;f++)b.tty.ops.put_char(b.tty,a[c+f])}catch(a){throw new K.ErrnoError(29)}d&&(b.node.timestamp=Date.now());return f}},default_tty_ops:{get_char:function(a){if(!a.input.length){var b=null;typeof window!="undefined"&&typeof window.prompt=="function"?(b=window.prompt("Input: "),b!==null&&(b+="\n")):typeof readline=="function"&&(b=readline(),b!==null&&(b+="\n"));if(!b)return null;a.input=ud(b,!0)}return a.input.shift()},put_char:function(a,b){b===null||b===10?(ea(t(a.output,0)),a.output=[]):b!=0&&a.output.push(b)},flush:function(a){a.output&&a.output.length>0&&(ea(t(a.output,0)),a.output=[])}},default_tty1_ops:{put_char:function(a,b){b===null||b===10?(q(t(a.output,0)),a.output=[]):b!=0&&a.output.push(b)},flush:function(a){a.output&&a.output.length>0&&(q(t(a.output,0)),a.output=[])}}};function ob(a){A()}var J={ops_table:null,mount:function(a){return J.createNode(null,"/",16384|511,0)},createNode:function(a,b,c,d){if(K.isBlkdev(c)||K.isFIFO(c))throw new K.ErrnoError(63);J.ops_table||(J.ops_table={dir:{node:{getattr:J.node_ops.getattr,setattr:J.node_ops.setattr,lookup:J.node_ops.lookup,mknod:J.node_ops.mknod,rename:J.node_ops.rename,unlink:J.node_ops.unlink,rmdir:J.node_ops.rmdir,readdir:J.node_ops.readdir,symlink:J.node_ops.symlink},stream:{llseek:J.stream_ops.llseek}},file:{node:{getattr:J.node_ops.getattr,setattr:J.node_ops.setattr},stream:{llseek:J.stream_ops.llseek,read:J.stream_ops.read,write:J.stream_ops.write,allocate:J.stream_ops.allocate,mmap:J.stream_ops.mmap,msync:J.stream_ops.msync}},link:{node:{getattr:J.node_ops.getattr,setattr:J.node_ops.setattr,readlink:J.node_ops.readlink},stream:{}},chrdev:{node:{getattr:J.node_ops.getattr,setattr:J.node_ops.setattr},stream:K.chrdev_stream_ops}});c=K.createNode(a,b,c,d);K.isDir(c.mode)?(c.node_ops=J.ops_table.dir.node,c.stream_ops=J.ops_table.dir.stream,c.contents={}):K.isFile(c.mode)?(c.node_ops=J.ops_table.file.node,c.stream_ops=J.ops_table.file.stream,c.usedBytes=0,c.contents=null):K.isLink(c.mode)?(c.node_ops=J.ops_table.link.node,c.stream_ops=J.ops_table.link.stream):K.isChrdev(c.mode)&&(c.node_ops=J.ops_table.chrdev.node,c.stream_ops=J.ops_table.chrdev.stream);c.timestamp=Date.now();a&&(a.contents[b]=c,a.timestamp=c.timestamp);return c},getFileDataAsTypedArray:function(a){if(!a.contents)return new Uint8Array(0);return a.contents.subarray?a.contents.subarray(0,a.usedBytes):new Uint8Array(a.contents)},expandFileStorage:function(a,b){var c=a.contents?a.contents.length:0;if(c>=b)return;var d=1024*1024;b=Math.max(b,c*(c<d?2:1.125)>>>0);c!=0&&(b=Math.max(b,256));d=a.contents;a.contents=new Uint8Array(b);a.usedBytes>0&&a.contents.set(d.subarray(0,a.usedBytes),0)},resizeFileStorage:function(a,b){if(a.usedBytes==b)return;if(b==0)a.contents=null,a.usedBytes=0;else{var c=a.contents;a.contents=new Uint8Array(b);c&&a.contents.set(c.subarray(0,Math.min(b,a.usedBytes)));a.usedBytes=b}},node_ops:{getattr:function(a){var b={};b.dev=K.isChrdev(a.mode)?a.id:1;b.ino=a.id;b.mode=a.mode;b.nlink=1;b.uid=0;b.gid=0;b.rdev=a.rdev;K.isDir(a.mode)?b.size=4096:K.isFile(a.mode)?b.size=a.usedBytes:K.isLink(a.mode)?b.size=a.link.length:b.size=0;b.atime=new Date(a.timestamp);b.mtime=new Date(a.timestamp);b.ctime=new Date(a.timestamp);b.blksize=4096;b.blocks=Math.ceil(b.size/b.blksize);return b},setattr:function(a,b){b.mode!==void 0&&(a.mode=b.mode),b.timestamp!==void 0&&(a.timestamp=b.timestamp),b.size!==void 0&&J.resizeFileStorage(a,b.size)},lookup:function(a,b){throw K.genericErrors[44]},mknod:function(a,b,c,d){return J.createNode(a,b,c,d)},rename:function(a,b,c){if(K.isDir(a.mode)){var d;try{d=K.lookupNode(b,c)}catch(a){}if(d)for(var e in d.contents)throw new K.ErrnoError(55)}delete a.parent.contents[a.name];a.parent.timestamp=Date.now();a.name=c;b.contents[c]=a;b.timestamp=a.parent.timestamp;a.parent=b},unlink:function(a,b){delete a.contents[b],a.timestamp=Date.now()},rmdir:function(a,b){var c=K.lookupNode(a,b);for(c in c.contents)throw new K.ErrnoError(55);delete a.contents[b];a.timestamp=Date.now()},readdir:function(a){var b=[".",".."];for(var c in a.contents){if(!Object.prototype.hasOwnProperty.call(a.contents,c))continue;b.push(c)}return b},symlink:function(a,b,c){a=J.createNode(a,b,511|40960,0);a.link=c;return a},readlink:function(a){if(!K.isLink(a.mode))throw new K.ErrnoError(28);return a.link}},stream_ops:{read:function(b,a,c,d,e){var f=b.node.contents;if(e>=b.node.usedBytes)return 0;b=Math.min(b.node.usedBytes-e,d);if(b>8&&f.subarray)a.set(f.subarray(e,e+b),c);else for(d=0;d<b;d++)a[c+d]=f[e+d];return b},write:function(b,a,c,d,e,f){if(!d)return 0;b=b.node;b.timestamp=Date.now();if(a.subarray&&(!b.contents||b.contents.subarray))if(f){b.contents=a.subarray(c,c+d);b.usedBytes=d;return d}else if(b.usedBytes===0&&e===0){b.contents=a.slice(c,c+d);b.usedBytes=d;return d}else if(e+d<=b.usedBytes){b.contents.set(a.subarray(c,c+d),e);return d}J.expandFileStorage(b,e+d);if(b.contents.subarray&&a.subarray)b.contents.set(a.subarray(c,c+d),e);else for(f=0;f<d;f++)b.contents[e+f]=a[c+f];b.usedBytes=Math.max(b.usedBytes,e+d);return d},llseek:function(a,b,c){b=b;c===1?b+=a.position:c===2&&(K.isFile(a.node.mode)&&(b+=a.node.usedBytes));if(b<0)throw new K.ErrnoError(28);return b},allocate:function(a,b,c){J.expandFileStorage(a.node,b+c),a.node.usedBytes=Math.max(a.node.usedBytes,b+c)},mmap:function(a,b,c,d,e,f){if(b!==0)throw new K.ErrnoError(28);if(!K.isFile(a.node.mode))throw new K.ErrnoError(43);e=a.node.contents;if(!(f&2)&&e.buffer===ya)b=!1,a=e.byteOffset;else{(d>0||d+c<e.length)&&(e.subarray?e=e.subarray(d,d+c):e=Array.prototype.slice.call(e,d,d+c));b=!0;a=ob(c);if(!a)throw new K.ErrnoError(48);u.set(e,a)}return{ptr:a,allocated:b}},msync:function(b,a,c,d,e){if(!K.isFile(b.node.mode))throw new K.ErrnoError(43);if(e&2)return 0;J.stream_ops.write(b,a,0,d,c,!1);return 0}}};function pb(a,b,c,d){var e=d?"":Pa("al "+a);ca(a,function(c){ja(c,'Loading data file "'+a+'" failed (no arrayBuffer).'),b(new Uint8Array(c)),e&&Ra(e)},function(b){if(c)c();else throw'Loading data file "'+a+'" failed.'});e&&Qa(e)}var K={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(a,b){b===void 0&&(b={});a=H.resolve(K.cwd(),a);if(!a)return{path:"",node:null};var c={follow_mount:!0,recurse_count:0};for(var d in c)b[d]===void 0&&(b[d]=c[d]);if(b.recurse_count>8)throw new K.ErrnoError(32);c=G.normalizeArray(a.split("/").filter(function(a){return!!a}),!1);d=K.root;a="/";for(var e=0;e<c.length;e++){var f=e===c.length-1;if(f&&b.parent)break;d=K.lookupNode(d,c[e]);a=G.join2(a,c[e]);K.isMountpoint(d)&&((!f||f&&b.follow_mount)&&(d=d.mounted.root));if(!f||b.follow){f=0;while(K.isLink(d.mode)){var g=K.readlink(a);a=H.resolve(G.dirname(a),g);g=K.lookupPath(a,{recurse_count:b.recurse_count});d=g.node;if(f++>40)throw new K.ErrnoError(32)}}}return{path:a,node:d}},getPath:function(a){var b;while(!0){if(K.isRoot(a)){var c=a.mount.mountpoint;return!b?c:c[c.length-1]!=="/"?c+"/"+b:c+b}b=b?a.name+"/"+b:a.name;a=a.parent}},hashName:function(a,b){var c=0;for(var d=0;d<b.length;d++)c=(c<<5)-c+b.charCodeAt(d)|0;return(a+c>>>0)%K.nameTable.length},hashAddNode:function(a){var b=K.hashName(a.parent.id,a.name);a.name_next=K.nameTable[b];K.nameTable[b]=a},hashRemoveNode:function(a){var b=K.hashName(a.parent.id,a.name);if(K.nameTable[b]===a)K.nameTable[b]=a.name_next;else{b=K.nameTable[b];while(b){if(b.name_next===a){b.name_next=a.name_next;break}b=b.name_next}}},lookupNode:function(a,b){var c=K.mayLookup(a);if(c)throw new K.ErrnoError(c,a);c=K.hashName(a.id,b);for(c=K.nameTable[c];c;c=c.name_next){var d=c.name;if(c.parent.id===a.id&&d===b)return c}return K.lookup(a,b)},createNode:function(a,b,c,d){a=new K.FSNode(a,b,c,d);K.hashAddNode(a);return a},destroyNode:function(a){K.hashRemoveNode(a)},isRoot:function(a){return a===a.parent},isMountpoint:function(a){return!!a.mounted},isFile:function(a){return(a&61440)===32768},isDir:function(a){return(a&61440)===16384},isLink:function(a){return(a&61440)===40960},isChrdev:function(a){return(a&61440)===8192},isBlkdev:function(a){return(a&61440)===24576},isFIFO:function(a){return(a&61440)===4096},isSocket:function(a){return(a&49152)===49152},flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:function(a){var b=K.flagModes[a];if(typeof b==="undefined")throw new Error("Unknown file open mode: "+a);return b},flagsToPermissionString:function(a){var b=["r","w","rw"][a&3];a&512&&(b+="w");return b},nodePermissions:function(a,b){if(K.ignorePermissions)return 0;if(b.includes("r")&&!(a.mode&292))return 2;else if(b.includes("w")&&!(a.mode&146))return 2;else if(b.includes("x")&&!(a.mode&73))return 2;return 0},mayLookup:function(a){var b=K.nodePermissions(a,"x");if(b)return b;return!a.node_ops.lookup?2:0},mayCreate:function(a,b){try{K.lookupNode(a,b);return 20}catch(a){}return K.nodePermissions(a,"wx")},mayDelete:function(a,b,c){var d;try{d=K.lookupNode(a,b)}catch(a){return a.errno}b=K.nodePermissions(a,"wx");if(b)return b;if(c){if(!K.isDir(d.mode))return 54;if(K.isRoot(d)||K.getPath(d)===K.cwd())return 10}else if(K.isDir(d.mode))return 31;return 0},mayOpen:function(a,b){if(!a)return 44;if(K.isLink(a.mode))return 32;else if(K.isDir(a.mode)&&(K.flagsToPermissionString(b)!=="r"||b&512))return 31;return K.nodePermissions(a,K.flagsToPermissionString(b))},MAX_OPEN_FDS:4096,nextfd:function(a,b){a===void 0&&(a=0);b===void 0&&(b=K.MAX_OPEN_FDS);for(a=a;a<=b;a++)if(!K.streams[a])return a;throw new K.ErrnoError(33)},getStream:function(a){return K.streams[a]},createStream:function(a,b,c){K.FSStream||(K.FSStream=function(){},K.FSStream.prototype={object:{get:function(){return this.node},set:function(a){this.node=a}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}}});var d=new K.FSStream();for(var e in a)d[e]=a[e];a=d;e=K.nextfd(b,c);a.fd=e;K.streams[e]=a;return a},closeStream:function(a){K.streams[a]=null},chrdev_stream_ops:{open:function(a){var b=K.getDevice(a.node.rdev);a.stream_ops=b.stream_ops;a.stream_ops.open&&a.stream_ops.open(a)},llseek:function(){throw new K.ErrnoError(70)}},major:function(a){return a>>8},minor:function(a){return a&255},makedev:function(a,b){return a<<8|b},registerDevice:function(a,b){K.devices[a]={stream_ops:b}},getDevice:function(a){return K.devices[a]},getMounts:function(a){var b=[];a=[a];while(a.length){var c=a.pop();b.push(c);a.push.apply(a,c.mounts)}return b},syncfs:function(a,b){typeof a==="function"&&(b=a,a=!1);K.syncFSRequests++;K.syncFSRequests>1&&q("warning: "+K.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var c=K.getMounts(K.root.mount),d=0;function e(a){K.syncFSRequests--;return b(a)}function f(a){if(a){if(!f.errored){f.errored=!0;return e(a)}return}++d>=c.length&&e(null)}c.forEach(function(b){if(!b.type.syncfs)return f(null);b.type.syncfs(b,a,f)})},mount:function(a,b,c){var d=c==="/",e=!c,f;if(d&&K.root)throw new K.ErrnoError(10);else if(!d&&!e){e=K.lookupPath(c,{follow_mount:!1});c=e.path;f=e.node;if(K.isMountpoint(f))throw new K.ErrnoError(10);if(!K.isDir(f.mode))throw new K.ErrnoError(54)}e={type:a,opts:b,mountpoint:c,mounts:[]};b=a.mount(e);b.mount=e;e.root=b;d?K.root=b:f&&(f.mounted=e,f.mount&&f.mount.mounts.push(e));return b},unmount:function(a){a=K.lookupPath(a,{follow_mount:!1});if(!K.isMountpoint(a.node))throw new K.ErrnoError(28);a=a.node;var b=a.mounted,c=K.getMounts(b);Object.keys(K.nameTable).forEach(function(a){a=K.nameTable[a];while(a){var b=a.name_next;c.includes(a.mount)&&K.destroyNode(a);a=b}});a.mounted=null;b=a.mount.mounts.indexOf(b);a.mount.mounts.splice(b,1)},lookup:function(a,b){return a.node_ops.lookup(a,b)},mknod:function(a,b,c){var d=K.lookupPath(a,{parent:!0});d=d.node;a=G.basename(a);if(!a||a==="."||a==="..")throw new K.ErrnoError(28);var e=K.mayCreate(d,a);if(e)throw new K.ErrnoError(e);if(!d.node_ops.mknod)throw new K.ErrnoError(63);return d.node_ops.mknod(d,a,b,c)},create:function(a,b){b=b!==void 0?b:438;b&=4095;b|=32768;return K.mknod(a,b,0)},mkdir:function(a,b){b=b!==void 0?b:511;b&=511|512;b|=16384;return K.mknod(a,b,0)},mkdirTree:function(a,b){a=a.split("/");var c="";for(var d=0;d<a.length;++d){if(!a[d])continue;c+="/"+a[d];try{K.mkdir(c,b)}catch(a){if(a.errno!=20)throw a}}},mkdev:function(a,b,c){typeof c==="undefined"&&(c=b,b=438);b|=8192;return K.mknod(a,b,c)},symlink:function(a,b){if(!H.resolve(a))throw new K.ErrnoError(44);var c=K.lookupPath(b,{parent:!0});c=c.node;if(!c)throw new K.ErrnoError(44);b=G.basename(b);var d=K.mayCreate(c,b);if(d)throw new K.ErrnoError(d);if(!c.node_ops.symlink)throw new K.ErrnoError(63);return c.node_ops.symlink(c,b,a)},rename:function(a,b){var c=G.dirname(a),d=G.dirname(b),e=G.basename(a),f=G.basename(b),g,h;g=K.lookupPath(a,{parent:!0});h=g.node;g=K.lookupPath(b,{parent:!0});g=g.node;if(!h||!g)throw new K.ErrnoError(44);if(h.mount!==g.mount)throw new K.ErrnoError(75);var i=K.lookupNode(h,e);a=H.relative(a,d);if(a.charAt(0)!==".")throw new K.ErrnoError(28);a=H.relative(b,c);if(a.charAt(0)!==".")throw new K.ErrnoError(55);var j;try{j=K.lookupNode(g,f)}catch(a){}if(i===j)return;d=K.isDir(i.mode);b=K.mayDelete(h,e,d);if(b)throw new K.ErrnoError(b);b=j?K.mayDelete(g,f,d):K.mayCreate(g,f);if(b)throw new K.ErrnoError(b);if(!h.node_ops.rename)throw new K.ErrnoError(63);if(K.isMountpoint(i)||j&&K.isMountpoint(j))throw new K.ErrnoError(10);if(g!==h){b=K.nodePermissions(h,"w");if(b)throw new K.ErrnoError(b)}K.hashRemoveNode(i);try{h.node_ops.rename(i,g,f)}catch(a){throw a}finally{K.hashAddNode(i)}},rmdir:function(a){var b=K.lookupPath(a,{parent:!0});b=b.node;a=G.basename(a);var c=K.lookupNode(b,a),d=K.mayDelete(b,a,!0);if(d)throw new K.ErrnoError(d);if(!b.node_ops.rmdir)throw new K.ErrnoError(63);if(K.isMountpoint(c))throw new K.ErrnoError(10);b.node_ops.rmdir(b,a);K.destroyNode(c)},readdir:function(a){a=K.lookupPath(a,{follow:!0});a=a.node;if(!a.node_ops.readdir)throw new K.ErrnoError(54);return a.node_ops.readdir(a)},unlink:function(a){var b=K.lookupPath(a,{parent:!0});b=b.node;if(!b)throw new K.ErrnoError(44);a=G.basename(a);var c=K.lookupNode(b,a),d=K.mayDelete(b,a,!1);if(d)throw new K.ErrnoError(d);if(!b.node_ops.unlink)throw new K.ErrnoError(63);if(K.isMountpoint(c))throw new K.ErrnoError(10);b.node_ops.unlink(b,a);K.destroyNode(c)},readlink:function(a){a=K.lookupPath(a);a=a.node;if(!a)throw new K.ErrnoError(44);if(!a.node_ops.readlink)throw new K.ErrnoError(28);return H.resolve(K.getPath(a.parent),a.node_ops.readlink(a))},stat:function(a,b){a=K.lookupPath(a,{follow:!b});b=a.node;if(!b)throw new K.ErrnoError(44);if(!b.node_ops.getattr)throw new K.ErrnoError(63);return b.node_ops.getattr(b)},lstat:function(a){return K.stat(a,!0)},chmod:function(a,b,c){if(typeof a==="string"){c=K.lookupPath(a,{follow:!c});c=c.node}else c=a;if(!c.node_ops.setattr)throw new K.ErrnoError(63);c.node_ops.setattr(c,{mode:b&4095|c.mode&-4096,timestamp:Date.now()})},lchmod:function(a,b){K.chmod(a,b,!0)},fchmod:function(a,b){a=K.getStream(a);if(!a)throw new K.ErrnoError(8);K.chmod(a.node,b)},chown:function(a,b,c,d){if(typeof a==="string"){b=K.lookupPath(a,{follow:!d});c=b.node}else c=a;if(!c.node_ops.setattr)throw new K.ErrnoError(63);c.node_ops.setattr(c,{timestamp:Date.now()})},lchown:function(a,b,c){K.chown(a,b,c,!0)},fchown:function(a,b,c){a=K.getStream(a);if(!a)throw new K.ErrnoError(8);K.chown(a.node,b,c)},truncate:function(a,b){if(b<0)throw new K.ErrnoError(28);if(typeof a==="string"){var c=K.lookupPath(a,{follow:!0});c=c.node}else c=a;if(!c.node_ops.setattr)throw new K.ErrnoError(63);if(K.isDir(c.mode))throw new K.ErrnoError(31);if(!K.isFile(c.mode))throw new K.ErrnoError(28);a=K.nodePermissions(c,"w");if(a)throw new K.ErrnoError(a);c.node_ops.setattr(c,{size:b,timestamp:Date.now()})},ftruncate:function(a,b){a=K.getStream(a);if(!a)throw new K.ErrnoError(8);if((a.flags&2097155)===0)throw new K.ErrnoError(28);K.truncate(a.node,b)},utime:function(a,b,c){a=K.lookupPath(a,{follow:!0});a=a.node;a.node_ops.setattr(a,{timestamp:Math.max(b,c)})},open:function(a,b,d,e,f){if(a==="")throw new K.ErrnoError(44);b=typeof b==="string"?K.modeStringToFlags(b):b;d=typeof d==="undefined"?438:d;b&64?d=d&4095|32768:d=0;var g;if(typeof a==="object")g=a;else{a=G.normalize(a);try{var h=K.lookupPath(a,{follow:!(b&131072)});g=h.node}catch(a){}}h=!1;if(b&64)if(g){if(b&128)throw new K.ErrnoError(20)}else g=K.mknod(a,d,0),h=!0;if(!g)throw new K.ErrnoError(44);K.isChrdev(g.mode)&&(b&=-513);if(b&65536&&!K.isDir(g.mode))throw new K.ErrnoError(54);if(!h){d=K.mayOpen(g,b);if(d)throw new K.ErrnoError(d)}b&512&&K.truncate(g,0);b&=~(128|512|131072);h=K.createStream({node:g,path:K.getPath(g),flags:b,seekable:!0,position:0,stream_ops:g.stream_ops,ungotten:[],error:!1},e,f);h.stream_ops.open&&h.stream_ops.open(h);c.logReadFiles&&!(b&1)&&(K.readFiles||(K.readFiles={}),a in K.readFiles||(K.readFiles[a]=1));return h},close:function(a){if(K.isClosed(a))throw new K.ErrnoError(8);a.getdents&&(a.getdents=null);try{a.stream_ops.close&&a.stream_ops.close(a)}catch(a){throw a}finally{K.closeStream(a.fd)}a.fd=null},isClosed:function(a){return a.fd===null},llseek:function(a,b,c){if(K.isClosed(a))throw new K.ErrnoError(8);if(!a.seekable||!a.stream_ops.llseek)throw new K.ErrnoError(70);if(c!=0&&c!=1&&c!=2)throw new K.ErrnoError(28);a.position=a.stream_ops.llseek(a,b,c);a.ungotten=[];return a.position},read:function(b,a,c,d,e){if(d<0||e<0)throw new K.ErrnoError(28);if(K.isClosed(b))throw new K.ErrnoError(8);if((b.flags&2097155)===1)throw new K.ErrnoError(8);if(K.isDir(b.node.mode))throw new K.ErrnoError(31);if(!b.stream_ops.read)throw new K.ErrnoError(28);var f=typeof e!=="undefined";if(!f)e=b.position;else if(!b.seekable)throw new K.ErrnoError(70);a=b.stream_ops.read(b,a,c,d,e);f||(b.position+=a);return a},write:function(b,a,c,d,e,f){if(d<0||e<0)throw new K.ErrnoError(28);if(K.isClosed(b))throw new K.ErrnoError(8);if((b.flags&2097155)===0)throw new K.ErrnoError(8);if(K.isDir(b.node.mode))throw new K.ErrnoError(31);if(!b.stream_ops.write)throw new K.ErrnoError(28);b.seekable&&b.flags&1024&&K.llseek(b,0,2);var g=typeof e!=="undefined";if(!g)e=b.position;else if(!b.seekable)throw new K.ErrnoError(70);a=b.stream_ops.write(b,a,c,d,e,f);g||(b.position+=a);return a},allocate:function(a,b,c){if(K.isClosed(a))throw new K.ErrnoError(8);if(b<0||c<=0)throw new K.ErrnoError(28);if((a.flags&2097155)===0)throw new K.ErrnoError(8);if(!K.isFile(a.node.mode)&&!K.isDir(a.node.mode))throw new K.ErrnoError(43);if(!a.stream_ops.allocate)throw new K.ErrnoError(138);a.stream_ops.allocate(a,b,c)},mmap:function(a,b,c,d,e,f){if((e&2)!==0&&(f&2)===0&&(a.flags&2097155)!==2)throw new K.ErrnoError(2);if((a.flags&2097155)===1)throw new K.ErrnoError(2);if(!a.stream_ops.mmap)throw new K.ErrnoError(43);return a.stream_ops.mmap(a,b,c,d,e,f)},msync:function(b,a,c,d,e){return!b||!b.stream_ops.msync?0:b.stream_ops.msync(b,a,c,d,e)},munmap:function(a){return 0},ioctl:function(a,b,c){if(!a.stream_ops.ioctl)throw new K.ErrnoError(59);return a.stream_ops.ioctl(a,b,c)},readFile:function(a,b){b===void 0&&(b={});b.flags=b.flags||0;b.encoding=b.encoding||"binary";if(b.encoding!=="utf8"&&b.encoding!=="binary")throw new Error('Invalid encoding type "'+b.encoding+'"');var c,d=K.open(a,b.flags);a=K.stat(a);a=a.size;var e=new Uint8Array(a);K.read(d,e,0,a,0);b.encoding==="utf8"?c=t(e,0):b.encoding==="binary"&&(c=e);K.close(d);return c},writeFile:function(a,b,c){c===void 0&&(c={});c.flags=c.flags||577;a=K.open(a,c.flags,c.mode);if(typeof b==="string"){var d=new Uint8Array(oa(b)+1),e=ma(b,d,0,d.length);K.write(a,d,0,e,void 0,c.canOwn)}else if(ArrayBuffer.isView(b))K.write(a,b,0,b.byteLength,void 0,c.canOwn);else throw new Error("Unsupported data type");K.close(a)},cwd:function(){return K.currentPath},chdir:function(a){a=K.lookupPath(a,{follow:!0});if(a.node===null)throw new K.ErrnoError(44);if(!K.isDir(a.node.mode))throw new K.ErrnoError(54);var b=K.nodePermissions(a.node,"x");if(b)throw new K.ErrnoError(b);K.currentPath=a.path},createDefaultDirectories:function(){K.mkdir("/tmp"),K.mkdir("/home"),K.mkdir("/home/web_user")},createDefaultDevices:function(){K.mkdir("/dev");K.registerDevice(K.makedev(1,3),{read:function(){return 0},write:function(b,a,c,d,e){return d}});K.mkdev("/dev/null",K.makedev(1,3));I.register(K.makedev(5,0),I.default_tty_ops);I.register(K.makedev(6,0),I.default_tty1_ops);K.mkdev("/dev/tty",K.makedev(5,0));K.mkdev("/dev/tty1",K.makedev(6,0));var a=nb();K.createDevice("/dev","random",a);K.createDevice("/dev","urandom",a);K.mkdir("/dev/shm");K.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){K.mkdir("/proc");var a=K.mkdir("/proc/self");K.mkdir("/proc/self/fd");K.mount({mount:function(){var b=K.createNode(a,"fd",16384|511,73);b.node_ops={lookup:function(a,b){a=+b;var c=K.getStream(a);if(!c)throw new K.ErrnoError(8);b={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return c.path}}};b.parent=b;return b}};return b}},{},"/proc/self/fd")},createStandardStreams:function(){c.stdin?K.createDevice("/dev","stdin",c.stdin):K.symlink("/dev/tty","/dev/stdin"),c.stdout?K.createDevice("/dev","stdout",null,c.stdout):K.symlink("/dev/tty","/dev/stdout"),c.stderr?K.createDevice("/dev","stderr",null,c.stderr):K.symlink("/dev/tty1","/dev/stderr"),K.open("/dev/stdin",0),K.open("/dev/stdout",1),K.open("/dev/stderr",1)},ensureErrnoError:function(){if(K.ErrnoError)return;K.ErrnoError=function(a,b){this.node=b,this.setErrno=function(a){this.errno=a},this.setErrno(a),this.message="FS error"};K.ErrnoError.prototype=new Error();K.ErrnoError.prototype.constructor=K.ErrnoError;[44].forEach(function(a){K.genericErrors[a]=new K.ErrnoError(a),K.genericErrors[a].stack="<generic error, no stack>"})},staticInit:function(){K.ensureErrnoError(),K.nameTable=new Array(4096),K.mount(J,{},"/"),K.createDefaultDirectories(),K.createDefaultDevices(),K.createSpecialDirectories(),K.filesystems={MEMFS:J}},init:function(a,b,d){K.init.initialized=!0,K.ensureErrnoError(),c.stdin=a||c.stdin,c.stdout=b||c.stdout,c.stderr=d||c.stderr,K.createStandardStreams()},quit:function(){K.init.initialized=!1;for(var a=0;a<K.streams.length;a++){var b=K.streams[a];if(!b)continue;K.close(b)}},getMode:function(a,b){var c=0;a&&(c|=292|73);b&&(c|=146);return c},findObject:function(a,b){a=K.analyzePath(a,b);if(a.exists)return a.object;else return null},analyzePath:function(a,b){try{var c=K.lookupPath(a,{follow:!b});a=c.path}catch(a){}var d={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var c=K.lookupPath(a,{parent:!0});d.parentExists=!0;d.parentPath=c.path;d.parentObject=c.node;d.name=G.basename(a);c=K.lookupPath(a,{follow:!b});d.exists=!0;d.path=c.path;d.object=c.node;d.name=c.node.name;d.isRoot=c.path==="/"}catch(a){d.error=a.errno}return d},createPath:function(a,b,c,d){a=typeof a==="string"?a:K.getPath(a);c=b.split("/").reverse();while(c.length){d=c.pop();if(!d)continue;var e=G.join2(a,d);try{K.mkdir(e)}catch(a){}a=e}return e},createFile:function(a,b,c,d,e){c=G.join2(typeof a==="string"?a:K.getPath(a),b);a=K.getMode(d,e);return K.create(c,a)},createDataFile:function(a,b,c,d,e,f){var g=b;a&&(a=typeof a==="string"?a:K.getPath(a),g=b?G.join2(a,b):a);b=K.getMode(d,e);a=K.create(g,b);if(c){if(typeof c==="string"){d=new Array(c.length);for(e=0,g=c.length;e<g;++e)d[e]=c.charCodeAt(e);c=d}K.chmod(a,b|146);e=K.open(a,577);K.write(e,c,0,c.length,0,f);K.close(e);K.chmod(a,b)}return a},createDevice:function(a,b,c,d){a=G.join2(typeof a==="string"?a:K.getPath(a),b);b=K.getMode(!!c,!!d);K.createDevice.major||(K.createDevice.major=64);var e=K.makedev(K.createDevice.major++,0);K.registerDevice(e,{open:function(a){a.seekable=!1},close:function(a){d&&d.buffer&&d.buffer.length&&d(10)},read:function(b,a,d,e,f){f=0;for(var g=0;g<e;g++){var h;try{h=c()}catch(a){throw new K.ErrnoError(29)}if(h===void 0&&f===0)throw new K.ErrnoError(6);if(h===null||h===void 0)break;f++;a[d+g]=h}f&&(b.node.timestamp=Date.now());return f},write:function(b,a,c,e,f){for(f=0;f<e;f++)try{d(a[c+f])}catch(a){throw new K.ErrnoError(29)}e&&(b.node.timestamp=Date.now());return f}});return K.mkdev(a,b,e)},forceLoadFile:function(a){if(a.isDevice||a.isFolder||a.link||a.contents)return!0;if(typeof XMLHttpRequest!=="undefined")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");else if(ba)try{a.contents=ud(ba(a.url),!0),a.usedBytes=a.contents.length}catch(a){throw new K.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile:function(a,b,c,d,e){function f(){this.lengthKnown=!1,this.chunks=[]}f.prototype.get=function(a){if(a>this.length-1||a<0)return void 0;var b=a%this.chunkSize;a=a/this.chunkSize|0;return this.getter(a)[b]};f.prototype.setDataGetter=function(a){this.getter=a};f.prototype.cacheLength=function(){var a=new XMLHttpRequest();a.open("HEAD",c,!1);a.send(null);if(!(a.status>=200&&a.status<300||a.status===304))throw new Error("Couldn't load "+c+". Status: "+a.status);var b=Number(a.getResponseHeader("Content-length")),d,e=(d=a.getResponseHeader("Accept-Ranges"))&&d==="bytes";a=(d=a.getResponseHeader("Content-Encoding"))&&d==="gzip";var f=1024*1024;e||(f=b);var g=function(d,e){if(d>e)throw new Error("invalid range ("+d+", "+e+") or no bytes requested!");if(e>b-1)throw new Error("only "+b+" bytes available! programmer error!");var a=new XMLHttpRequest();a.open("GET",c,!1);b!==f&&a.setRequestHeader("Range","bytes="+d+"-"+e);typeof Uint8Array!="undefined"&&(a.responseType="arraybuffer");a.overrideMimeType&&a.overrideMimeType("text/plain; charset=x-user-defined");a.send(null);if(!(a.status>=200&&a.status<300||a.status===304))throw new Error("Couldn't load "+c+". Status: "+a.status);if(a.response!==void 0)return new Uint8Array(a.response||[]);else return ud(a.responseText||"",!0)},h=this;h.setDataGetter(function(a){var c=a*f,d=(a+1)*f-1;d=Math.min(d,b-1);typeof h.chunks[a]==="undefined"&&(h.chunks[a]=g(c,d));if(typeof h.chunks[a]==="undefined")throw new Error("doXHR failed!");return h.chunks[a]});(a||!b)&&(f=b=1,b=this.getter(0).length,f=b,ea("LazyFiles on gzip forces download of the whole file when length is accessed"));this._length=b;this._chunkSize=f;this.lengthKnown=!0};if(typeof XMLHttpRequest!=="undefined"){if(!o)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";f=new f();Object.defineProperties(f,{length:{get:function(){this.lengthKnown||this.cacheLength();return this._length}},chunkSize:{get:function(){this.lengthKnown||this.cacheLength();return this._chunkSize}}});f={isDevice:!1,contents:f}}else var f={isDevice:!1,url:c};var g=K.createFile(a,b,f,d,e);f.contents?g.contents=f.contents:f.url&&(g.contents=null,g.url=f.url);Object.defineProperties(g,{usedBytes:{get:function(){return this.contents.length}}});var h={};a=Object.keys(g.stream_ops);a.forEach(function(a){var b=g.stream_ops[a];h[a]=function(){K.forceLoadFile(g);return b.apply(null,arguments)}});h.read=function(b,a,c,d,e){K.forceLoadFile(g);b=b.node.contents;if(e>=b.length)return 0;d=Math.min(b.length-e,d);if(b.slice)for(var f=0;f<d;f++)a[c+f]=b[e+f];else for(var f=0;f<d;f++)a[c+f]=b.get(e+f);return d};g.stream_ops=h;return g},createPreloadedFile:function(a,b,c,d,e,f,g,h,i,j){var k=b?H.resolve(G.join2(a,b)):a,l=Pa("cp "+k);function m(c){function m(c){j&&j(),h||K.createDataFile(a,b,c,d,e,i),f&&f(),Ra(l)}if(Browser.handledByPreloadPlugin(c,k,m,function(){g&&g(),Ra(l)}))return;m(c)}Qa(l);typeof c=="string"?pb(c,function(a){return m(a)},g):m(c)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(a,b,c){b=b||function(){};c=c||function(){};var d=K.indexedDB();try{var e=d.open(K.DB_NAME(),K.DB_VERSION)}catch(a){return c(a)}e.onupgradeneeded=function(){ea("creating db");var a=e.result;a.createObjectStore(K.DB_STORE_NAME)};e.onsuccess=function(){var d=e.result;d=d.transaction([K.DB_STORE_NAME],"readwrite");var f=d.objectStore(K.DB_STORE_NAME),g=0,h=0,i=a.length;function j(){h==0?b():c()}a.forEach(function(a){a=f.put(K.analyzePath(a).object.contents,a);a.onsuccess=function(){g++,g+h==i&&j()};a.onerror=function(){h++,g+h==i&&j()}});d.onerror=c};e.onerror=c},loadFilesFromDB:function(a,b,c){b=b||function(){};c=c||function(){};var d=K.indexedDB();try{var e=d.open(K.DB_NAME(),K.DB_VERSION)}catch(a){return c(a)}e.onupgradeneeded=c;e.onsuccess=function(){var d=e.result;try{var f=d.transaction([K.DB_STORE_NAME],"readonly")}catch(a){c(a);return}var g=f.objectStore(K.DB_STORE_NAME),h=0,i=0,j=a.length;function k(){i==0?b():c()}a.forEach(function(a){var b=g.get(a);b.onsuccess=function(){K.analyzePath(a).exists&&K.unlink(a),K.createDataFile(G.dirname(a),G.basename(a),b.result,!0,!0,!0),h++,h+i==j&&k()};b.onerror=function(){i++,h+i==j&&k()}});f.onerror=c};e.onerror=c}},L={mappings:{},DEFAULT_POLLMASK:5,calculateAt:function(a,b,c){if(b[0]==="/")return b;var d;if(a===-100)d=K.cwd();else{a=K.getStream(a);if(!a)throw new K.ErrnoError(8);d=a.path}if(b.length==0){if(!c)throw new K.ErrnoError(44);return d}return G.join2(d,b)},doStat:function(a,b,c){try{var d=a(b)}catch(a){if(a&&a.node&&G.normalize(b)!==G.normalize(K.getPath(a.node)))return-54;throw a}x[c>>2]=d.dev;x[c+4>>2]=0;x[c+8>>2]=d.ino;x[c+12>>2]=d.mode;x[c+16>>2]=d.nlink;x[c+20>>2]=d.uid;x[c+24>>2]=d.gid;x[c+28>>2]=d.rdev;x[c+32>>2]=0;D=[d.size>>>0,(C=d.size,+Math.abs(C)>=1?C>0?(Math.min(+Math.floor(C/4294967296),4294967295)|0)>>>0:~~+Math.ceil((C-+(~~C>>>0))/4294967296)>>>0:0)],x[c+40>>2]=D[0],x[c+44>>2]=D[1];x[c+48>>2]=4096;x[c+52>>2]=d.blocks;x[c+56>>2]=d.atime.getTime()/1e3|0;x[c+60>>2]=0;x[c+64>>2]=d.mtime.getTime()/1e3|0;x[c+68>>2]=0;x[c+72>>2]=d.ctime.getTime()/1e3|0;x[c+76>>2]=0;D=[d.ino>>>0,(C=d.ino,+Math.abs(C)>=1?C>0?(Math.min(+Math.floor(C/4294967296),4294967295)|0)>>>0:~~+Math.ceil((C-+(~~C>>>0))/4294967296)>>>0:0)],x[c+80>>2]=D[0],x[c+84>>2]=D[1];return 0},doMsync:function(a,b,c,d,e){a=v.slice(a,a+c);K.msync(b,a,e,c,d)},doMkdir:function(a,b){a=G.normalize(a);a[a.length-1]==="/"&&(a=a.substr(0,a.length-1));K.mkdir(a,b,0);return 0},doMknod:function(a,b,c){switch(b&61440){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}K.mknod(a,b,c);return 0},doReadlink:function(a,b,c){if(c<=0)return-28;a=K.readlink(a);var d=Math.min(c,oa(a)),e=u[b+d];na(a,b,c+1);u[b+d]=e;return d},doAccess:function(a,b){if(b&-8)return-28;a=K.lookupPath(a,{follow:!0});a=a.node;if(!a)return-44;var c="";b&4&&(c+="r");b&2&&(c+="w");b&1&&(c+="x");return c&&K.nodePermissions(a,c)?-2:0},doDup:function(a,b,c){var d=K.getStream(c);d&&K.close(d);return K.open(a,b,0,c,c).fd},doReadv:function(a,b,c,d){var e=0;for(var f=0;f<c;f++){var g=x[b+f*8>>2],h=x[b+(f*8+4)>>2];g=K.read(a,u,g,h,d);if(g<0)return-1;e+=g;if(g<h)break}return e},doWritev:function(a,b,c,d){var e=0;for(var f=0;f<c;f++){var g=x[b+f*8>>2],h=x[b+(f*8+4)>>2];g=K.write(a,u,g,h,d);if(g<0)return-1;e+=g}return e},varargs:void 0,get:function(){L.varargs+=4;var a=x[L.varargs-4>>2];return a},getStr:function(a){a=la(a);return a},getStreamFromFD:function(a){a=K.getStream(a);if(!a)throw new K.ErrnoError(8);return a},get64:function(a,b){return a}};function qb(a,b){try{if(b===0)return-28;var c=K.cwd(),d=oa(c);if(b<d+1)return-68;na(c,a,b);return a}catch(a){if(typeof K==="undefined"||!(a instanceof K.ErrnoError))throw a;return-a.errno}}function rb(a,b,c){L.varargs=c;try{a=L.getStr(a);c=c?L.get():0;a=K.open(a,b,c);return a.fd}catch(a){if(typeof K==="undefined"||!(a instanceof K.ErrnoError))throw a;return-a.errno}}function sb(a,b,c,d,e){}function tb(a){switch(a){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+a)}}function ub(){var a=new Array(256);for(var b=0;b<256;++b)a[b]=String.fromCharCode(b);vb=a}var vb=void 0;function M(a){var b="";a=a;while(v[a])b+=vb[v[a++]];return b}var N={},O={},wb={},xb=48,yb=57;function zb(a){if(void 0===a)return"_unknown";a=a.replace(/[^a-zA-Z0-9_]/g,"$");var b=a.charCodeAt(0);if(b>=xb&&b<=yb)return"_"+a;else return a}function Ab(a,b){zb(a);return function(){return b.apply(this,arguments)}}function Bb(a,b){var c=Ab(b,function(a){this.name=b;this.message=a;a=new Error(a).stack;a!==void 0&&(this.stack=this.toString()+"\n"+a.replace(/^Error(:[^\n]*)?\n/,""))});c.prototype=Object.create(a.prototype);c.prototype.constructor=c;c.prototype.toString=function(){if(this.message===void 0)return this.name;else return this.name+": "+this.message};return c}var P=void 0;function Q(a){throw new P(a)}var Cb=void 0;function Db(a){throw new Cb(a)}function R(a,b,c){a.forEach(function(a){wb[a]=b});function d(b){b=c(b);b.length!==a.length&&Db("Mismatched type converter count");for(var d=0;d<a.length;++d)S(a[d],b[d])}var e=new Array(b.length),f=[],g=0;b.forEach(function(a,b){Object.prototype.hasOwnProperty.call(O,a)?e[b]=O[a]:(f.push(a),Object.prototype.hasOwnProperty.call(N,a)||(N[a]=[]),N[a].push(function(){e[b]=O[a],++g,g===f.length&&d(e)}))});0===f.length&&d(e)}function S(a,b,c){c===void 0&&(c={});if(!("argPackAdvance"in b))throw new TypeError("registerType registeredInstance requires argPackAdvance");var d=b.name;a||Q('type "'+d+'" must have a positive integer typeid pointer');if(Object.prototype.hasOwnProperty.call(O,a))if(c.ignoreDuplicateRegistrations)return;else Q("Cannot register type '"+d+"' twice");O[a]=b;delete wb[a];if(Object.prototype.hasOwnProperty.call(N,a)){c=N[a];delete N[a];c.forEach(function(a){a()})}}function Eb(a,b,c,d,e){var f=tb(c);b=M(b);S(a,{name:b,fromWireType:function(a){return!!a},toWireType:function(a,b){return b?d:e},argPackAdvance:8,readValueFromPointer:function(a){var d;if(c===1)d=u;else if(c===2)d=w;else if(c===4)d=x;else throw new TypeError("Unknown boolean type size: "+b);return this.fromWireType(d[a>>f])},destructorFunction:null})}function Fb(a){if(!(this instanceof T))return!1;if(!(a instanceof T))return!1;var b=this.$$.ptrType.registeredClass,c=this.$$.ptr,d=a.$$.ptrType.registeredClass;a=a.$$.ptr;while(b.baseClass)c=b.upcast(c),b=b.baseClass;while(d.baseClass)a=d.upcast(a),d=d.baseClass;return b===d&&c===a}function Gb(a){return{count:a.count,deleteScheduled:a.deleteScheduled,preservePointerOnDelete:a.preservePointerOnDelete,ptr:a.ptr,ptrType:a.ptrType,smartPtr:a.smartPtr,smartPtrType:a.smartPtrType}}function Hb(a){function b(a){return a.$$.ptrType.registeredClass.name}Q(b(a)+" instance already deleted")}var Ib=!1;function Jb(a){}function Kb(a){a.smartPtr?a.smartPtrType.rawDestructor(a.smartPtr):a.ptrType.registeredClass.rawDestructor(a.ptr)}function Lb(a){a.count.value-=1;var b=0===a.count.value;b&&Kb(a)}function Mb(a){if("undefined"===typeof FinalizationGroup){Mb=function(a){return a};return a}Ib=new FinalizationGroup(function(a){for(var b=a.next();!b.done;b=a.next()){var c=b.value;c.ptr&&Lb(c)}});Mb=function(a){Ib.register(a,a.$$,a.$$);return a};Jb=function(a){Ib.unregister(a.$$)};return Mb(a)}function Nb(){this.$$.ptr||Hb(this);if(this.$$.preservePointerOnDelete){this.$$.count.value+=1;return this}else{var a=Mb(Object.create(Object.getPrototypeOf(this),{$$:{value:Gb(this.$$)}}));a.$$.count.value+=1;a.$$.deleteScheduled=!1;return a}}function Ob(){this.$$.ptr||Hb(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Q("Object already scheduled for deletion"),Jb(this),Lb(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Pb(){return!this.$$.ptr}var Qb=void 0,Rb=[];function Sb(){while(Rb.length){var a=Rb.pop();a.$$.deleteScheduled=!1;a["delete"]()}}function Tb(){this.$$.ptr||Hb(this);this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Q("Object already scheduled for deletion");Rb.push(this);Rb.length===1&&Qb&&Qb(Sb);this.$$.deleteScheduled=!0;return this}function Ub(){T.prototype.isAliasOf=Fb,T.prototype.clone=Nb,T.prototype["delete"]=Ob,T.prototype.isDeleted=Pb,T.prototype.deleteLater=Tb}function T(){}var Vb={};function Wb(a,b,c){if(void 0===a[b].overloadTable){var d=a[b];a[b]=function(){Object.prototype.hasOwnProperty.call(a[b].overloadTable,arguments.length)||Q("Function '"+c+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+a[b].overloadTable+")!");return a[b].overloadTable[arguments.length].apply(this,arguments)};a[b].overloadTable=[];a[b].overloadTable[d.argCount]=d}}function Xb(a,b,d){Object.prototype.hasOwnProperty.call(c,a)?((void 0===d||void 0!==c[a].overloadTable&&void 0!==c[a].overloadTable[d])&&Q("Cannot register public name '"+a+"' twice"),Wb(c,a,a),Object.prototype.hasOwnProperty.call(c,d)&&Q("Cannot register multiple overloads of a function with the same number of arguments ("+d+")!"),c[a].overloadTable[d]=b):(c[a]=b,void 0!==d&&(c[a].numArguments=d))}function Yb(a,b,c,d,e,f,g,h){this.name=a,this.constructor=b,this.instancePrototype=c,this.rawDestructor=d,this.baseClass=e,this.getActualType=f,this.upcast=g,this.downcast=h,this.pureVirtualFunctions=[]}function Zb(a,b,c){while(b!==c)b.upcast||Q("Expected null or instance of "+c.name+", got an instance of "+b.name),a=b.upcast(a),b=b.baseClass;return a}function $b(a,b){if(b===null){this.isReference&&Q("null is not a valid "+this.name);return 0}b.$$||Q('Cannot pass "'+Lc(b)+'" as a '+this.name);b.$$.ptr||Q("Cannot pass deleted object as a pointer of type "+this.name);a=b.$$.ptrType.registeredClass;b=Zb(b.$$.ptr,a,this.registeredClass);return b}function ac(a,b){var c;if(b===null){this.isReference&&Q("null is not a valid "+this.name);if(this.isSmartPointer){c=this.rawConstructor();a!==null&&a.push(this.rawDestructor,c);return c}else return 0}b.$$||Q('Cannot pass "'+Lc(b)+'" as a '+this.name);b.$$.ptr||Q("Cannot pass deleted object as a pointer of type "+this.name);!this.isConst&&b.$$.ptrType.isConst&&Q("Cannot convert argument of type "+(b.$$.smartPtrType?b.$$.smartPtrType.name:b.$$.ptrType.name)+" to parameter type "+this.name);var d=b.$$.ptrType.registeredClass;c=Zb(b.$$.ptr,d,this.registeredClass);if(this.isSmartPointer){void 0===b.$$.smartPtr&&Q("Passing raw pointer to smart pointer is illegal");switch(this.sharingPolicy){case 0:b.$$.smartPtrType===this?c=b.$$.smartPtr:Q("Cannot convert argument of type "+(b.$$.smartPtrType?b.$$.smartPtrType.name:b.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:c=b.$$.smartPtr;break;case 2:if(b.$$.smartPtrType===this)c=b.$$.smartPtr;else{var e=b.clone();c=this.rawShare(c,Jc.toHandle(function(){e["delete"]()}));a!==null&&a.push(this.rawDestructor,c)}break;default:Q("Unsupporting sharing policy")}}return c}function bc(a,b){if(b===null){this.isReference&&Q("null is not a valid "+this.name);return 0}b.$$||Q('Cannot pass "'+Lc(b)+'" as a '+this.name);b.$$.ptr||Q("Cannot pass deleted object as a pointer of type "+this.name);b.$$.ptrType.isConst&&Q("Cannot convert argument of type "+b.$$.ptrType.name+" to parameter type "+this.name);a=b.$$.ptrType.registeredClass;b=Zb(b.$$.ptr,a,this.registeredClass);return b}function cc(a){return this.fromWireType(y[a>>2])}function dc(a){this.rawGetPointee&&(a=this.rawGetPointee(a));return a}function ec(a){this.rawDestructor&&this.rawDestructor(a)}function fc(a){a!==null&&a["delete"]()}function gc(a,b,c){if(b===c)return a;if(void 0===c.baseClass)return null;a=gc(a,b,c.baseClass);return a===null?null:c.downcast(a)}function hc(){return Object.keys(lc).length}function ic(){var a=[];for(var b in lc)Object.prototype.hasOwnProperty.call(lc,b)&&a.push(lc[b]);return a}function jc(a){Qb=a,Rb.length&&Qb&&Qb(Sb)}function kc(){c.getInheritedInstanceCount=hc,c.getLiveInheritedInstances=ic,c.flushPendingDeletes=Sb,c.setDelayFunction=jc}var lc={};function mc(a,b){b===void 0&&Q("ptr should not be undefined");while(a.baseClass)b=a.upcast(b),a=a.baseClass;return b}function nc(a,b){b=mc(a,b);return lc[b]}function oc(a,b){(!b.ptrType||!b.ptr)&&Db("makeClassHandle requires ptr and ptrType");var c=!!b.smartPtrType,d=!!b.smartPtr;c!==d&&Db("Both smartPtrType and smartPtr must be specified");b.count={value:1};return Mb(Object.create(a,{$$:{value:b}}))}function pc(a){var b=this.getPointee(a);if(!b){this.destructor(a);return null}var c=nc(this.registeredClass,b);if(void 0!==c)if(0===c.$$.count.value){c.$$.ptr=b;c.$$.smartPtr=a;return c.clone()}else{c=c.clone();this.destructor(a);return c}function d(){if(this.isSmartPointer)return oc(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:b,smartPtrType:this,smartPtr:a});else return oc(this.registeredClass.instancePrototype,{ptrType:this,ptr:a})}c=this.registeredClass.getActualType(b);c=Vb[c];if(!c)return d.call(this);var e;this.isConst?e=c.constPointerType:e=c.pointerType;c=gc(b,this.registeredClass,e.registeredClass);if(c===null)return d.call(this);if(this.isSmartPointer)return oc(e.registeredClass.instancePrototype,{ptrType:e,ptr:c,smartPtrType:this,smartPtr:a});else return oc(e.registeredClass.instancePrototype,{ptrType:e,ptr:c})}function qc(){U.prototype.getPointee=dc,U.prototype.destructor=ec,U.prototype.argPackAdvance=8,U.prototype.readValueFromPointer=cc,U.prototype.deleteObject=fc,U.prototype.fromWireType=pc}function U(a,b,c,d,e,f,g,h,i,j,k){this.name=a,this.registeredClass=b,this.isReference=c,this.isConst=d,this.isSmartPointer=e,this.pointeeType=f,this.sharingPolicy=g,this.rawGetPointee=h,this.rawConstructor=i,this.rawShare=j,this.rawDestructor=k,!e&&b.baseClass===void 0?d?(this.toWireType=$b,this.destructorFunction=null):(this.toWireType=bc,this.destructorFunction=null):this.toWireType=ac}function rc(a,b,d){Object.prototype.hasOwnProperty.call(c,a)||Db("Replacing nonexistant public symbol"),void 0!==c[a].overloadTable&&void 0!==d?c[a].overloadTable[d]=b:(c[a]=b,c[a].argCount=d)}function sc(a,b,d){a=c["dynCall_"+a];return d&&d.length?a.apply(null,[b].concat(d)):a.call(null,b)}function tc(a,b,c){return a.includes("j")?sc(a,b,c):E(b).apply(null,c)}function uc(a,b){var c=[];return function(){c.length=arguments.length;for(var d=0;d<arguments.length;d++)c[d]=arguments[d];return tc(a,b,c)}}function V(a,b){a=M(a);function c(){return a.includes("j")?uc(a,b):E(b)}c=c();typeof c!=="function"&&Q("unknown function pointer with signature "+a+": "+b);return c}var vc=void 0;function wc(a){a=xd(a);var b=M(a);X(a);return b}function xc(a,b){var c=[],d={};function e(a){if(d[a])return;if(O[a])return;if(wb[a]){wb[a].forEach(e);return}c.push(a);d[a]=!0}b.forEach(e);throw new vc(a+": "+c.map(wc).join([", "]))}function yc(a,b,c,d,e,f,g,h,i,j,k,l,m){k=M(k);f=V(e,f);h&&(h=V(g,h));j&&(j=V(i,j));m=V(l,m);var n=zb(k);Xb(n,function(){xc("Cannot construct "+k+" due to unbound types",[d])});R([a,b,c],d?[d]:[],function(b){b=b[0];var c;d?(c=b.registeredClass,b=c.instancePrototype):b=T.prototype;var e=Ab(n,function(){if(Object.getPrototypeOf(this)!==g)throw new P("Use 'new' to construct "+k);if(void 0===i.constructor_body)throw new P(k+" has no accessible constructor");var a=i.constructor_body[arguments.length];if(void 0===a)throw new P("Tried to invoke ctor of "+k+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(i.constructor_body).toString()+") parameters instead!");return a.apply(this,arguments)}),g=Object.create(b,{constructor:{value:e}});e.prototype=g;var i=new Yb(k,e,g,m,c,f,h,j);b=new U(k,i,!0,!1,!1);var l=new U(k+"*",i,!1,!1,!1),o=new U(k+" const*",i,!1,!0,!1);Vb[a]={pointerType:l,constPointerType:o};rc(n,e);return[b,l,o]})}function zc(a,b){var c=[];for(var d=0;d<a;d++)c.push(x[(b>>2)+d]);return c}function Ac(a){while(a.length){var b=a.pop(),c=a.pop();c(b)}}function Bc(a,b,c,d,e,f){ja(b>0);var g=zc(b,c);e=V(d,e);R([],[a],function(a){a=a[0];var c="constructor "+a.name;void 0===a.registeredClass.constructor_body&&(a.registeredClass.constructor_body=[]);if(void 0!==a.registeredClass.constructor_body[b-1])throw new P("Cannot register multiple constructors with identical number of parameters ("+(b-1)+") for class '"+a.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");a.registeredClass.constructor_body[b-1]=function(){xc("Cannot construct "+a.name+" due to unbound types",g)};R([],g,function(d){d.splice(1,0,null);a.registeredClass.constructor_body[b-1]=Cc(c,d,null,e,f);return[]});return[]})}function Cc(a,b,c,d,e){var f=b.length;f<2&&Q("argTypes array size mismatch! Must at least get return value and 'this' types!");var g=b[1]!==null&&c!==null,h=!1;for(c=1;c<b.length;++c)if(b[c]!==null&&b[c].destructorFunction===void 0){h=!0;break}var i=b[0].name!=="void",j=f-2,k=new Array(j),l=[],m=[];return function(){arguments.length!==j&&Q("function "+a+" called with "+arguments.length+" arguments, expected "+j+" args!");m.length=0;var c;l.length=g?2:1;l[0]=e;g&&(c=b[1].toWireType(m,this),l[1]=c);for(var f=0;f<j;++f)k[f]=b[f+2].toWireType(m,arguments[f]),l.push(k[f]);var n=d.apply(null,l);function o(d){if(h)Ac(m);else for(var a=g?1:2;a<b.length;a++){var e=a===1?c:k[a-2];b[a].destructorFunction!==null&&b[a].destructorFunction(e)}if(i)return b[0].fromWireType(d)}return o(n)}}function Dc(a,b,c,d,e,f,g,h){var i=zc(c,d);b=M(b);f=V(e,f);R([],[a],function(a){a=a[0];var d=a.name+"."+b;b.startsWith("@@")&&(b=Symbol[b.substring(2)]);h&&a.registeredClass.pureVirtualFunctions.push(b);function e(){xc("Cannot call "+d+" due to unbound types",i)}var j=a.registeredClass.instancePrototype,k=j[b];void 0===k||void 0===k.overloadTable&&k.className!==a.name&&k.argCount===c-2?(e.argCount=c-2,e.className=a.name,j[b]=e):(Wb(j,b,d),j[b].overloadTable[c-2]=e);R([],i,function(e){e=Cc(d,e,a,f,g);void 0===j[b].overloadTable?(e.argCount=c-2,j[b]=e):j[b].overloadTable[c-2]=e;return[]});return[]})}var Ec=[],W=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Fc(a){a>4&&0===--W[a].refcount&&(W[a]=void 0,Ec.push(a))}function Gc(){var a=0;for(var b=5;b<W.length;++b)W[b]!==void 0&&++a;return a}function Hc(){for(var a=5;a<W.length;++a)if(W[a]!==void 0)return W[a];return null}function Ic(){c.count_emval_handles=Gc,c.get_first_emval=Hc}var Jc={toValue:function(a){a||Q("Cannot use deleted val. handle = "+a);return W[a].value},toHandle:function(a){switch(a){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var b=Ec.length?Ec.pop():W.length;W[b]={refcount:1,value:a};return b}}};function Kc(a,b){b=M(b),S(a,{name:b,fromWireType:function(a){var b=Jc.toValue(a);Fc(a);return b},toWireType:function(a,b){return Jc.toHandle(b)},argPackAdvance:8,readValueFromPointer:cc,destructorFunction:null})}function Lc(a){if(a===null)return"null";var b=typeof a;if(b==="object"||b==="array"||b==="function")return a.toString();else return""+a}function Mc(a,b){switch(b){case 2:return function(a){return this.fromWireType(Aa[a>>2])};case 3:return function(a){return this.fromWireType(Ba[a>>3])};default:throw new TypeError("Unknown float type: "+a)}}function Nc(a,b,c){c=tb(c);b=M(b);S(a,{name:b,fromWireType:function(a){return a},toWireType:function(a,b){return b},argPackAdvance:8,readValueFromPointer:Mc(b,c),destructorFunction:null})}function Oc(a,b,c,d,e,f){var g=zc(b,c);a=M(a);e=V(d,e);Xb(a,function(){xc("Cannot call "+a+" due to unbound types",g)},b-1);R([],g,function(c){c=[c[0],null].concat(c.slice(1));rc(a,Cc(a,c,null,e,f),b-1);return[]})}function Pc(a,b,c){switch(b){case 0:return c?function(a){return u[a]}:function(a){return v[a]};case 1:return c?function(a){return w[a>>1]}:function(a){return za[a>>1]};case 2:return c?function(a){return x[a>>2]}:function(a){return y[a>>2]};default:throw new TypeError("Unknown integer type: "+a)}}function Qc(a,b,c,d,e){b=M(b);e===-1&&(e=4294967295);e=tb(c);var f=function(a){return a};if(d===0){var g=32-8*c;f=function(a){return a<<g>>>g}}c=b.includes("unsigned");var h=function(a,b){};c?c=function(a,b){h(b,this.name);return b>>>0}:c=function(a,b){h(b,this.name);return b};S(a,{name:b,fromWireType:f,toWireType:c,argPackAdvance:8,readValueFromPointer:Pc(b,e,d!==0),destructorFunction:null})}function Rc(a,b,c){var d=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],e=d[b];function f(a){a=a>>2;var b=y,c=b[a];b=b[a+1];return new e(ya,b,c)}c=M(c);S(a,{name:c,fromWireType:f,argPackAdvance:8,readValueFromPointer:f},{ignoreDuplicateRegistrations:!0})}function Sc(a,b){b=M(b);var c=b==="std::string";S(a,{name:b,fromWireType:function(a){var b=y[a>>2],d;if(c){var e=a+4;for(var f=0;f<=b;++f){var g=a+4+f;if(f==b||v[g]==0){var h=g-e;h=la(e,h);d===void 0?d=h:(d+=String.fromCharCode(0),d+=h);e=g+1}}}else{h=new Array(b);for(var f=0;f<b;++f)h[f]=String.fromCharCode(v[a+4+f]);d=h.join("")}X(a);return d},toWireType:function(a,b){b instanceof ArrayBuffer&&(b=new Uint8Array(b));var d,e=typeof b==="string";e||b instanceof Uint8Array||b instanceof Uint8ClampedArray||b instanceof Int8Array||Q("Cannot pass non-string to std::string");c&&e?d=function(){return oa(b)}:d=function(){return b.length};d=d();var f=wd(4+d+1);y[f>>2]=d;if(c&&e)na(b,f+4,d+1);else if(e)for(e=0;e<d;++e){var g=b.charCodeAt(e);g>255&&(X(f),Q("String has UTF-16 code units that do not fit in 8 bits"));v[f+4+e]=g}else for(e=0;e<d;++e)v[f+4+e]=b[e];a!==null&&a.push(X,f);return f},argPackAdvance:8,readValueFromPointer:cc,destructorFunction:function(a){X(a)}})}function Tc(a,b,c){c=M(c);var d,e,f,g,h;b===2?(d=qa,e=ra,g=sa,f=function(){return za},h=1):b===4&&(d=ta,e=ua,g=va,f=function(){return y},h=2);S(a,{name:c,fromWireType:function(a){var c=y[a>>2],e=f(),g,i=a+4;for(var j=0;j<=c;++j){var k=a+4+j*b;if(j==c||e[k>>h]==0){var l=k-i;l=d(i,l);g===void 0?g=l:(g+=String.fromCharCode(0),g+=l);i=k+b}}X(a);return g},toWireType:function(a,d){typeof d==="string"||Q("Cannot pass non-string to C++ string type "+c);var f=g(d),i=wd(4+f+b);y[i>>2]=f>>h;e(d,i+4,f+b);a!==null&&a.push(X,i);return i},argPackAdvance:8,readValueFromPointer:cc,destructorFunction:function(a){X(a)}})}function Uc(a,b){b=M(b),S(a,{isVoid:!0,name:b,argPackAdvance:0,fromWireType:function(){return void 0},toWireType:function(a,b){return void 0}})}function Vc(a){a>4&&(W[a].refcount+=1)}function Wc(a,b){var c=O[a];void 0===c&&Q(b+" has unknown type "+wc(a));return c}function Xc(a,b){a=Wc(a,"_emval_take_value");a=a.readValueFromPointer(b);return Jc.toHandle(a)}function Yc(){A("")}function Zc(a){A("OOM")}function $c(a){v.length,a=a>>>0,Zc(a)}var ad={};function bd(){return m||"./this.program"}function cd(){if(!cd.strings){var a=(typeof navigator==="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8";a={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:a,_:bd()};for(var b in ad)ad[b]===void 0?delete a[b]:a[b]=ad[b];var c=[];for(var b in a)c.push(b+"="+a[b]);cd.strings=c}return cd.strings}function dd(a,b){var c=0;cd().forEach(function(d,e){var f=b+c;x[a+e*4>>2]=f;xa(d,f);c+=d.length+1});return 0}function ed(a,b){var c=cd();x[a>>2]=c.length;var d=0;c.forEach(function(a){d+=a.length+1});x[b>>2]=d;return 0}function fd(a){try{a=L.getStreamFromFD(a);K.close(a);return 0}catch(a){if(typeof K==="undefined"||!(a instanceof K.ErrnoError))throw a;return a.errno}}function gd(a,b,c,d){try{a=L.getStreamFromFD(a);a=L.doReadv(a,b,c);x[d>>2]=a;return 0}catch(a){if(typeof K==="undefined"||!(a instanceof K.ErrnoError))throw a;return a.errno}}function hd(a,b,c,d,e){try{a=L.getStreamFromFD(a);var f=4294967296;c=c*f+(b>>>0);f=9007199254740992;if(c<=-f||c>=f)return-61;K.llseek(a,c,d);D=[a.position>>>0,(C=a.position,+Math.abs(C)>=1?C>0?(Math.min(+Math.floor(C/4294967296),4294967295)|0)>>>0:~~+Math.ceil((C-+(~~C>>>0))/4294967296)>>>0:0)],x[e>>2]=D[0],x[e+4>>2]=D[1];a.getdents&&c===0&&d===0&&(a.getdents=null);return 0}catch(a){if(typeof K==="undefined"||!(a instanceof K.ErrnoError))throw a;return a.errno}}function id(a,b,c,d){try{a=L.getStreamFromFD(a);a=L.doWritev(a,b,c);x[d>>2]=a;return 0}catch(a){if(typeof K==="undefined"||!(a instanceof K.ErrnoError))throw a;return a.errno}}function jd(){return ga()}function kd(a){r(a)}function ld(a){return a%4===0&&(a%100!==0||a%400===0)}function md(a,b){var c=0;for(var d=0;d<=b;c+=a[d++]);return c}var nd=[31,29,31,30,31,30,31,31,30,31,30,31],od=[31,28,31,30,31,30,31,31,30,31,30,31];function pd(a,b){a=new Date(a.getTime());while(b>0){var c=ld(a.getFullYear()),d=a.getMonth();c=(c?nd:od)[d];if(b>c-a.getDate())b-=c-a.getDate()+1,a.setDate(1),d<11?a.setMonth(d+1):(a.setMonth(0),a.setFullYear(a.getFullYear()+1));else{a.setDate(a.getDate()+b);return a}}return a}function qd(a,b,c,d){var e=x[d+40>>2];d={tm_sec:x[d>>2],tm_min:x[d+4>>2],tm_hour:x[d+8>>2],tm_mday:x[d+12>>2],tm_mon:x[d+16>>2],tm_year:x[d+20>>2],tm_wday:x[d+24>>2],tm_yday:x[d+28>>2],tm_isdst:x[d+32>>2],tm_gmtoff:x[d+36>>2],tm_zone:e?la(e):""};e=la(c);c={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var f in c)e=e.replace(new RegExp(f,"g"),c[f]);var g=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],h=["January","February","March","April","May","June","July","August","September","October","November","December"];function i(a,b,c){a=typeof a==="number"?a.toString():a||"";while(a.length<b)a=c[0]+a;return a}function j(a,b){return i(a,b,"0")}function k(a,b){function c(a){return a<0?-1:a>0?1:0}var d;(d=c(a.getFullYear()-b.getFullYear()))===0&&((d=c(a.getMonth()-b.getMonth()))===0&&(d=c(a.getDate()-b.getDate())));return d}function l(a){switch(a.getDay()){case 0:return new Date(a.getFullYear()-1,11,29);case 1:return a;case 2:return new Date(a.getFullYear(),0,3);case 3:return new Date(a.getFullYear(),0,2);case 4:return new Date(a.getFullYear(),0,1);case 5:return new Date(a.getFullYear()-1,11,31);case 6:return new Date(a.getFullYear()-1,11,30)}}function m(a){a=pd(new Date(a.tm_year+1900,0,1),a.tm_yday);var b=new Date(a.getFullYear(),0,4),c=new Date(a.getFullYear()+1,0,4);b=l(b);c=l(c);if(k(b,a)<=0)if(k(c,a)<=0)return a.getFullYear()+1;else return a.getFullYear();else return a.getFullYear()-1}c={"%a":function(a){return g[a.tm_wday].substring(0,3)},"%A":function(a){return g[a.tm_wday]},"%b":function(a){return h[a.tm_mon].substring(0,3)},"%B":function(a){return h[a.tm_mon]},"%C":function(a){a=a.tm_year+1900;return j(a/100|0,2)},"%d":function(a){return j(a.tm_mday,2)},"%e":function(a){return i(a.tm_mday,2," ")},"%g":function(a){return m(a).toString().substring(2)},"%G":function(a){return m(a)},"%H":function(a){return j(a.tm_hour,2)},"%I":function(a){a=a.tm_hour;a==0?a=12:a>12&&(a-=12);return j(a,2)},"%j":function(a){return j(a.tm_mday+md(ld(a.tm_year+1900)?nd:od,a.tm_mon-1),3)},"%m":function(a){return j(a.tm_mon+1,2)},"%M":function(a){return j(a.tm_min,2)},"%n":function(){return"\n"},"%p":function(a){if(a.tm_hour>=0&&a.tm_hour<12)return"AM";else return"PM"},"%S":function(a){return j(a.tm_sec,2)},"%t":function(){return"\t"},"%u":function(a){return a.tm_wday||7},"%U":function(a){var b=new Date(a.tm_year+1900,0,1),c=b.getDay()===0?b:pd(b,7-b.getDay());a=new Date(a.tm_year+1900,a.tm_mon,a.tm_mday);if(k(c,a)<0){var d=md(ld(a.getFullYear())?nd:od,a.getMonth()-1)-31,e=31-c.getDate();e=e+d+a.getDate();return j(Math.ceil(e/7),2)}return k(c,b)===0?"01":"00"},"%V":function(a){var b=new Date(a.tm_year+1900,0,4),c=new Date(a.tm_year+1901,0,4);b=l(b);c=l(c);var d=pd(new Date(a.tm_year+1900,0,1),a.tm_yday);if(k(d,b)<0)return"53";if(k(c,d)<=0)return"01";b.getFullYear()<a.tm_year+1900?c=a.tm_yday+32-b.getDate():c=a.tm_yday+1-b.getDate();return j(Math.ceil(c/7),2)},"%w":function(a){return a.tm_wday},"%W":function(a){var b=new Date(a.tm_year,0,1),c=b.getDay()===1?b:pd(b,b.getDay()===0?1:7-b.getDay()+1);a=new Date(a.tm_year+1900,a.tm_mon,a.tm_mday);if(k(c,a)<0){var d=md(ld(a.getFullYear())?nd:od,a.getMonth()-1)-31,e=31-c.getDate();e=e+d+a.getDate();return j(Math.ceil(e/7),2)}return k(c,b)===0?"01":"00"},"%y":function(a){return(a.tm_year+1900).toString().substring(2)},"%Y":function(a){return a.tm_year+1900},"%z":function(a){a=a.tm_gmtoff;var b=a>=0;a=Math.abs(a)/60;a=a/60*100+a%60;return(b?"+":"-")+String("0000"+a).slice(-4)},"%Z":function(a){return a.tm_zone},"%%":function(){return"%"}};for(var f in c)e.includes(f)&&(e=e.replace(new RegExp(f,"g"),c[f](d)));c=ud(e,!1);if(c.length>b)return 0;wa(c,a);return c.length-1}function rd(a,b,c,d){return qd(a,b,c,d)}d=function(a,b,c,d){a||(a=this),this.parent=a,this.mount=a.mount,this.mounted=null,this.id=K.nextInode++,this.name=b,this.mode=c,this.node_ops={},this.stream_ops={},this.rdev=d};var sd=292|73,td=146;Object.defineProperties(d.prototype,{read:{get:function(){return(this.mode&sd)===sd},set:function(a){a?this.mode|=sd:this.mode&=~sd}},write:{get:function(){return(this.mode&td)===td},set:function(a){a?this.mode|=td:this.mode&=~td}},isFolder:{get:function(){return K.isDir(this.mode)}},isDevice:{get:function(){return K.isChrdev(this.mode)}}});K.FSNode=d;K.staticInit();ub();P=c.BindingError=Bb(Error,"BindingError");Cb=c.InternalError=Bb(Error,"InternalError");Ub();qc();kc();vc=c.UnboundTypeError=Bb(Error,"UnboundTypeError");Ic();function ud(a,b,c){c=c>0?c:oa(a)+1;c=new Array(c);a=ma(a,c,0,c.length);b&&(c.length=a);return c}var vd={p:Ya,t:db,w:gb,b:ib,g:jb,x:eb,K:kb,u:lb,Y:mb,d:hb,ba:qb,_:rb,U:sb,da:Eb,z:yc,y:Bc,o:Dc,ca:Kc,N:Nc,ga:Oc,s:Qc,m:Rc,M:Sc,G:Tc,ea:Uc,fa:Fc,R:Vc,Q:Xc,C:Yc,Z:$c,$:dd,aa:ed,W:fd,L:gd,T:hd,F:id,a:jd,H:Qd,I:Pd,l:Rd,c:Dd,e:Gd,k:Hd,h:Md,X:Nd,q:Fd,J:Od,P:Jd,B:Td,S:Wd,i:Kd,r:Ed,f:Bd,j:Cd,D:Id,O:Ld,n:Sd,v:Ud,A:Vd,E:kd,V:rd};Wa();c.___wasm_call_ctors=function(){return(c.___wasm_call_ctors=c.asm.ia).apply(null,arguments)};c._bytearray_free=function(){return(c._bytearray_free=c.asm.ja).apply(null,arguments)};var X=c._free=function(){return(X=c._free=c.asm.la).apply(null,arguments)},wd=c._malloc=function(){return(wd=c._malloc=c.asm.ma).apply(null,arguments)},xd=c.___getTypeName=function(){return(xd=c.___getTypeName=c.asm.na).apply(null,arguments)};c.___embind_register_native_and_builtin_types=function(){return(c.___embind_register_native_and_builtin_types=c.asm.oa).apply(null,arguments)};var Y=c._setThrew=function(){return(Y=c._setThrew=c.asm.pa).apply(null,arguments)},Z=c.stackSave=function(){return(Z=c.stackSave=c.asm.qa).apply(null,arguments)},$=c.stackRestore=function(){return($=c.stackRestore=c.asm.ra).apply(null,arguments)},yd=c.___cxa_can_catch=function(){return(yd=c.___cxa_can_catch=c.asm.sa).apply(null,arguments)},zd=c.___cxa_is_pointer_type=function(){return(zd=c.___cxa_is_pointer_type=c.asm.ta).apply(null,arguments)};c.dynCall_ji=function(){return(c.dynCall_ji=c.asm.ua).apply(null,arguments)};c.dynCall_viijii=function(){return(c.dynCall_viijii=c.asm.va).apply(null,arguments)};c.dynCall_jiji=function(){return(c.dynCall_jiji=c.asm.wa).apply(null,arguments)};var Ad=c.dynCall_jiiii=function(){return(Ad=c.dynCall_jiiii=c.asm.xa).apply(null,arguments)};c.dynCall_iiiiij=function(){return(c.dynCall_iiiiij=c.asm.ya).apply(null,arguments)};c.dynCall_iiiiijj=function(){return(c.dynCall_iiiiijj=c.asm.za).apply(null,arguments)};c.dynCall_iiiiiijj=function(){return(c.dynCall_iiiiiijj=c.asm.Aa).apply(null,arguments)};function Bd(a,b,c){var d=Z();try{E(a)(b,c)}catch(a){$(d);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Cd(a,b,c,d){var e=Z();try{E(a)(b,c,d)}catch(a){$(e);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Dd(a,b){var c=Z();try{return E(a)(b)}catch(a){$(c);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Ed(a,b){var c=Z();try{E(a)(b)}catch(a){$(c);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Fd(a,b,c,d,e,f,g){var h=Z();try{return E(a)(b,c,d,e,f,g)}catch(a){$(h);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Gd(a,b,c){var d=Z();try{return E(a)(b,c)}catch(a){$(d);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Hd(a,b,c,d){var e=Z();try{return E(a)(b,c,d)}catch(a){$(e);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Id(a,b,c,d,e){var f=Z();try{E(a)(b,c,d,e)}catch(a){$(f);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Jd(a,b,c,d,e,f,g,h,i){var j=Z();try{return E(a)(b,c,d,e,f,g,h,i)}catch(a){$(j);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Kd(a){var b=Z();try{E(a)()}catch(a){$(b);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Ld(a,b,c,d,e,f){var g=Z();try{E(a)(b,c,d,e,f)}catch(a){$(g);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Md(a,b,c,d,e){var f=Z();try{return E(a)(b,c,d,e)}catch(a){$(f);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Nd(a,b,c,d,e,f){var g=Z();try{return E(a)(b,c,d,e,f)}catch(a){$(g);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Od(a,b,c,d,e,f,g,h){var i=Z();try{return E(a)(b,c,d,e,f,g,h)}catch(a){$(i);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Pd(a,b,c,d){var e=Z();try{return E(a)(b,c,d)}catch(a){$(e);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Qd(a,b,c,d){var e=Z();try{return E(a)(b,c,d)}catch(a){$(e);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Rd(a){var b=Z();try{return E(a)()}catch(a){$(b);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Sd(a,b,c,d,e,f,g,h){var i=Z();try{E(a)(b,c,d,e,f,g,h)}catch(a){$(i);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Td(a,b,c,d,e,f,g,h,i,j,k,l){var m=Z();try{return E(a)(b,c,d,e,f,g,h,i,j,k,l)}catch(a){$(m);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Ud(a,b,c,d,e,f,g,h,i,j,k){var l=Z();try{E(a)(b,c,d,e,f,g,h,i,j,k)}catch(a){$(l);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Vd(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var aa=Z();try{E(a)(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p)}catch(a){$(aa);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}function Wd(a,b,c,d,e){var f=Z();try{return Ad(a,b,c,d,e)}catch(a){$(f);if(a!==a+0&&a!=="longjmp")throw a;Y(1,0)}}var Xd;Oa=function a(){Xd||Yd(),Xd||(Oa=a)};function Yd(a){a||l;if(z>0)return;Ha();if(z>0)return;function b(){if(Xd)return;Xd=!0;c.calledRun=!0;if(ia)return;Ia();i(c);c.onRuntimeInitialized&&c.onRuntimeInitialized();Ja()}c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),b()},1)):b()}c.run=Yd;if(c.preInit){typeof c.preInit=="function"&&(c.preInit=[c.preInit]);while(c.preInit.length>0)c.preInit.pop()()}Yd();return c.ready}}();typeof f==="object"&&typeof e==="object"?e.exports=h:typeof define==="function"&&define.amd?define([],function(){return h}):typeof f==="object"&&(f.Module=h)}),null);
__d("PakeCpaceWasm",["PakeCpaceUtils","Promise","bx","err","pakeCpace"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var e={locateFile:function(){return c("bx").getURL(c("bx")("20913"))},wasmBinary:a};return new(h||(h=b("Promise")))(function(a){c("pakeCpace")(e).then(function(b){return a({clientBegin:function(a,c,d){var e=0;try{e=a.clientBegin(c,d);a=b.getInt8Array(e);return a}finally{b._bytearray_free(e)}},clientFinalize:function(a,c){var e=0,f=0;try{c=d("PakeCpaceUtils").uint8ArrayToVectorInt(b,c);a=a.clientFinalize(c);e=a.getKey1Ptr();c=b.getInt8Array(e);f=a.getKey2Ptr();a=b.getInt8Array(f);return{clientKey1:c,clientKey2:a}}finally{b._bytearray_free(e),b._bytearray_free(f)}},createCPaceClient:function(a){return new b.PAKEClient(a)},createCPaceServer:function(a){return new b.PAKEServer(a)},serverHandleClientStepOnePacket:function(a,c,e,f){var g=0,h=0,i=0;try{e=d("PakeCpaceUtils").uint8ArrayToVectorInt(b,e);a=a.handleClientStepOnePacket(c,e,f);g=a.getKey1Ptr();c=b.getInt8Array(g);h=a.getKey2Ptr();e=b.getInt8Array(h);i=a.getPacketPtr();f=b.getInt8Array(i);return{serverKey1:c,serverKey2:e,stepTwoPacket:f}}finally{b._bytearray_free(g),b._bytearray_free(h),b._bytearray_free(i)}}})})["catch"](function(a){throw c("err")("Failed to initialize wasm module, "+a)})})}g.PakeCPaceWasm=a}),98);
__d("PakeInitiatorSprocCalls",["LSDecryptPakeSecretStoredProcedure","LSFactory","LSGetActiveSessionStoredProcedure","LSIntEnum","LSSendPakeMessageOneStoredProcedure","LSSendPakeMessageStoredProcedure","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=a.clientType,e=a.initiatorId,g=a.messagePayload,i=a.sessionId;a=a.storage;c("promiseDone")(a.runInTransaction(function(a){return c("LSSendPakeMessageOneStoredProcedure")(c("LSFactory")(a),{clientType:(h||(h=d("LSIntEnum"))).ofNumber(b),initiatorId:e,messagePayload:g,sessionId:i})},"readwrite",void 0,void 0,f.id+":45"))}function b(a){var b=a.clientType,e=a.initiatorId;a=a.storage;return a.runInTransaction(function(a){return c("LSGetActiveSessionStoredProcedure")(c("LSFactory")(a),{clientType:(h||(h=d("LSIntEnum"))).ofNumber(b),initiatorId:e})},"readwrite",void 0,void 0,f.id+":71")}function e(a){var b=a.clientType,e=a.encryptionKey,g=a.sessionId;a=a.storage;return a.runInTransaction(function(a){return c("LSDecryptPakeSecretStoredProcedure")(c("LSFactory")(a),{clientType:(h||(h=d("LSIntEnum"))).ofNumber(b),encryptionKey:e,sessionId:g})},"readwrite",void 0,void 0,f.id+":92")}function i(a){var b=a.clientType,e=a.messagePayload,g=a.messageType,i=a.senderId,j=a.sessionId;a=a.storage;return a.runInTransaction(function(a){return c("LSSendPakeMessageStoredProcedure")(c("LSFactory")(a),{clientType:(h||(h=d("LSIntEnum"))).ofNumber(b),messagePayload:e,messageType:h.ofNumber(g),senderId:i,sessionId:j})},"readwrite",void 0,void 0,f.id+":116")}g.sendPakeMessageOne=a;g.joinPakeSession=b;g.decryptPakeSecret=e;g.sendPakeMessage=i}),98);
__d("PakeQplLogging",["MWEBODSCategory","MWEBODSEntityKey.enum","MWEBODSEntityName.enum","ODS","QPLEvent","QPLUserFlow"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){c("QPLUserFlow").getActiveFlowIDs().includes((h||(h=d("QPLEvent"))).getMarkerId(a))||((i||(i=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),c("MWEBODSEntityName.enum").MW_EB_OTC_AUTH,c("MWEBODSEntityKey.enum").START),c("QPLUserFlow").start(a,{annotations:{string:babelHelpers["extends"]({},b)}}))}function b(a){var b=a.annotations,e=a.errorName,f=a.event;a=a.isUserError;c("QPLUserFlow").endFailure(f,e,{annotations:b});f=a===!0?c("MWEBODSEntityKey.enum").SUCCESS:c("MWEBODSEntityKey.enum").FAIL;(i||(i=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),c("MWEBODSEntityName.enum").MW_EB_OTC_AUTH,f)}function e(a,b){c("QPLUserFlow").endSuccess(a,{annotations:b}),(i||(i=d("ODS"))).bumpEntityKey(c("MWEBODSCategory"),c("MWEBODSEntityName.enum").MW_EB_OTC_AUTH,c("MWEBODSEntityKey.enum").SUCCESS)}g.startPakeQPLFlow=a;g.endPakeQPLFlowFailure=b;g.endPakeQPLFlowSuccess=e}),98);
__d("deserializeSecretsAndAddDevice",["EBMainThreadEBDBApiDeferred","EBWorkerODSEntityName.enum","FBLogger","I64","LSAuthorityLevel","LSEncryptedBackupsRecoveryCodeStatus","LSIntEnum","MWDeserializeSecretsAndAddDevice","MWEncryptedBackupsDeviceRegistrationId","MWEncryptedBackupsInitializeRestoreDeferred","MWPakeQPLEvents","PAKEMessageTypeEnum","PakeQplLogging","QPLUserFlow","ReQL","cr:17321","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b=a.db,e=a.initiatorId,f=a.onAddDeviceFailure,g=a.onAddDeviceFinish;a=a.secrets;var k=function(){};c("QPLUserFlow").addPoint(d("MWPakeQPLEvents").pakeInitiatorQplEvent,"MEB_DESERIALIZE_SECRETS_AND_ADD_DEVICE_START");return c("MWDeserializeSecretsAndAddDevice")({initiatorId:e,secrets:a,storage:b}).then(function(a){a=a[0];a||(c("FBLogger")("labyrinth_web").mustfix("PAKE: deserializeSecretsAndAddDevice sproc failed"),d("PakeQplLogging").endPakeQPLFlowFailure({annotations:{bool:{isUserError:!1},int:{errorCode:c("PAKEMessageTypeEnum").DESERIALIZE_SECRETS_ERROR}},errorName:"MEB_DESERIALIZE_SECRETS_AND_ADD_DEVICE_FAILURE",event:d("MWPakeQPLEvents").pakeInitiatorQplEvent,isUserError:!1}),f());k=d("ReQL").fromTableAscending(b.tables.secure_encrypted_backups_recovery_code_status).subscribe(function(a,e){if(e.operation==="add"||e.operation==="put"){a=e.value.recoveryCodeStatus;if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsRecoveryCodeStatus").VALID))){k();c("QPLUserFlow").addPoint((e=d("MWPakeQPLEvents")).pakeInitiatorQplEvent,"MEB_DESERIALIZE_SECRETS_AND_ADD_DEVICE_END");void d("EBMainThreadEBDBApiDeferred").addNewDevice();g();c("QPLUserFlow").addPoint(e.pakeInitiatorQplEvent,"MEB_INITIALIZE_RESTORE_START");d("MWEncryptedBackupsInitializeRestoreDeferred").encryptedBackupsInitializeRestoreDeferred({db:b,onFailure:function(){d("PakeQplLogging").endPakeQPLFlowFailure({annotations:{bool:{isUserError:!1}},errorName:"MEB_INITIALIZE_RESTORE_FAILURE",event:d("MWPakeQPLEvents").pakeInitiatorQplEvent,isUserError:!1})}});c("QPLUserFlow").addPoint(e.pakeInitiatorQplEvent,"MEB_INITIALIZE_RESTORE_END");d("PakeQplLogging").endPakeQPLFlowSuccess(e.pakeInitiatorQplEvent);c("promiseDone")(j(b))}else if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsRecoveryCodeStatus").SYSTEM_ERROR)))c("FBLogger")("labyrinth_web").mustfix("PAKE: LSEncryptedBackupsFinishAddPeerDeviceTask task failed"),d("PakeQplLogging").endPakeQPLFlowFailure({annotations:{bool:{isUserError:!1},int:{errorCode:c("PAKEMessageTypeEnum").DESERIALIZE_SECRETS_ERROR}},errorName:"MEB_FINISH_ADD_PEER_DEVICE_FAILURE",event:d("MWPakeQPLEvents").pakeInitiatorQplEvent,isUserError:!1}),f();else{e="PAKE: Unexpected recovery code status: "+(h||(h=d("I64"))).to_int32(a);c("FBLogger")("labyrinth_web").mustfix(e)}}});return k}).catch(function(a){a="PAKE: error when adding new device using OTC, "+a;c("FBLogger")("labyrinth_web").mustfix(a);d("PakeQplLogging").endPakeQPLFlowFailure({annotations:{bool:{isUserError:!1},int:{errorCode:c("PAKEMessageTypeEnum").DESERIALIZE_SECRETS_ERROR},string:{exceptionMessage:a}},errorName:"MEB_DESERIALIZE_SECRETS_AND_ADD_DEVICE_EXCEPTION",event:d("MWPakeQPLEvents").pakeInitiatorQplEvent,isUserError:!1});f();k();return function(){}})}async function j(a){if(b("cr:17321")!=null){a=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.secure_encrypted_backups_client_state).filter(function(a){a=a.authorityLevel;return(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))}));if(a!=null&&a.deviceId!=null){var e=a.deviceId;void (b("cr:17321")==null?void 0:b("cr:17321").fireAndForget("backend","addDeviceWithKeysInWorker",{backupId:a.backupId,deviceRegistrationId:d("MWEncryptedBackupsDeviceRegistrationId").getDeviceRegistrationId(),isAutoRestore:!1,previousDeviceId:e,source:c("EBWorkerODSEntityName.enum").MW_EB_OTC_MAIN_THREAD}))}}}g.default=a}),98);
__d("establishPakeHandshakeAsInitiator",["Base64Utils","FBLogger","I64","MWEncryptedBackupsDeviceRegistrationId","MWPakeQPLEvents","PAKECleanupSessionReasonEnum","PAKEDecryptSecretSprocStatusEnum","PAKEGetActiveSessionSprocStatusEnum","PAKEMessageTypeEnum","PakeCpaceUtils","PakeCpaceWasm","PakeQplLogging","QPLUserFlow","ReQL","clearTimeout","promiseDone","requireDeferred","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("CleanupPakeSession").__setRef("establishPakeHandshakeAsInitiator"),j=c("requireDeferred")("PakeInitiatorSprocCalls").__setRef("establishPakeHandshakeAsInitiator"),k=(h||(h=d("I64"))).of_int32(-1),l=3e3,m="PAKE_INITIATOR_FAILURE";async function a(a){var b=a.clientType,e=a.onGeneralFailure,f=a.onMaxAttemptsReached,g=a.onNoSessionExists,n=a.onSessionExpired,o=a.onSuccessfulSecretDecryption,p=a.onWrongOtc,q=a.otc,r=a.pakeCpaceModule,s=a.storage,t=a.timeout,u=function(){},v=function(){z&&c("clearTimeout")(z)},w=d("MWEncryptedBackupsDeviceRegistrationId").getDeviceRegistrationId();if(w===""){d("PakeQplLogging").endPakeQPLFlowFailure({annotations:{bool:{isUserError:!1},int:{errorCode:c("PAKEMessageTypeEnum").GENERIC_ERROR}},errorName:m,event:d("MWPakeQPLEvents").pakeInitiatorQplEvent,isUserError:!1});return{pakeClient:null,stopTimeout:v,unsubFromMessagesTable:u}}var x=(a=r)!=null?a:await d("PakeCpaceWasm").PakeCPaceWasm(),y=x.createCPaceClient(w),z=null,A=null,B=!1,C=d("ReQL").fromTableAscending(s.tables.pake_messages),D=function(){z&&c("clearTimeout")(z),z=c("setTimeout")(function(){e(),u(),i.onReady(function(a){c("promiseDone")(a({cleanupReason:c("PAKECleanupSessionReasonEnum").TIMEOUT,clientType:b,deviceId:w,storage:s}))}),c("FBLogger")("labyrinth_web").mustfix("PAKE handshake failed by timeout")},t)},E=function(){A&&c("clearTimeout")(A),A=c("setTimeout")(function(){c("QPLUserFlow").addPoint(d("MWPakeQPLEvents").pakeInitiatorQplEvent,"PAKE_CPACE_RETRY_JOIN_SESSION"),B=!0,M()},l)},F=function(a){var d=a.messageType,f=a.sessionId;e();j.onReady(function(a){c("promiseDone")(a.sendPakeMessage({clientType:b,messageType:d,senderId:w,sessionId:f,storage:s}))})},G=function(a){var e=a.messagePayload,f=a.responderId,g=a.sessionId;c("QPLUserFlow").addPoint(d("MWPakeQPLEvents").pakeInitiatorQplEvent,"PAKE_CPACE_STEP_THREE_START");if(e==null){c("FBLogger")("labyrinth_web").mustfix("PAKE: When executing step 3 of CPace Handshake messagePayload was null");d("PakeQplLogging").endPakeQPLFlowFailure({annotations:{bool:{isUserError:!1},int:{errorCode:c("PAKEMessageTypeEnum").INVALID_PREVIOUS_MESSAGE_ERROR}},errorName:m,event:d("MWPakeQPLEvents").pakeInitiatorQplEvent,isUserError:!1});return}if(f==null){c("FBLogger")("labyrinth_web").mustfix("PAKE: When executing step 3 of CPace Handshake responderId was null");d("PakeQplLogging").endPakeQPLFlowFailure({annotations:{bool:{isUserError:!1},int:{errorCode:c("PAKEMessageTypeEnum").INVALID_PREVIOUS_MESSAGE_ERROR}},errorName:m,event:d("MWPakeQPLEvents").pakeInitiatorQplEvent,isUserError:!1});return}a=d("Base64Utils").toArrayBuffer(e);var i;try{f=x.clientFinalize(y,new Uint8Array(a));i=f.clientKey1}catch(a){F({messageType:c("PAKEMessageTypeEnum").CPACE_STEP_3_ERROR,sessionId:g});d("PakeQplLogging").endPakeQPLFlowFailure({annotations:{bool:{isUserError:!1},int:{errorCode:c("PAKEMessageTypeEnum").CPACE_STEP_3_ERROR}},errorName:m,event:d("MWPakeQPLEvents").pakeInitiatorQplEvent,isUserError:!1});throw c("FBLogger")("labyrinth_web").mustfixThrow("PAKE: Error executing CPace step 3")}c("QPLUserFlow").addPoint(d("MWPakeQPLEvents").pakeInitiatorQplEvent,"PAKE_DECRYPT_SECRET_START");j.onReady(function(a){c("promiseDone")(a.decryptPakeSecret({clientType:b,encryptionKey:d("PakeCpaceUtils").typedArrayToBuffer(i),sessionId:g,storage:s}),function(e){var f=e[0];e=e[1];v();switch((h||(h=d("I64"))).to_int32(e)){case c("PAKEDecryptSecretSprocStatusEnum").SUCCESS:if(f==null){d("PakeQplLogging").endPakeQPLFlowFailure({annotations:{bool:{isUserError:!1},int:{errorCode:c("PAKEMessageTypeEnum").GENERIC_ERROR}},errorName:m,event:d("MWPakeQPLEvents").pakeInitiatorQplEvent,isUserError:!1});throw c("FBLogger")("labyrinth_web").mustfixThrow("PAKE: decryptedSecret is null despite SPROC success")}c("QPLUserFlow").addPoint(d("MWPakeQPLEvents").pakeInitiatorQplEvent,"PAKE_DECRYPT_SECRET_END");c("promiseDone")(a.sendPakeMessage({clientType:b,messageType:c("PAKEMessageTypeEnum").PAKE_HANDSHAKE_SUCCESS,senderId:w,sessionId:g,storage:s}));o({decryptedSecret:f,initiatorId:w});break;case c("PAKEDecryptSecretSprocStatusEnum").WRONG_KEYS:d("PakeQplLogging").endPakeQPLFlowFailure({annotations:{bool:{isUserError:!0}},errorName:m,event:d("MWPakeQPLEvents").pakeInitiatorQplEvent,isUserError:!0});p();break;case c("PAKEDecryptSecretSprocStatusEnum").FAILURE:d("PakeQplLogging").endPakeQPLFlowFailure({annotations:{bool:{isUserError:!1}},errorName:m,event:d("MWPakeQPLEvents").pakeInitiatorQplEvent,isUserError:!1});F({messageType:c("PAKEMessageTypeEnum").DECRYPTION_ERROR,sessionId:g});break}},function(a){d("PakeQplLogging").endPakeQPLFlowFailure({annotations:{bool:{isUserError:!1},string:{exceptionMessage:a}},errorName:m,event:d("MWPakeQPLEvents").pakeInitiatorQplEvent,isUserError:!1}),F({messageType:c("PAKEMessageTypeEnum").DECRYPTION_ERROR,sessionId:g})})})},H=function(a){var b=a.annotations,e=a.fbLoggerMessage,f=a.isUserError,g=a.messageType,h=a.onFinish;a=a.unsubFromTable;v();a();h();e!=null&&c("FBLogger")("labyrinth_web").mustfix(e,g);d("PakeQplLogging").endPakeQPLFlowFailure({annotations:b,errorName:m,event:d("MWPakeQPLEvents").pakeInitiatorQplEvent,isUserError:f})},I=function(a){var b=a.onPakeStepOneSuccess;u=C.subscribe(function(a,f){if(f.operation!=="put"&&f.operation!=="add")return;a=f.value;f=(h||(h=d("I64"))).to_int32(a.messageType);switch(f){case c("PAKEMessageTypeEnum").PAKE_MESSAGE_1:c("QPLUserFlow").addPoint(d("MWPakeQPLEvents").pakeInitiatorQplEvent,"PAKE_SEND_PAKE_MESSAGE_ONE_END");u();b();break;case c("PAKEMessageTypeEnum").INVALID_PREVIOUS_MESSAGE_ERROR:case c("PAKEMessageTypeEnum").PREVIOUS_MESSAGE_MISSING_ERROR:return H({annotations:{bool:{isUserError:!1},int:{errorCode:f}},fbLoggerMessage:"PAKE: Failed to send PAKE message one due to invalid state",isUserError:!1,messageType:f,onFinish:function(){return e()},unsubFromTable:function(){u()}});case c("PAKEMessageTypeEnum").MESSAGE_SENT_ERROR:return H({annotations:{bool:{isUserError:!1},int:{errorCode:f}},fbLoggerMessage:"PAKE: Failed to send PAKE message one",isUserError:!1,messageType:f,onFinish:function(){return e()},unsubFromTable:function(){u()}});default:break}})},J=function(a){var b=a.sessionId;u=C.subscribe(function(a,g){if(g.operation!=="put"&&g.operation!=="add")return;a=g.value;g=(h||(h=d("I64"))).to_int32(a.messageType);switch(g){case c("PAKEMessageTypeEnum").PAKE_MESSAGE_2_AND_SECRET:u();G({messagePayload:a.messagePayload,responderId:a.responderId,sessionId:b});break;case c("PAKEMessageTypeEnum").MAX_ATTEMPTS_ERROR:return H({annotations:{bool:{isUserError:!0},int:{errorCode:g}},isUserError:!0,messageType:g,onFinish:function(){return f()},unsubFromTable:function(){u()}});case c("PAKEMessageTypeEnum").SESSION_EXPIRED_ERROR:return H({annotations:{bool:{isUserError:!0},int:{errorCode:g}},isUserError:!0,messageType:g,onFinish:function(){return n()},unsubFromTable:function(){u()}});case c("PAKEMessageTypeEnum").GENERIC_ERROR:return H({annotations:{bool:{isUserError:!1},int:{errorCode:g}},fbLoggerMessage:"PAKE: Something went wrong in the responder device",isUserError:!1,messageType:g,onFinish:function(){return e()},unsubFromTable:function(){u()}});case c("PAKEMessageTypeEnum").FETCH_SECRETS_ERROR:return H({annotations:{bool:{isUserError:!1},int:{errorCode:g}},fbLoggerMessage:"PAKE: Responder device failed to fetch secrets.",isUserError:!1,messageType:g,onFinish:function(){return e()},unsubFromTable:function(){u()}});case c("PAKEMessageTypeEnum").FLOW_ABANDONED_ERROR:return H({annotations:{bool:{isUserError:!1},int:{errorCode:g}},fbLoggerMessage:"PAKE: Responder device flow was abandoned.",isUserError:!1,messageType:g,onFinish:function(){return e()},unsubFromTable:function(){u()}});default:return H({annotations:{bool:{isUserError:!1},int:{errorCode:c("PAKEMessageTypeEnum").GENERIC_ERROR}},fbLoggerMessage:"PAKE: Unexpected Message Type when listening for pake step two success "+g,isUserError:!1,messageType:g,onFinish:function(){return e()},unsubFromTable:function(){u()}})}})},K=function(a){var f=a.onJoinSessionSuccess;c("QPLUserFlow").addPoint(d("MWPakeQPLEvents").pakeInitiatorQplEvent,"PAKE_GET_ACTIVE_SESSION_START");j.onReady(function(a){c("promiseDone")(a.joinPakeSession({clientType:b,initiatorId:w,storage:s}),function(a){var b=a[0],i=a[1];a=a[2];i=(i=i)!=null?i:k;switch((h||(h=d("I64"))).to_int32(b)){case c("PAKEGetActiveSessionSprocStatusEnum").SUCCESS:if(a==null||i===k){c("FBLogger")("labyrinth_web").mustfix("PAKE: When joining session, responderId or joinedSessionId were unexpectedly null");d("PakeQplLogging").endPakeQPLFlowFailure({annotations:{bool:{isUserError:!1},int:{errorCode:c("PAKEMessageTypeEnum").GENERIC_ERROR}},errorName:m,event:d("MWPakeQPLEvents").pakeInitiatorQplEvent,isUserError:!1});e();return}f(a,i);c("QPLUserFlow").addAnnotations(d("MWPakeQPLEvents").pakeInitiatorQplEvent,{string:{session_id:(h||(h=d("I64"))).to_string(i)}});break;case c("PAKEGetActiveSessionSprocStatusEnum").NO_SESSION:if(B===!1){E();return}d("PakeQplLogging").endPakeQPLFlowFailure({annotations:{bool:{isUserError:!0},int:{errorCode:c("PAKEMessageTypeEnum").NO_ACTIVE_SESSION}},errorName:m,event:d("MWPakeQPLEvents").pakeInitiatorQplEvent,isUserError:!0});g();v();break;case c("PAKEGetActiveSessionSprocStatusEnum").FAILURE:d("PakeQplLogging").endPakeQPLFlowFailure({annotations:{bool:{isUserError:!1},int:{errorCode:c("PAKEMessageTypeEnum").GENERIC_ERROR}},errorName:m,event:d("MWPakeQPLEvents").pakeInitiatorQplEvent,isUserError:!1});c("FBLogger")("labyrinth_web").mustfix("PAKE: When joining session, sproc failed");e();v();break}},function(){d("PakeQplLogging").endPakeQPLFlowFailure({annotations:{bool:{isUserError:!1},int:{errorCode:c("PAKEMessageTypeEnum").GENERIC_ERROR}},errorName:m,event:d("MWPakeQPLEvents").pakeInitiatorQplEvent,isUserError:!1}),c("FBLogger")("labyrinth_web").mustfix("PAKE: When joining session, sproc failed"),e(),v()})})},L=function(a){var e=a.responderId,f=a.sessionId,g;c("QPLUserFlow").addPoint(d("MWPakeQPLEvents").pakeInitiatorQplEvent,"PAKE_CPACE_STEP_ONE_START");try{g=x.clientBegin(y,q,e)}catch(a){F({messageType:c("PAKEMessageTypeEnum").CPACE_STEP_1_ERROR,sessionId:f});d("PakeQplLogging").endPakeQPLFlowFailure({annotations:{bool:{isUserError:!1},int:{errorCode:c("PAKEMessageTypeEnum").CPACE_STEP_1_ERROR}},errorName:m,event:d("MWPakeQPLEvents").pakeInitiatorQplEvent,isUserError:!1});throw c("FBLogger")("labyrinth_web").mustfixThrow("PAKE: Error executing CPace step 1")}c("QPLUserFlow").addPoint(d("MWPakeQPLEvents").pakeInitiatorQplEvent,"PAKE_SEND_MESSAGE_ONE_START");j.onReady(function(a){a.sendPakeMessageOne({clientType:b,initiatorId:w,messagePayload:d("PakeCpaceUtils").typedArrayToBuffer(g),sessionId:f,storage:s})});I({onPakeStepOneSuccess:function(){J({sessionId:f})}})},M=function(){D();d("PakeQplLogging").startPakeQPLFlow(d("MWPakeQPLEvents").pakeInitiatorQplEvent);K({onJoinSessionSuccess:function(a,b){L({responderId:a,sessionId:b})}});return{pakeClient:y,stopTimeout:v,unsubFromMessagesTable:u}};return M()}g.default=a}),98);